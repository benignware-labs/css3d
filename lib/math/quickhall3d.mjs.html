<html>
  <head>
    <base href="../.."/>
    <title>css3d - quickhall3d.mjs</title>

    <link rel="stylesheet" href="public/github-markdown.min-05fea8df8ec68cb6c27337f6db65733e.css">
    <link rel="stylesheet" href="public/highlight-c281e701b2830b095c67417cd9a7b210.css">
    <link rel="stylesheet" href="public/style-aea3468ccb7ee0c3c4c2b5d339fc989e.css">
    <link rel="stylesheet" href="public/all-cc69a8b8824029ae06797ee01a3cc5c8.css">

    <script src="public/plugins/core/example/ExampleViewer.js"></script>
              
              <script src="public/index.mjs" type="module"></script>
            
  </head>
  <body class="markdown-body flex-column">
    <div class="header flex">
      <a class="header-brand" href="./index.html">css3d</a>
      
<ul class="menu flex align-center justify-center">
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="elements/Sphere.html"
        
        
          role="button"
          
          aria-expanded="false"
        
      >
        Elements
      </a>
      
    </li>
    
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="examples/textures.html"
        
        
          role="button"
          
          aria-expanded="false"
        
      >
        Examples
      </a>
      
    </li>
    
  
</ul>
      <nav class="links">
        
          
            
          
        
      </nav>
    </div>
      
      

<main class="flex-grow flex h-100">
  <div class="sidebar sidebar-left border-right mr-2 flex-noshrink">
  
<ul class="menu">
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="elements/Sphere.html"
        
        
          role="button"
          
          aria-expanded="false"
        
      >
        Elements
      </a>
      
        
<ul class="menu">
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="elements/Sphere.html"
        
        
      >
        Sphere
      </a>
      
    </li>
    
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="elements/Polyhedron.html"
        
        
      >
        Polyhedron
      </a>
      
    </li>
    
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="elements/Cylinder.html"
        
        
      >
        Cylinder
      </a>
      
    </li>
    
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="elements/Box.html"
        
        
      >
        Box
      </a>
      
    </li>
    
  
</ul>
      
    </li>
    
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="examples/textures.html"
        
        
          role="button"
          
          aria-expanded="false"
        
      >
        Examples
      </a>
      
        
<ul class="menu">
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="examples/textures.html"
        
        
      >
        Textures
      </a>
      
    </li>
    
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="examples/planets.html"
        
        
      >
        Planets
      </a>
      
    </li>
    
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="examples/crane.html"
        
        
      >
        Crane
      </a>
      
    </li>
    
  
</ul>
      
    </li>
    
  
</ul>
</div>
  <div class="flex-grow">
    <div class="container py-4">
      <h1>Source: quickhall3d.mjs</h1>
      <p>
        lib/math/quickhall3d.mjs
      </p>
      
      <pre><code class="hljs"><span class="hljs-comment">/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/quickhull3d@2.1.0/dist/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */</span>
<span class="hljs-keyword">import</span> e from<span class="hljs-string">&quot;/npm/point-line-distance@1.0.0/+esm&quot;</span>;<span class="hljs-keyword">import</span> t from<span class="hljs-string">&quot;/npm/get-plane-normal@1.0.0/+esm&quot;</span>;<span class="hljs-keyword">import</span> n from<span class="hljs-string">&quot;/npm/gl-vec3@1.1.3/dot/+esm&quot;</span>;<span class="hljs-keyword">import</span> r from<span class="hljs-string">&quot;/npm/gl-vec3@1.1.3/add/+esm&quot;</span>;<span class="hljs-keyword">import</span> i from<span class="hljs-string">&quot;/npm/gl-vec3@1.1.3/subtract/+esm&quot;</span>;<span class="hljs-keyword">import</span> a from<span class="hljs-string">&quot;/npm/gl-vec3@1.1.3/cross/+esm&quot;</span>;<span class="hljs-keyword">import</span> o from<span class="hljs-string">&quot;/npm/gl-vec3@1.1.3/copy/+esm&quot;</span>;<span class="hljs-keyword">import</span> s from<span class="hljs-string">&quot;/npm/gl-vec3@1.1.3/length/+esm&quot;</span>;<span class="hljs-keyword">import</span> l from<span class="hljs-string">&quot;/npm/gl-vec3@1.1.3/scale/+esm&quot;</span>;<span class="hljs-keyword">import</span> c from<span class="hljs-string">&quot;/npm/gl-vec3@1.1.3/scaleAndAdd/+esm&quot;</span>;<span class="hljs-keyword">import</span> u from<span class="hljs-string">&quot;/npm/gl-vec3@1.1.3/normalize/+esm&quot;</span>;<span class="hljs-keyword">import</span> f from<span class="hljs-string">&quot;/npm/gl-vec3@1.1.3/distance/+esm&quot;</span>;<span class="hljs-keyword">import</span> d from<span class="hljs-string">&quot;/npm/gl-vec3@1.1.3/squaredDistance/+esm&quot;</span>;<span class="hljs-keyword">import</span> h from<span class="hljs-string">&quot;/npm/debug@4.3.5/+esm&quot;</span>;<span class="hljs-keyword">var</span> p={},v={},m={};!function(e){function t(e,t){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-number">0</span>;n&lt;t.length;n++){<span class="hljs-keyword">var</span> r=t[n];r.enumerable=r.enumerable||!<span class="hljs-number">1</span>,r.configurable=!<span class="hljs-number">0</span>,<span class="hljs-string">&quot;value&quot;</span><span class="hljs-keyword">in</span> r&amp;&amp;(r.writable=!<span class="hljs-number">0</span>),Object.defineProperty(e,r.key,r)}}Object.defineProperty(e,<span class="hljs-string">&quot;__esModule&quot;</span>,{value:!<span class="hljs-number">0</span>}),e.default=void <span class="hljs-number">0</span>;<span class="hljs-keyword">var</span> n=function(){function e(){!function(e,t){<span class="hljs-keyword">if</span>(!(e instanceof t))<span class="hljs-keyword">throw</span> new TypeError(<span class="hljs-string">&quot;Cannot call a class as a function&quot;</span>)}(<span class="hljs-keyword">this</span>,e),<span class="hljs-keyword">this</span>.head=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.tail=<span class="hljs-literal">null</span>}<span class="hljs-keyword">var</span> n,r,i;<span class="hljs-keyword">return</span> n=e,(r=[{key:<span class="hljs-string">&quot;clear&quot;</span>,value:function(){<span class="hljs-keyword">this</span>.head=<span class="hljs-keyword">this</span>.tail=<span class="hljs-literal">null</span>}},{key:<span class="hljs-string">&quot;insertBefore&quot;</span>,value:function(e,t){t.prev=e.prev,t.next=e,t.prev?t.prev.next=t:<span class="hljs-keyword">this</span>.head=t,e.prev=t}},{key:<span class="hljs-string">&quot;insertAfter&quot;</span>,value:function(e,t){t.prev=e,t.next=e.next,t.next?t.next.prev=t:<span class="hljs-keyword">this</span>.tail=t,e.next=t}},{key:<span class="hljs-string">&quot;add&quot;</span>,value:function(e){<span class="hljs-keyword">this</span>.head?<span class="hljs-keyword">this</span>.tail.next=e:<span class="hljs-keyword">this</span>.head=e,e.prev=<span class="hljs-keyword">this</span>.tail,e.next=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.tail=e}},{key:<span class="hljs-string">&quot;addAll&quot;</span>,value:function(e){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">this</span>.head?<span class="hljs-keyword">this</span>.tail.next=e:<span class="hljs-keyword">this</span>.head=e,e.prev=<span class="hljs-keyword">this</span>.tail;e.next;)e=e.next;<span class="hljs-keyword">this</span>.tail=e}},{key:<span class="hljs-string">&quot;remove&quot;</span>,value:function(e){e.prev?e.prev.next=e.next:<span class="hljs-keyword">this</span>.head=e.next,e.next?e.next.prev=e.prev:<span class="hljs-keyword">this</span>.tail=e.prev}},{key:<span class="hljs-string">&quot;removeChain&quot;</span>,value:function(e,t){e.prev?e.prev.next=t.next:<span class="hljs-keyword">this</span>.head=t.next,t.next?t.next.prev=e.prev:<span class="hljs-keyword">this</span>.tail=e.prev}},{key:<span class="hljs-string">&quot;first&quot;</span>,value:function(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.head}},{key:<span class="hljs-string">&quot;isEmpty&quot;</span>,value:function(){<span class="hljs-keyword">return</span>!<span class="hljs-keyword">this</span>.head}}])&amp;&amp;t(n.prototype,r),i&amp;&amp;t(n,i),Object.defineProperty(n,<span class="hljs-string">&quot;prototype&quot;</span>,{writable:!<span class="hljs-number">1</span>}),e}();e.default=n}(m);<span class="hljs-keyword">var</span> g={};!function(e){function t(e,t){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-number">0</span>;n&lt;t.length;n++){<span class="hljs-keyword">var</span> r=t[n];r.enumerable=r.enumerable||!<span class="hljs-number">1</span>,r.configurable=!<span class="hljs-number">0</span>,<span class="hljs-string">&quot;value&quot;</span><span class="hljs-keyword">in</span> r&amp;&amp;(r.writable=!<span class="hljs-number">0</span>),Object.defineProperty(e,r.key,r)}}function n(e,n,r){<span class="hljs-keyword">return</span> n&amp;&amp;t(e.prototype,n),r&amp;&amp;t(e,r),Object.defineProperty(e,<span class="hljs-string">&quot;prototype&quot;</span>,{writable:!<span class="hljs-number">1</span>}),e}Object.defineProperty(e,<span class="hljs-string">&quot;__esModule&quot;</span>,{value:!<span class="hljs-number">0</span>}),e.default=void <span class="hljs-number">0</span>;<span class="hljs-keyword">var</span> r=n((function e(t,n){!function(e,t){<span class="hljs-keyword">if</span>(!(e instanceof t))<span class="hljs-keyword">throw</span> new TypeError(<span class="hljs-string">&quot;Cannot call a class as a function&quot;</span>)}(<span class="hljs-keyword">this</span>,e),<span class="hljs-keyword">this</span>.point=t,<span class="hljs-keyword">this</span>.index=n,<span class="hljs-keyword">this</span>.next=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.prev=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.face=<span class="hljs-literal">null</span>}));e.default=r}(g);<span class="hljs-keyword">var</span> y={},x={};!function(e){Object.defineProperty(e,<span class="hljs-string">&quot;__esModule&quot;</span>,{value:!<span class="hljs-number">0</span>}),e.default=void <span class="hljs-number">0</span>;<span class="hljs-keyword">var</span> t=r(f),n=r(d);function r(e){<span class="hljs-keyword">return</span> e&amp;&amp;e.__esModule?e:{default:e}}function i(e,t){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-number">0</span>;n&lt;t.length;n++){<span class="hljs-keyword">var</span> r=t[n];r.enumerable=r.enumerable||!<span class="hljs-number">1</span>,r.configurable=!<span class="hljs-number">0</span>,<span class="hljs-string">&quot;value&quot;</span><span class="hljs-keyword">in</span> r&amp;&amp;(r.writable=!<span class="hljs-number">0</span>),Object.defineProperty(e,r.key,r)}}<span class="hljs-keyword">var</span> a=h(<span class="hljs-string">&quot;halfedge&quot;</span>),o=function(){function e(t,n){!function(e,t){<span class="hljs-keyword">if</span>(!(e instanceof t))<span class="hljs-keyword">throw</span> new TypeError(<span class="hljs-string">&quot;Cannot call a class as a function&quot;</span>)}(<span class="hljs-keyword">this</span>,e),<span class="hljs-keyword">this</span>.vertex=t,<span class="hljs-keyword">this</span>.face=n,<span class="hljs-keyword">this</span>.next=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.prev=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.opposite=<span class="hljs-literal">null</span>}<span class="hljs-keyword">var</span> r,o,s;<span class="hljs-keyword">return</span> r=e,(o=[{key:<span class="hljs-string">&quot;head&quot;</span>,value:function(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.vertex}},{key:<span class="hljs-string">&quot;tail&quot;</span>,value:function(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.prev?<span class="hljs-keyword">this</span>.prev.vertex:<span class="hljs-literal">null</span>}},{key:<span class="hljs-string">&quot;length&quot;</span>,value:function(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tail()?(<span class="hljs-number">0</span>,t.default)(<span class="hljs-keyword">this</span>.tail().point,<span class="hljs-keyword">this</span>.head().point):-<span class="hljs-number">1</span>}},{key:<span class="hljs-string">&quot;lengthSquared&quot;</span>,value:function(){<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tail()?(<span class="hljs-number">0</span>,n.default)(<span class="hljs-keyword">this</span>.tail().point,<span class="hljs-keyword">this</span>.head().point):-<span class="hljs-number">1</span>}},{key:<span class="hljs-string">&quot;setOpposite&quot;</span>,value:function(e){<span class="hljs-keyword">var</span> t=<span class="hljs-keyword">this</span>;a.enabled&amp;&amp;a(<span class="hljs-string">&quot;opposite &quot;</span>.concat(t.tail().index,<span class="hljs-string">&quot; &lt;--\x3e &quot;</span>).concat(t.head().index,<span class="hljs-string">&quot; between &quot;</span>).concat(t.face.collectIndices(),<span class="hljs-string">&quot;, &quot;</span>).concat(e.face.collectIndices())),<span class="hljs-keyword">this</span>.opposite=e,e.opposite=<span class="hljs-keyword">this</span>}}])&amp;&amp;i(r.prototype,o),s&amp;&amp;i(r,s),Object.defineProperty(r,<span class="hljs-string">&quot;prototype&quot;</span>,{writable:!<span class="hljs-number">1</span>}),e}();e.default=o}(x),function(e){Object.defineProperty(e,<span class="hljs-string">&quot;__esModule&quot;</span>,{value:!<span class="hljs-number">0</span>}),e.default=e.VISIBLE=e.NON_CONVEX=e.DELETED=void <span class="hljs-number">0</span>;<span class="hljs-keyword">var</span> t=w(n),f=w(r),d=w(i),p=w(a),v=w(o),m=w(s),g=w(l),y=w(c),b=w(u),k=w(x);function w(e){<span class="hljs-keyword">return</span> e&amp;&amp;e.__esModule?e:{default:e}}function E(e,t){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-number">0</span>;n&lt;t.length;n++){<span class="hljs-keyword">var</span> r=t[n];r.enumerable=r.enumerable||!<span class="hljs-number">1</span>,r.configurable=!<span class="hljs-number">0</span>,<span class="hljs-string">&quot;value&quot;</span><span class="hljs-keyword">in</span> r&amp;&amp;(r.writable=!<span class="hljs-number">0</span>),Object.defineProperty(e,r.key,r)}}<span class="hljs-keyword">var</span> O=h(<span class="hljs-string">&quot;face&quot;</span>);e.VISIBLE=<span class="hljs-number">0</span>;e.NON_CONVEX=<span class="hljs-number">1</span>;e.DELETED=<span class="hljs-number">2</span>;<span class="hljs-keyword">var</span> F=function(){function e(){!function(e,t){<span class="hljs-keyword">if</span>(!(e instanceof t))<span class="hljs-keyword">throw</span> new TypeError(<span class="hljs-string">&quot;Cannot call a class as a function&quot;</span>)}(<span class="hljs-keyword">this</span>,e),<span class="hljs-keyword">this</span>.normal=[],<span class="hljs-keyword">this</span>.centroid=[],<span class="hljs-keyword">this</span>.offset=<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.outside=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.mark=<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.edge=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.nVertices=<span class="hljs-number">0</span>}<span class="hljs-keyword">var</span> n,r,i;<span class="hljs-keyword">return</span> n=e,i=[{key:<span class="hljs-string">&quot;createTriangle&quot;</span>,value:function(t,n,r){<span class="hljs-keyword">var</span> i=arguments.length&gt;<span class="hljs-number">3</span>&amp;&amp;void <span class="hljs-number">0</span>!==arguments[<span class="hljs-number">3</span>]?arguments[<span class="hljs-number">3</span>]:<span class="hljs-number">0</span>,a=new e,o=new k.default(t,a),s=new k.default(n,a),l=new k.default(r,a);<span class="hljs-keyword">return</span> o.next=l.prev=s,s.next=o.prev=l,l.next=s.prev=o,a.edge=o,a.computeNormalAndCentroid(i),O.enabled&amp;&amp;O(<span class="hljs-string">&quot;face created %j&quot;</span>,a.collectIndices()),a}}],(r=[{key:<span class="hljs-string">&quot;getEdge&quot;</span>,value:function(e){<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;number&quot;</span>!=typeof e)<span class="hljs-keyword">throw</span> Error(<span class="hljs-string">&quot;requires a number&quot;</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t=<span class="hljs-keyword">this</span>.edge;e&gt;<span class="hljs-number">0</span>;)t=t.next,e-=<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(;e&lt;<span class="hljs-number">0</span>;)t=t.prev,e+=<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span> t}},{key:<span class="hljs-string">&quot;computeNormal&quot;</span>,value:function(){<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>.edge,t=e.next,n=t.next,r=(<span class="hljs-number">0</span>,d.default)([],t.head().point,e.head().point),i=[],a=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">this</span>.nVertices=<span class="hljs-number">2</span>,<span class="hljs-keyword">this</span>.normal=[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>];n!==e;)(<span class="hljs-number">0</span>,v.default)(a,r),(<span class="hljs-number">0</span>,d.default)(r,n.head().point,e.head().point),(<span class="hljs-number">0</span>,f.default)(<span class="hljs-keyword">this</span>.normal,<span class="hljs-keyword">this</span>.normal,(<span class="hljs-number">0</span>,p.default)(i,a,r)),n=n.next,<span class="hljs-keyword">this</span>.nVertices+=<span class="hljs-number">1</span>;<span class="hljs-keyword">this</span>.area=(<span class="hljs-number">0</span>,m.default)(<span class="hljs-keyword">this</span>.normal),<span class="hljs-keyword">this</span>.normal=(<span class="hljs-number">0</span>,g.default)(<span class="hljs-keyword">this</span>.normal,<span class="hljs-keyword">this</span>.normal,<span class="hljs-number">1</span>/<span class="hljs-keyword">this</span>.area)}},{key:<span class="hljs-string">&quot;computeNormalMinArea&quot;</span>,value:function(e){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.computeNormal(),<span class="hljs-keyword">this</span>.area&lt;e){<span class="hljs-keyword">var</span> n,r=<span class="hljs-number">0</span>,i=<span class="hljs-keyword">this</span>.edge;<span class="hljs-keyword">do</span>{<span class="hljs-keyword">var</span> a=i.lengthSquared();a&gt;r&amp;&amp;(n=i,r=a),i=i.next}<span class="hljs-keyword">while</span>(i!==<span class="hljs-keyword">this</span>.edge);<span class="hljs-keyword">var</span> o=n.tail().point,s=n.head().point,l=(<span class="hljs-number">0</span>,d.default)([],s,o),c=Math.sqrt(r);(<span class="hljs-number">0</span>,g.default)(l,l,<span class="hljs-number">1</span>/c);<span class="hljs-keyword">var</span> u=(<span class="hljs-number">0</span>,t.default)(<span class="hljs-keyword">this</span>.normal,l);(<span class="hljs-number">0</span>,y.default)(<span class="hljs-keyword">this</span>.normal,<span class="hljs-keyword">this</span>.normal,l,-u),(<span class="hljs-number">0</span>,b.default)(<span class="hljs-keyword">this</span>.normal,<span class="hljs-keyword">this</span>.normal)}}},{key:<span class="hljs-string">&quot;computeCentroid&quot;</span>,value:function(){<span class="hljs-keyword">this</span>.centroid=[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>];<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>.edge;<span class="hljs-keyword">do</span>{(<span class="hljs-number">0</span>,f.default)(<span class="hljs-keyword">this</span>.centroid,<span class="hljs-keyword">this</span>.centroid,e.head().point),e=e.next}<span class="hljs-keyword">while</span>(e!==<span class="hljs-keyword">this</span>.edge);(<span class="hljs-number">0</span>,g.default)(<span class="hljs-keyword">this</span>.centroid,<span class="hljs-keyword">this</span>.centroid,<span class="hljs-number">1</span>/<span class="hljs-keyword">this</span>.nVertices)}},{key:<span class="hljs-string">&quot;computeNormalAndCentroid&quot;</span>,value:function(e){void <span class="hljs-number">0</span>!==e?<span class="hljs-keyword">this</span>.computeNormalMinArea(e):<span class="hljs-keyword">this</span>.computeNormal(),<span class="hljs-keyword">this</span>.computeCentroid(),<span class="hljs-keyword">this</span>.offset=(<span class="hljs-number">0</span>,t.default)(<span class="hljs-keyword">this</span>.normal,<span class="hljs-keyword">this</span>.centroid)}},{key:<span class="hljs-string">&quot;distanceToPlane&quot;</span>,value:function(e){<span class="hljs-keyword">return</span>(<span class="hljs-number">0</span>,t.default)(<span class="hljs-keyword">this</span>.normal,e)-<span class="hljs-keyword">this</span>.offset}},{key:<span class="hljs-string">&quot;connectHalfEdges&quot;</span>,value:function(e,t){<span class="hljs-keyword">var</span> n;<span class="hljs-keyword">if</span>(e.opposite.face===t.opposite.face){<span class="hljs-keyword">var</span> r,i=t.opposite.face;e===<span class="hljs-keyword">this</span>.edge&amp;&amp;(<span class="hljs-keyword">this</span>.edge=t),<span class="hljs-number">3</span>===i.nVertices?(r=t.opposite.prev.opposite,i.mark=<span class="hljs-number">2</span>,n=i):(r=t.opposite.next,i.edge===r.prev&amp;&amp;(i.edge=r),r.prev=r.prev.prev,r.prev.next=r),t.prev=e.prev,t.prev.next=t,t.setOpposite(r),i.computeNormalAndCentroid()}<span class="hljs-keyword">else</span> e.next=t,t.prev=e;<span class="hljs-keyword">return</span> n}},{key:<span class="hljs-string">&quot;mergeAdjacentFaces&quot;</span>,value:function(e,t){<span class="hljs-keyword">var</span> n=e.opposite,r=n.face;t.push(r),r.mark=<span class="hljs-number">2</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i,a,o=e.prev,s=e.next,l=n.prev,c=n.next;o.opposite.face===r;)o=o.prev,c=c.next;<span class="hljs-keyword">for</span>(;s.opposite.face===r;)s=s.next,l=l.prev;<span class="hljs-keyword">for</span>(i=c;i!==l.next;i=i.next)i.face=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.edge=s,(a=<span class="hljs-keyword">this</span>.connectHalfEdges(l,s))&amp;&amp;t.push(a),(a=<span class="hljs-keyword">this</span>.connectHalfEdges(o,c))&amp;&amp;t.push(a),<span class="hljs-keyword">this</span>.computeNormalAndCentroid(),t}},{key:<span class="hljs-string">&quot;collectIndices&quot;</span>,value:function(){<span class="hljs-keyword">var</span> e=[],t=<span class="hljs-keyword">this</span>.edge;<span class="hljs-keyword">do</span>{e.push(t.head().index),t=t.next}<span class="hljs-keyword">while</span>(t!==<span class="hljs-keyword">this</span>.edge);<span class="hljs-keyword">return</span> e}}])&amp;&amp;E(n.prototype,r),i&amp;&amp;E(n,i),Object.defineProperty(n,<span class="hljs-string">&quot;prototype&quot;</span>,{writable:!<span class="hljs-number">1</span>}),e}();e.default=F}(y),function(r){function i(e){<span class="hljs-keyword">return</span> i=<span class="hljs-string">&quot;function&quot;</span>==typeof Symbol&amp;&amp;<span class="hljs-string">&quot;symbol&quot;</span>==typeof Symbol.iterator?function(e){<span class="hljs-keyword">return</span> typeof e}:function(e){<span class="hljs-keyword">return</span> e&amp;&amp;<span class="hljs-string">&quot;function&quot;</span>==typeof Symbol&amp;&amp;e.<span class="hljs-keyword">constructor</span>===Symbol&amp;&amp;e!==Symbol.prototype?<span class="hljs-string">&quot;symbol&quot;</span>:typeof e},i(e)}Object.defineProperty(r,<span class="hljs-string">&quot;__esModule&quot;</span>,{value:!<span class="hljs-number">0</span>}),r.default=void <span class="hljs-number">0</span>;<span class="hljs-keyword">var</span> a=d(e),o=d(t),s=d(n),l=d(m),c=d(g),u=function(e,t){<span class="hljs-keyword">if</span>(!t&amp;&amp;e&amp;&amp;e.__esModule)<span class="hljs-keyword">return</span> e;<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>===e||<span class="hljs-string">&quot;object&quot;</span>!==i(e)&amp;&amp;<span class="hljs-string">&quot;function&quot;</span>!=typeof e)<span class="hljs-keyword">return</span>{default:e};<span class="hljs-keyword">var</span> n=f(t);<span class="hljs-keyword">if</span>(n&amp;&amp;n.has(e))<span class="hljs-keyword">return</span> n.<span class="hljs-keyword">get</span>(e);<span class="hljs-keyword">var</span> r={},a=Object.defineProperty&amp;&amp;Object.getOwnPropertyDescriptor;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o <span class="hljs-keyword">in</span> e)<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;default&quot;</span>!==o&amp;&amp;Object.prototype.hasOwnProperty.call(e,o)){<span class="hljs-keyword">var</span> s=a?Object.getOwnPropertyDescriptor(e,o):<span class="hljs-literal">null</span>;s&amp;&amp;(s.<span class="hljs-keyword">get</span>||s.<span class="hljs-keyword">set</span>)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&amp;&amp;n.<span class="hljs-keyword">set</span>(e,r);<span class="hljs-keyword">return</span> r}(y);function f(e){<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;function&quot;</span>!=typeof WeakMap)<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<span class="hljs-keyword">var</span> t=new WeakMap,n=new WeakMap;<span class="hljs-keyword">return</span>(f=function(e){<span class="hljs-keyword">return</span> e?n:t})(e)}function d(e){<span class="hljs-keyword">return</span> e&amp;&amp;e.__esModule?e:{default:e}}function p(e,t){<span class="hljs-keyword">return</span> function(e){<span class="hljs-keyword">if</span>(Array.isArray(e))<span class="hljs-keyword">return</span> e}(e)||function(e,t){<span class="hljs-keyword">var</span> n=<span class="hljs-literal">null</span>==e?<span class="hljs-literal">null</span>:<span class="hljs-string">&quot;undefined&quot;</span>!=typeof Symbol&amp;&amp;e[Symbol.iterator]||e[<span class="hljs-string">&quot;@@iterator&quot;</span>];<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>==n)<span class="hljs-keyword">return</span>;<span class="hljs-keyword">var</span> r,i,a=[],o=!<span class="hljs-number">0</span>,s=!<span class="hljs-number">1</span>;<span class="hljs-keyword">try</span>{<span class="hljs-keyword">for</span>(n=n.call(e);!(o=(r=n.next()).done)&amp;&amp;(a.push(r.value),!t||a.length!==t);o=!<span class="hljs-number">0</span>);}<span class="hljs-keyword">catch</span>(e){s=!<span class="hljs-number">0</span>,i=e}<span class="hljs-keyword">finally</span>{<span class="hljs-keyword">try</span>{o||<span class="hljs-literal">null</span>==n.<span class="hljs-keyword">return</span>||n.<span class="hljs-keyword">return</span>()}<span class="hljs-keyword">finally</span>{<span class="hljs-keyword">if</span>(s)<span class="hljs-keyword">throw</span> i}}<span class="hljs-keyword">return</span> a}(e,t)||function(e,t){<span class="hljs-keyword">if</span>(!e)<span class="hljs-keyword">return</span>;<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;string&quot;</span>==typeof e)<span class="hljs-keyword">return</span> v(e,t);<span class="hljs-keyword">var</span> n=Object.prototype.toString.call(e).slice(<span class="hljs-number">8</span>,-<span class="hljs-number">1</span>);<span class="hljs-string">&quot;Object&quot;</span>===n&amp;&amp;e.<span class="hljs-keyword">constructor</span>&amp;&amp;(n=e.<span class="hljs-keyword">constructor</span>.name);<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;Map&quot;</span>===n||<span class="hljs-string">&quot;Set&quot;</span>===n)<span class="hljs-keyword">return</span> Array.from(e);<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;Arguments&quot;</span>===n||/^(?:Ui|I)nt(?:<span class="hljs-number">8</span>|<span class="hljs-number">16</span>|<span class="hljs-number">32</span>)(?:Clamped)?Array$/.test(n))<span class="hljs-keyword">return</span> v(e,t)}(e,t)||function(){<span class="hljs-keyword">throw</span> new TypeError(<span class="hljs-string">&quot;Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;</span>)}()}function v(e,t){(<span class="hljs-literal">null</span>==t||t&gt;e.length)&amp;&amp;(t=e.length);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-number">0</span>,r=new Array(t);n&lt;t;n++)r[n]=e[n];<span class="hljs-keyword">return</span> r}function x(e,t){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-number">0</span>;n&lt;t.length;n++){<span class="hljs-keyword">var</span> r=t[n];r.enumerable=r.enumerable||!<span class="hljs-number">1</span>,r.configurable=!<span class="hljs-number">0</span>,<span class="hljs-string">&quot;value&quot;</span><span class="hljs-keyword">in</span> r&amp;&amp;(r.writable=!<span class="hljs-number">0</span>),Object.defineProperty(e,r.key,r)}}<span class="hljs-keyword">var</span> b=h(<span class="hljs-string">&quot;quickhull&quot;</span>),k=function(){function e(t){<span class="hljs-keyword">if</span>(function(e,t){<span class="hljs-keyword">if</span>(!(e instanceof t))<span class="hljs-keyword">throw</span> new TypeError(<span class="hljs-string">&quot;Cannot call a class as a function&quot;</span>)}(<span class="hljs-keyword">this</span>,e),!Array.isArray(t))<span class="hljs-keyword">throw</span> TypeError(<span class="hljs-string">&quot;input is not a valid array&quot;</span>);<span class="hljs-keyword">if</span>(t.length&lt;<span class="hljs-number">4</span>)<span class="hljs-keyword">throw</span> Error(<span class="hljs-string">&quot;cannot build a simplex out of &lt;4 points&quot;</span>);<span class="hljs-keyword">this</span>.tolerance=-<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>.nFaces=<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.nPoints=t.length,<span class="hljs-keyword">this</span>.faces=[],<span class="hljs-keyword">this</span>.newFaces=[],<span class="hljs-keyword">this</span>.claimed=new l.default,<span class="hljs-keyword">this</span>.unclaimed=new l.default,<span class="hljs-keyword">this</span>.vertices=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-number">0</span>;n&lt;t.length;n+=<span class="hljs-number">1</span>)<span class="hljs-keyword">this</span>.vertices.push(new c.default(t[n],n));<span class="hljs-keyword">this</span>.discardedFaces=[],<span class="hljs-keyword">this</span>.vertexPointIndices=[]}<span class="hljs-keyword">var</span> t,n,r;<span class="hljs-keyword">return</span> t=e,n=[{key:<span class="hljs-string">&quot;addVertexToFace&quot;</span>,value:function(e,t){e.face=t,t.outside?<span class="hljs-keyword">this</span>.claimed.insertBefore(t.outside,e):<span class="hljs-keyword">this</span>.claimed.add(e),t.outside=e}},{key:<span class="hljs-string">&quot;removeVertexFromFace&quot;</span>,value:function(e,t){e===t.outside&amp;&amp;(e.next&amp;&amp;e.next.face===t?t.outside=e.next:t.outside=<span class="hljs-literal">null</span>),<span class="hljs-keyword">this</span>.claimed.remove(e)}},{key:<span class="hljs-string">&quot;removeAllVerticesFromFace&quot;</span>,value:function(e){<span class="hljs-keyword">if</span>(e.outside){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t=e.outside;t.next&amp;&amp;t.next.face===e;)t=t.next;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.claimed.removeChain(e.outside,t),t.next=<span class="hljs-literal">null</span>,e.outside}}},{key:<span class="hljs-string">&quot;deleteFaceVertices&quot;</span>,value:function(e,t){<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>.removeAllVerticesFromFace(e);<span class="hljs-keyword">if</span>(n)<span class="hljs-keyword">if</span>(t)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r,i=n;i;i=r)r=i.next,t.distanceToPlane(i.point)&gt;<span class="hljs-keyword">this</span>.tolerance?<span class="hljs-keyword">this</span>.addVertexToFace(i,t):<span class="hljs-keyword">this</span>.unclaimed.add(i);<span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.unclaimed.addAll(n)}},{key:<span class="hljs-string">&quot;resolveUnclaimedPoints&quot;</span>,value:function(e){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t=<span class="hljs-keyword">this</span>.unclaimed.first(),n=t;n;n=t){t=n.next;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=<span class="hljs-keyword">this</span>.tolerance,i=void <span class="hljs-number">0</span>,a=<span class="hljs-number">0</span>;a&lt;e.length;a+=<span class="hljs-number">1</span>){<span class="hljs-keyword">var</span> o=e[a];<span class="hljs-keyword">if</span>(o.mark===u.VISIBLE){<span class="hljs-keyword">var</span> s=o.distanceToPlane(n.point);<span class="hljs-keyword">if</span>(s&gt;r&amp;&amp;(r=s,i=o),r&gt;<span class="hljs-number">1e3</span>*<span class="hljs-keyword">this</span>.tolerance)<span class="hljs-keyword">break</span>}}i&amp;&amp;<span class="hljs-keyword">this</span>.addVertexToFace(n,i)}}},{key:<span class="hljs-string">&quot;computeExtremes&quot;</span>,value:function(){<span class="hljs-keyword">var</span> e,t,n=[],r=[],i=[],a=[];<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;e&lt;<span class="hljs-number">3</span>;e+=<span class="hljs-number">1</span>)i[e]=a[e]=<span class="hljs-keyword">this</span>.vertices[<span class="hljs-number">0</span>];<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;e&lt;<span class="hljs-number">3</span>;e+=<span class="hljs-number">1</span>)n[e]=r[e]=<span class="hljs-keyword">this</span>.vertices[<span class="hljs-number">0</span>].point[e];<span class="hljs-keyword">for</span>(e=<span class="hljs-number">1</span>;e&lt;<span class="hljs-keyword">this</span>.vertices.length;e+=<span class="hljs-number">1</span>){<span class="hljs-keyword">var</span> o=<span class="hljs-keyword">this</span>.vertices[e],s=o.point;<span class="hljs-keyword">for</span>(t=<span class="hljs-number">0</span>;t&lt;<span class="hljs-number">3</span>;t+=<span class="hljs-number">1</span>)s[t]&lt;n[t]&amp;&amp;(n[t]=s[t],i[t]=o);<span class="hljs-keyword">for</span>(t=<span class="hljs-number">0</span>;t&lt;<span class="hljs-number">3</span>;t+=<span class="hljs-number">1</span>)s[t]&gt;r[t]&amp;&amp;(r[t]=s[t],a[t]=o)}<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tolerance=<span class="hljs-number">3</span>*Number.EPSILON*(Math.max(Math.abs(n[<span class="hljs-number">0</span>]),Math.abs(r[<span class="hljs-number">0</span>]))+Math.max(Math.abs(n[<span class="hljs-number">1</span>]),Math.abs(r[<span class="hljs-number">1</span>]))+Math.max(Math.abs(n[<span class="hljs-number">2</span>]),Math.abs(r[<span class="hljs-number">2</span>]))),b.enabled&amp;&amp;b(<span class="hljs-string">&quot;tolerance %d&quot;</span>,<span class="hljs-keyword">this</span>.tolerance),[i,a]}},{key:<span class="hljs-string">&quot;createInitialSimplex&quot;</span>,value:function(){<span class="hljs-keyword">var</span> e,t,n=<span class="hljs-keyword">this</span>.vertices,r=p(<span class="hljs-keyword">this</span>.computeExtremes(),<span class="hljs-number">2</span>),i=r[<span class="hljs-number">0</span>],l=r[<span class="hljs-number">1</span>],c=<span class="hljs-number">0</span>,f=<span class="hljs-number">0</span>;<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;e&lt;<span class="hljs-number">3</span>;e+=<span class="hljs-number">1</span>){<span class="hljs-keyword">var</span> d=l[e].point[e]-i[e].point[e];d&gt;c&amp;&amp;(c=d,f=e)}<span class="hljs-keyword">var</span> h,v,m=i[f],g=l[f];<span class="hljs-keyword">for</span>(c=<span class="hljs-number">0</span>,e=<span class="hljs-number">0</span>;e&lt;<span class="hljs-keyword">this</span>.vertices.length;e+=<span class="hljs-number">1</span>){<span class="hljs-keyword">var</span> y=<span class="hljs-keyword">this</span>.vertices[e];<span class="hljs-keyword">if</span>(y!==m&amp;&amp;y!==g){<span class="hljs-keyword">var</span> x=(<span class="hljs-number">0</span>,a.default)(y.point,m.point,g.point);x&gt;c&amp;&amp;(c=x,h=y)}}<span class="hljs-keyword">var</span> b=(<span class="hljs-number">0</span>,o.default)([],m.point,g.point,h.point),k=(<span class="hljs-number">0</span>,s.default)(m.point,b);<span class="hljs-keyword">for</span>(c=-<span class="hljs-number">1</span>,e=<span class="hljs-number">0</span>;e&lt;<span class="hljs-keyword">this</span>.vertices.length;e+=<span class="hljs-number">1</span>){<span class="hljs-keyword">var</span> w=<span class="hljs-keyword">this</span>.vertices[e];<span class="hljs-keyword">if</span>(w!==m&amp;&amp;w!==g&amp;&amp;w!==h){<span class="hljs-keyword">var</span> E=Math.abs((<span class="hljs-number">0</span>,s.default)(b,w.point)-k);E&gt;c&amp;&amp;(c=E,v=w)}}<span class="hljs-keyword">var</span> O=[];<span class="hljs-keyword">if</span>((<span class="hljs-number">0</span>,s.default)(v.point,b)-k&lt;<span class="hljs-number">0</span>)<span class="hljs-keyword">for</span>(O.push(u.default.createTriangle(m,g,h),u.default.createTriangle(v,g,m),u.default.createTriangle(v,h,g),u.default.createTriangle(v,m,h)),e=<span class="hljs-number">0</span>;e&lt;<span class="hljs-number">3</span>;e+=<span class="hljs-number">1</span>){<span class="hljs-keyword">var</span> F=(e+<span class="hljs-number">1</span>)%<span class="hljs-number">3</span>;O[e+<span class="hljs-number">1</span>].getEdge(<span class="hljs-number">2</span>).setOpposite(O[<span class="hljs-number">0</span>].getEdge(F)),O[e+<span class="hljs-number">1</span>].getEdge(<span class="hljs-number">1</span>).setOpposite(O[F+<span class="hljs-number">1</span>].getEdge(<span class="hljs-number">0</span>))}<span class="hljs-keyword">else</span> <span class="hljs-keyword">for</span>(O.push(u.default.createTriangle(m,h,g),u.default.createTriangle(v,m,g),u.default.createTriangle(v,g,h),u.default.createTriangle(v,h,m)),e=<span class="hljs-number">0</span>;e&lt;<span class="hljs-number">3</span>;e+=<span class="hljs-number">1</span>){<span class="hljs-keyword">var</span> j=(e+<span class="hljs-number">1</span>)%<span class="hljs-number">3</span>;O[e+<span class="hljs-number">1</span>].getEdge(<span class="hljs-number">2</span>).setOpposite(O[<span class="hljs-number">0</span>].getEdge((<span class="hljs-number">3</span>-e)%<span class="hljs-number">3</span>)),O[e+<span class="hljs-number">1</span>].getEdge(<span class="hljs-number">0</span>).setOpposite(O[j+<span class="hljs-number">1</span>].getEdge(<span class="hljs-number">1</span>))}<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;e&lt;<span class="hljs-number">4</span>;e+=<span class="hljs-number">1</span>)<span class="hljs-keyword">this</span>.faces.push(O[e]);<span class="hljs-keyword">for</span>(e=<span class="hljs-number">0</span>;e&lt;n.length;e+=<span class="hljs-number">1</span>){<span class="hljs-keyword">var</span> T=n[e];<span class="hljs-keyword">if</span>(T!==m&amp;&amp;T!==g&amp;&amp;T!==h&amp;&amp;T!==v){c=<span class="hljs-keyword">this</span>.tolerance;<span class="hljs-keyword">var</span> P=void <span class="hljs-number">0</span>;<span class="hljs-keyword">for</span>(t=<span class="hljs-number">0</span>;t&lt;<span class="hljs-number">4</span>;t+=<span class="hljs-number">1</span>){<span class="hljs-keyword">var</span> V=O[t].distanceToPlane(T.point);V&gt;c&amp;&amp;(c=V,P=O[t])}P&amp;&amp;<span class="hljs-keyword">this</span>.addVertexToFace(T,P)}}}},{key:<span class="hljs-string">&quot;reindexFaceAndVertices&quot;</span>,value:function(){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=[],t=<span class="hljs-number">0</span>;t&lt;<span class="hljs-keyword">this</span>.faces.length;t+=<span class="hljs-number">1</span>){<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>.faces[t];n.mark===u.VISIBLE&amp;&amp;e.push(n)}<span class="hljs-keyword">this</span>.faces=e}},{key:<span class="hljs-string">&quot;collectFaces&quot;</span>,value:function(e){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t=[],n=<span class="hljs-number">0</span>;n&lt;<span class="hljs-keyword">this</span>.faces.length;n+=<span class="hljs-number">1</span>){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.faces[n].mark!==u.VISIBLE)<span class="hljs-keyword">throw</span> Error(<span class="hljs-string">&quot;attempt to include a destroyed face in the hull&quot;</span>);<span class="hljs-keyword">var</span> r=<span class="hljs-keyword">this</span>.faces[n].collectIndices();<span class="hljs-keyword">if</span>(e)t.push(r);<span class="hljs-keyword">else</span> <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;r.length-<span class="hljs-number">2</span>;i+=<span class="hljs-number">1</span>)t.push([r[<span class="hljs-number">0</span>],r[i+<span class="hljs-number">1</span>],r[i+<span class="hljs-number">2</span>]])}<span class="hljs-keyword">return</span> t}},{key:<span class="hljs-string">&quot;nextVertexToAdd&quot;</span>,value:function(){<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.claimed.isEmpty()){<span class="hljs-keyword">var</span> e,t,n=<span class="hljs-number">0</span>,r=<span class="hljs-keyword">this</span>.claimed.first().face;<span class="hljs-keyword">for</span>(t=r.outside;t&amp;&amp;t.face===r;t=t.next){<span class="hljs-keyword">var</span> i=r.distanceToPlane(t.point);i&gt;n&amp;&amp;(n=i,e=t)}<span class="hljs-keyword">return</span> e}}},{key:<span class="hljs-string">&quot;computeHorizon&quot;</span>,value:function(e,t,n,r){<span class="hljs-keyword">var</span> i;<span class="hljs-keyword">this</span>.deleteFaceVertices(n),n.mark=u.DELETED,i=t?t.next:t=n.getEdge(<span class="hljs-number">0</span>);<span class="hljs-keyword">do</span>{<span class="hljs-keyword">var</span> a=i.opposite,o=a.face;o.mark===u.VISIBLE&amp;&amp;(o.distanceToPlane(e)&gt;<span class="hljs-keyword">this</span>.tolerance?<span class="hljs-keyword">this</span>.computeHorizon(e,a,o,r):r.push(i)),i=i.next}<span class="hljs-keyword">while</span>(i!==t)}},{key:<span class="hljs-string">&quot;addAdjoiningFace&quot;</span>,value:function(e,t){<span class="hljs-keyword">var</span> n=u.default.createTriangle(e,t.tail(),t.head());<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.faces.push(n),n.getEdge(-<span class="hljs-number">1</span>).setOpposite(t.opposite),n.getEdge(<span class="hljs-number">0</span>)}},{key:<span class="hljs-string">&quot;addNewFaces&quot;</span>,value:function(e,t){<span class="hljs-keyword">var</span> n,r;<span class="hljs-keyword">this</span>.newFaces=[];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;t.length;i+=<span class="hljs-number">1</span>){<span class="hljs-keyword">var</span> a=t[i],o=<span class="hljs-keyword">this</span>.addAdjoiningFace(e,a);n?o.next.setOpposite(r):n=o,<span class="hljs-keyword">this</span>.newFaces.push(o.face),r=o}n.next.setOpposite(r)}},{key:<span class="hljs-string">&quot;oppositeFaceDistance&quot;</span>,value:function(e){<span class="hljs-keyword">return</span> e.face.distanceToPlane(e.opposite.face.centroid)}},{key:<span class="hljs-string">&quot;doAdjacentMerge&quot;</span>,value:function(e,t){<span class="hljs-keyword">var</span> n=e.edge,r=!<span class="hljs-number">0</span>,i=<span class="hljs-number">0</span>;<span class="hljs-keyword">do</span>{<span class="hljs-keyword">if</span>(i&gt;=e.nVertices)<span class="hljs-keyword">throw</span> Error(<span class="hljs-string">&quot;merge recursion limit exceeded&quot;</span>);<span class="hljs-keyword">var</span> a=n.opposite.face,o=!<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(<span class="hljs-number">2</span>===t?(<span class="hljs-keyword">this</span>.oppositeFaceDistance(n)&gt;-<span class="hljs-keyword">this</span>.tolerance||<span class="hljs-keyword">this</span>.oppositeFaceDistance(n.opposite)&gt;-<span class="hljs-keyword">this</span>.tolerance)&amp;&amp;(o=!<span class="hljs-number">0</span>):e.area&gt;a.area?<span class="hljs-keyword">this</span>.oppositeFaceDistance(n)&gt;-<span class="hljs-keyword">this</span>.tolerance?o=!<span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.oppositeFaceDistance(n.opposite)&gt;-<span class="hljs-keyword">this</span>.tolerance&amp;&amp;(r=!<span class="hljs-number">1</span>):<span class="hljs-keyword">this</span>.oppositeFaceDistance(n.opposite)&gt;-<span class="hljs-keyword">this</span>.tolerance?o=!<span class="hljs-number">0</span>:<span class="hljs-keyword">this</span>.oppositeFaceDistance(n)&gt;-<span class="hljs-keyword">this</span>.tolerance&amp;&amp;(r=!<span class="hljs-number">1</span>),o){b(<span class="hljs-string">&quot;face merge&quot;</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> s=e.mergeAdjacentFaces(n,[]),l=<span class="hljs-number">0</span>;l&lt;s.length;l+=<span class="hljs-number">1</span>)<span class="hljs-keyword">this</span>.deleteFaceVertices(s[l],e);<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}n=n.next,i+=<span class="hljs-number">1</span>}<span class="hljs-keyword">while</span>(n!==e.edge);<span class="hljs-keyword">return</span> r||(e.mark=u.NON_CONVEX),!<span class="hljs-number">1</span>}},{key:<span class="hljs-string">&quot;addVertexToHull&quot;</span>,value:function(e){<span class="hljs-keyword">var</span> t=[];<span class="hljs-keyword">this</span>.unclaimed.clear(),<span class="hljs-keyword">this</span>.removeVertexFromFace(e,e.face),<span class="hljs-keyword">this</span>.computeHorizon(e.point,<span class="hljs-literal">null</span>,e.face,t),b.enabled&amp;&amp;b(<span class="hljs-string">&quot;horizon %j&quot;</span>,t.map((function(e){<span class="hljs-keyword">return</span> e.head().index}))),<span class="hljs-keyword">this</span>.addNewFaces(e,t),b(<span class="hljs-string">&quot;first merge&quot;</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-number">0</span>;n&lt;<span class="hljs-keyword">this</span>.newFaces.length;n+=<span class="hljs-number">1</span>){<span class="hljs-keyword">var</span> r=<span class="hljs-keyword">this</span>.newFaces[n];<span class="hljs-keyword">if</span>(r.mark===u.VISIBLE)<span class="hljs-keyword">for</span>(;<span class="hljs-keyword">this</span>.doAdjacentMerge(r,<span class="hljs-number">1</span>););}b(<span class="hljs-string">&quot;second merge&quot;</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-keyword">this</span>.newFaces.length;i+=<span class="hljs-number">1</span>){<span class="hljs-keyword">var</span> a=<span class="hljs-keyword">this</span>.newFaces[i];<span class="hljs-keyword">if</span>(a.mark===u.NON_CONVEX)<span class="hljs-keyword">for</span>(a.mark=u.VISIBLE;<span class="hljs-keyword">this</span>.doAdjacentMerge(a,<span class="hljs-number">2</span>););}b(<span class="hljs-string">&quot;reassigning points to newFaces&quot;</span>),<span class="hljs-keyword">this</span>.resolveUnclaimedPoints(<span class="hljs-keyword">this</span>.newFaces)}},{key:<span class="hljs-string">&quot;build&quot;</span>,value:function(){<span class="hljs-keyword">var</span> e,t=<span class="hljs-number">0</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">this</span>.createInitialSimplex();e=<span class="hljs-keyword">this</span>.nextVertexToAdd();)b(<span class="hljs-string">&quot;== iteration %j ==&quot;</span>,t+=<span class="hljs-number">1</span>),b(<span class="hljs-string">&quot;next vertex to add = %d %j&quot;</span>,e.index,e.point),<span class="hljs-keyword">this</span>.addVertexToHull(e),b(<span class="hljs-string">&quot;end&quot;</span>);<span class="hljs-keyword">this</span>.reindexFaceAndVertices()}}],n&amp;&amp;x(t.prototype,n),r&amp;&amp;x(t,r),Object.defineProperty(t,<span class="hljs-string">&quot;prototype&quot;</span>,{writable:!<span class="hljs-number">1</span>}),e}();r.default=k}(v),function(e){Object.defineProperty(e,<span class="hljs-string">&quot;__esModule&quot;</span>,{value:!<span class="hljs-number">0</span>}),e.default=function(e){<span class="hljs-keyword">var</span> t=arguments.length&gt;<span class="hljs-number">1</span>&amp;&amp;void <span class="hljs-number">0</span>!==arguments[<span class="hljs-number">1</span>]?arguments[<span class="hljs-number">1</span>]:{},r=new n.default(e);<span class="hljs-keyword">return</span> r.build(),r.collectFaces(t.skipTriangulation)},e.isPointInsideHull=function(e,t,n){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;n.length;i++){<span class="hljs-keyword">var</span> a=n[i],o=t[a[<span class="hljs-number">0</span>]],s=t[a[<span class="hljs-number">1</span>]],l=t[a[<span class="hljs-number">2</span>]],c=(<span class="hljs-number">0</span>,r.default)([],o,s,l),u=[e[<span class="hljs-number">0</span>]-o[<span class="hljs-number">0</span>],e[<span class="hljs-number">1</span>]-o[<span class="hljs-number">1</span>],e[<span class="hljs-number">2</span>]-o[<span class="hljs-number">2</span>]];<span class="hljs-keyword">if</span>(c[<span class="hljs-number">0</span>]*u[<span class="hljs-number">0</span>]+c[<span class="hljs-number">1</span>]*u[<span class="hljs-number">1</span>]+c[<span class="hljs-number">2</span>]*u[<span class="hljs-number">2</span>]&gt;<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>};<span class="hljs-keyword">var</span> n=i(v),r=i(t);function i(e){<span class="hljs-keyword">return</span> e&amp;&amp;e.__esModule?e:{default:e}}}(p);<span class="hljs-keyword">var</span> b=p.__esModule,k=p.isPointInsideHull;export{b <span class="hljs-keyword">as</span> __esModule,p <span class="hljs-keyword">as</span> default,k <span class="hljs-keyword">as</span> isPointInsideHull};
<span class="hljs-comment">//# sourceMappingURL=/sm/4e0fed04c6037e34ae1e9886a322e7807bc08a5d1f7670332c68ae94d2fe0170.map</span></code></pre>
    </div>
  </div>
</main>

    <div class="footer">
      <div class="center">
        Powered by <a target="_blank" href="https://benignware.com">Benignware</a>
      </div>
    </div>
  </body>
</html>