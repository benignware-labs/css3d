<html>
  <head>
    <base href="../.."/>
    <title>css3d - index.mjs</title>

    <link rel="stylesheet" href="public/github-markdown.min-05fea8df8ec68cb6c27337f6db65733e.css">
    <link rel="stylesheet" href="public/highlight-c281e701b2830b095c67417cd9a7b210.css">
    <link rel="stylesheet" href="public/style-aea3468ccb7ee0c3c4c2b5d339fc989e.css">
    <link rel="stylesheet" href="public/all-cc69a8b8824029ae06797ee01a3cc5c8.css">

    <script src="public/plugins/core/example/ExampleViewer.js"></script>
              
              <script src="public/index.mjs" type="module"></script>
            
  </head>
  <body class="markdown-body flex-column">
    <div class="header flex">
      <a class="header-brand" href="./index.html">css3d</a>
      
<ul class="menu flex align-center justify-center">
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="elements/Sphere.html"
        
        
          role="button"
          
          aria-expanded="false"
        
      >
        Elements
      </a>
      
    </li>
    
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="examples/textures.html"
        
        
          role="button"
          
          aria-expanded="false"
        
      >
        Examples
      </a>
      
    </li>
    
  
</ul>
      <nav class="links">
        
          
            
          
        
      </nav>
    </div>
      
      

<main class="flex-grow flex h-100">
  <div class="sidebar sidebar-left border-right mr-2 flex-noshrink">
  
<ul class="menu">
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="elements/Sphere.html"
        
        
          role="button"
          
          aria-expanded="false"
        
      >
        Elements
      </a>
      
        
<ul class="menu">
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="elements/Sphere.html"
        
        
      >
        Sphere
      </a>
      
    </li>
    
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="elements/Polyhedron.html"
        
        
      >
        Polyhedron
      </a>
      
    </li>
    
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="elements/Cylinder.html"
        
        
      >
        Cylinder
      </a>
      
    </li>
    
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="elements/Box.html"
        
        
      >
        Box
      </a>
      
    </li>
    
  
</ul>
      
    </li>
    
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="examples/textures.html"
        
        
          role="button"
          
          aria-expanded="false"
        
      >
        Examples
      </a>
      
        
<ul class="menu">
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="examples/textures.html"
        
        
      >
        Textures
      </a>
      
    </li>
    
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="examples/planets.html"
        
        
      >
        Planets
      </a>
      
    </li>
    
  
    
    <li class="menu-item">
      <a 
        class="menu-link"
        
          href="examples/crane.html"
        
        
      >
        Crane
      </a>
      
    </li>
    
  
</ul>
      
    </li>
    
  
</ul>
</div>
  <div class="flex-grow">
    <div class="container py-4">
      <h1>Source: index.mjs</h1>
      <p>
        docs-build/-/index.mjs
      </p>
      
      <pre><code class="hljs"><span class="hljs-keyword">var</span> __create = <span class="hljs-title class_">Object</span>.<span class="hljs-property">create</span>;
<span class="hljs-keyword">var</span> __defProp = <span class="hljs-title class_">Object</span>.<span class="hljs-property">defineProperty</span>;
<span class="hljs-keyword">var</span> __getOwnPropDesc = <span class="hljs-title class_">Object</span>.<span class="hljs-property">getOwnPropertyDescriptor</span>;
<span class="hljs-keyword">var</span> __getOwnPropNames = <span class="hljs-title class_">Object</span>.<span class="hljs-property">getOwnPropertyNames</span>;
<span class="hljs-keyword">var</span> __getProtoOf = <span class="hljs-title class_">Object</span>.<span class="hljs-property">getPrototypeOf</span>;
<span class="hljs-keyword">var</span> __hasOwnProp = <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>;
<span class="hljs-keyword">var</span> <span class="hljs-title function_">__commonJS</span> = (<span class="hljs-params">cb, mod</span>) =&gt; <span class="hljs-keyword">function</span> <span class="hljs-title function_">__require</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> mod || (<span class="hljs-number">0</span>, cb[<span class="hljs-title function_">__getOwnPropNames</span>(cb)[<span class="hljs-number">0</span>]])((mod = { <span class="hljs-attr">exports</span>: {} }).<span class="hljs-property">exports</span>, mod), mod.<span class="hljs-property">exports</span>;
};
<span class="hljs-keyword">var</span> <span class="hljs-title function_">__copyProps</span> = (<span class="hljs-params">to, <span class="hljs-keyword">from</span>, except, desc</span>) =&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">from</span> &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">from</span> === <span class="hljs-string">&quot;object&quot;</span> || <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">from</span> === <span class="hljs-string">&quot;function&quot;</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">of</span> <span class="hljs-title function_">__getOwnPropNames</span>(<span class="hljs-keyword">from</span>))
      <span class="hljs-keyword">if</span> (!__hasOwnProp.<span class="hljs-title function_">call</span>(to, key) &amp;&amp; key !== except)
        <span class="hljs-title function_">__defProp</span>(to, key, { <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">from</span>[key], <span class="hljs-attr">enumerable</span>: !(desc = <span class="hljs-title function_">__getOwnPropDesc</span>(<span class="hljs-keyword">from</span>, key)) || desc.<span class="hljs-property">enumerable</span> });
  }
  <span class="hljs-keyword">return</span> to;
};
<span class="hljs-keyword">var</span> <span class="hljs-title function_">__toESM</span> = (<span class="hljs-params">mod, isNodeMode, target</span>) =&gt; (target = mod != <span class="hljs-literal">null</span> ? <span class="hljs-title function_">__create</span>(<span class="hljs-title function_">__getProtoOf</span>(mod)) : {}, <span class="hljs-title function_">__copyProps</span>(
  <span class="hljs-comment">// If the importer is in node compatibility mode or this is not an ESM</span>
  <span class="hljs-comment">// file that has been converted to a CommonJS file using a Babel-</span>
  <span class="hljs-comment">// compatible transform (i.e. &quot;__esModule&quot; has not been set), then set</span>
  <span class="hljs-comment">// &quot;default&quot; to the CommonJS &quot;module.exports&quot; for node compatibility.</span>
  isNodeMode || !mod || !mod.<span class="hljs-property">__esModule</span> ? <span class="hljs-title function_">__defProp</span>(target, <span class="hljs-string">&quot;default&quot;</span>, { <span class="hljs-attr">value</span>: mod, <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span> }) : target,
  mod
));

<span class="hljs-comment">// node_modules/gl-vec3/subtract.js</span>
<span class="hljs-keyword">var</span> require_subtract = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/gl-vec3/subtract.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = subtract;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">subtract</span>(<span class="hljs-params">out, a, b</span>) {
      out[<span class="hljs-number">0</span>] = a[<span class="hljs-number">0</span>] - b[<span class="hljs-number">0</span>];
      out[<span class="hljs-number">1</span>] = a[<span class="hljs-number">1</span>] - b[<span class="hljs-number">1</span>];
      out[<span class="hljs-number">2</span>] = a[<span class="hljs-number">2</span>] - b[<span class="hljs-number">2</span>];
      <span class="hljs-keyword">return</span> out;
    }
  }
});

<span class="hljs-comment">// node_modules/gl-vec3/cross.js</span>
<span class="hljs-keyword">var</span> require_cross = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/gl-vec3/cross.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = cross2;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">cross2</span>(<span class="hljs-params">out, a, b</span>) {
      <span class="hljs-keyword">var</span> ax = a[<span class="hljs-number">0</span>], ay = a[<span class="hljs-number">1</span>], az = a[<span class="hljs-number">2</span>], bx = b[<span class="hljs-number">0</span>], by = b[<span class="hljs-number">1</span>], bz = b[<span class="hljs-number">2</span>];
      out[<span class="hljs-number">0</span>] = ay * bz - az * by;
      out[<span class="hljs-number">1</span>] = az * bx - ax * bz;
      out[<span class="hljs-number">2</span>] = ax * by - ay * bx;
      <span class="hljs-keyword">return</span> out;
    }
  }
});

<span class="hljs-comment">// node_modules/gl-vec3/squaredLength.js</span>
<span class="hljs-keyword">var</span> require_squaredLength = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/gl-vec3/squaredLength.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = squaredLength;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">squaredLength</span>(<span class="hljs-params">a</span>) {
      <span class="hljs-keyword">var</span> x = a[<span class="hljs-number">0</span>], y = a[<span class="hljs-number">1</span>], z = a[<span class="hljs-number">2</span>];
      <span class="hljs-keyword">return</span> x * x + y * y + z * z;
    }
  }
});

<span class="hljs-comment">// node_modules/point-line-distance/squared.js</span>
<span class="hljs-keyword">var</span> require_squared = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/point-line-distance/squared.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-keyword">var</span> subtract = require_subtract();
    <span class="hljs-keyword">var</span> cross2 = require_cross();
    <span class="hljs-keyword">var</span> squaredLength = require_squaredLength();
    <span class="hljs-keyword">var</span> ab = [];
    <span class="hljs-keyword">var</span> ap = [];
    <span class="hljs-keyword">var</span> cr = [];
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">p, a, b</span>) {
      <span class="hljs-title function_">subtract</span>(ab, b, a);
      <span class="hljs-title function_">subtract</span>(ap, p, a);
      <span class="hljs-keyword">var</span> area = <span class="hljs-title function_">squaredLength</span>(<span class="hljs-title function_">cross2</span>(cr, ap, ab));
      <span class="hljs-keyword">var</span> s = <span class="hljs-title function_">squaredLength</span>(ab);
      <span class="hljs-keyword">if</span> (s === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;a and b are the same point&quot;</span>);
      }
      <span class="hljs-keyword">return</span> area / s;
    };
  }
});

<span class="hljs-comment">// node_modules/point-line-distance/index.js</span>
<span class="hljs-keyword">var</span> require_point_line_distance = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/point-line-distance/index.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-string">&quot;use strict&quot;</span>;
    <span class="hljs-keyword">var</span> distanceSquared = require_squared();
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">point, a, b</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-title function_">distanceSquared</span>(point, a, b));
    };
  }
});

<span class="hljs-comment">// node_modules/gl-vec3/normalize.js</span>
<span class="hljs-keyword">var</span> require_normalize = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/gl-vec3/normalize.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = normalize;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">normalize</span>(<span class="hljs-params">out, a</span>) {
      <span class="hljs-keyword">var</span> x = a[<span class="hljs-number">0</span>], y = a[<span class="hljs-number">1</span>], z = a[<span class="hljs-number">2</span>];
      <span class="hljs-keyword">var</span> len = x * x + y * y + z * z;
      <span class="hljs-keyword">if</span> (len &gt; <span class="hljs-number">0</span>) {
        len = <span class="hljs-number">1</span> / <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(len);
        out[<span class="hljs-number">0</span>] = a[<span class="hljs-number">0</span>] * len;
        out[<span class="hljs-number">1</span>] = a[<span class="hljs-number">1</span>] * len;
        out[<span class="hljs-number">2</span>] = a[<span class="hljs-number">2</span>] * len;
      }
      <span class="hljs-keyword">return</span> out;
    }
  }
});

<span class="hljs-comment">// node_modules/get-plane-normal/index.js</span>
<span class="hljs-keyword">var</span> require_get_plane_normal = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/get-plane-normal/index.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-keyword">var</span> normalize = require_normalize();
    <span class="hljs-keyword">var</span> sub = require_subtract();
    <span class="hljs-keyword">var</span> cross2 = require_cross();
    <span class="hljs-keyword">var</span> tmp = [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>];
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = planeNormal;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">planeNormal</span>(<span class="hljs-params">out, point1, point2, point3</span>) {
      <span class="hljs-title function_">sub</span>(out, point1, point2);
      <span class="hljs-title function_">sub</span>(tmp, point2, point3);
      <span class="hljs-title function_">cross2</span>(out, out, tmp);
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">normalize</span>(out, out);
    }
  }
});

<span class="hljs-comment">// node_modules/gl-vec3/dot.js</span>
<span class="hljs-keyword">var</span> require_dot = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/gl-vec3/dot.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = dot;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">dot</span>(<span class="hljs-params">a, b</span>) {
      <span class="hljs-keyword">return</span> a[<span class="hljs-number">0</span>] * b[<span class="hljs-number">0</span>] + a[<span class="hljs-number">1</span>] * b[<span class="hljs-number">1</span>] + a[<span class="hljs-number">2</span>] * b[<span class="hljs-number">2</span>];
    }
  }
});

<span class="hljs-comment">// node_modules/quickhull3d/dist/VertexList.js</span>
<span class="hljs-keyword">var</span> require_VertexList = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/quickhull3d/dist/VertexList.js&quot;</span>(<span class="hljs-built_in">exports</span>) {
    <span class="hljs-string">&quot;use strict&quot;</span>;
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-string">&quot;__esModule&quot;</span>, {
      <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>
    });
    <span class="hljs-built_in">exports</span>[<span class="hljs-string">&quot;default&quot;</span>] = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_classCallCheck</span>(<span class="hljs-params">instance, Constructor</span>) {
      <span class="hljs-keyword">if</span> (!(instance <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Constructor</span>)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">&quot;Cannot call a class as a function&quot;</span>);
      }
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-params">target, props</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; props.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-keyword">var</span> descriptor = props[i];
        descriptor.<span class="hljs-property">enumerable</span> = descriptor.<span class="hljs-property">enumerable</span> || <span class="hljs-literal">false</span>;
        descriptor.<span class="hljs-property">configurable</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;value&quot;</span> <span class="hljs-keyword">in</span> descriptor) descriptor.<span class="hljs-property">writable</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(target, descriptor.<span class="hljs-property">key</span>, descriptor);
      }
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_createClass</span>(<span class="hljs-params">Constructor, protoProps, staticProps</span>) {
      <span class="hljs-keyword">if</span> (protoProps) <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-title class_">Constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, protoProps);
      <span class="hljs-keyword">if</span> (staticProps) <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-title class_">Constructor</span>, staticProps);
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-title class_">Constructor</span>, <span class="hljs-string">&quot;prototype&quot;</span>, { <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span> });
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Constructor</span>;
    }
    <span class="hljs-keyword">var</span> <span class="hljs-title class_">VertexList</span> = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">VertexList2</span>(<span class="hljs-params"></span>) {
        <span class="hljs-title function_">_classCallCheck</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-title class_">VertexList2</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = <span class="hljs-literal">null</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = <span class="hljs-literal">null</span>;
      }
      <span class="hljs-title function_">_createClass</span>(<span class="hljs-title class_">VertexList2</span>, [{
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;clear&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">clear</span>(<span class="hljs-params"></span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-comment">/**
         * Inserts a `node` before `target`, it&#x27;s assumed that
         * `target` belongs to this doubly linked list
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">target</span>
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">node</span>
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;insertBefore&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">insertBefore</span>(<span class="hljs-params">target, node</span>) {
          node.<span class="hljs-property">prev</span> = target.<span class="hljs-property">prev</span>;
          node.<span class="hljs-property">next</span> = target;
          <span class="hljs-keyword">if</span> (!node.<span class="hljs-property">prev</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = node;
          } <span class="hljs-keyword">else</span> {
            node.<span class="hljs-property">prev</span>.<span class="hljs-property">next</span> = node;
          }
          target.<span class="hljs-property">prev</span> = node;
        }
        <span class="hljs-comment">/**
         * Inserts a `node` after `target`, it&#x27;s assumed that
         * `target` belongs to this doubly linked list
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Vertex</span>} <span class="hljs-variable">target</span>
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Vertex</span>} <span class="hljs-variable">node</span>
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;insertAfter&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">insertAfter</span>(<span class="hljs-params">target, node</span>) {
          node.<span class="hljs-property">prev</span> = target;
          node.<span class="hljs-property">next</span> = target.<span class="hljs-property">next</span>;
          <span class="hljs-keyword">if</span> (!node.<span class="hljs-property">next</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = node;
          } <span class="hljs-keyword">else</span> {
            node.<span class="hljs-property">next</span>.<span class="hljs-property">prev</span> = node;
          }
          target.<span class="hljs-property">next</span> = node;
        }
        <span class="hljs-comment">/**
         * Appends a `node` to the end of this doubly linked list
         * Note: `node.next` will be unlinked from `node`
         * Note: if `node` is part of another linked list call `addAll` instead
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">node</span>
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;add&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">node</span>) {
          <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = node;
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>.<span class="hljs-property">next</span> = node;
          }
          node.<span class="hljs-property">prev</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>;
          node.<span class="hljs-property">next</span> = <span class="hljs-literal">null</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = node;
        }
        <span class="hljs-comment">/**
         * Appends a chain of nodes where `node` is the head,
         * the difference with `add` is that it correctly sets the position
         * of the node list `tail` property
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">node</span>
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;addAll&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">addAll</span>(<span class="hljs-params">node</span>) {
          <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = node;
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>.<span class="hljs-property">next</span> = node;
          }
          node.<span class="hljs-property">prev</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>;
          <span class="hljs-keyword">while</span> (node.<span class="hljs-property">next</span>) {
            node = node.<span class="hljs-property">next</span>;
          }
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = node;
        }
        <span class="hljs-comment">/**
         * Deletes a `node` from this linked list, it&#x27;s assumed that `node` is a
         * member of this linked list
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">node</span>
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;remove&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">remove</span>(<span class="hljs-params">node</span>) {
          <span class="hljs-keyword">if</span> (!node.<span class="hljs-property">prev</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = node.<span class="hljs-property">next</span>;
          } <span class="hljs-keyword">else</span> {
            node.<span class="hljs-property">prev</span>.<span class="hljs-property">next</span> = node.<span class="hljs-property">next</span>;
          }
          <span class="hljs-keyword">if</span> (!node.<span class="hljs-property">next</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = node.<span class="hljs-property">prev</span>;
          } <span class="hljs-keyword">else</span> {
            node.<span class="hljs-property">next</span>.<span class="hljs-property">prev</span> = node.<span class="hljs-property">prev</span>;
          }
        }
        <span class="hljs-comment">/**
         * Removes a chain of nodes whose head is `a` and whose tail is `b`,
         * it&#x27;s assumed that `a` and `b` belong to this list and also that `a`
         * comes before `b` in the linked list
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">a</span>
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">b</span>
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;removeChain&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">removeChain</span>(<span class="hljs-params">a, b</span>) {
          <span class="hljs-keyword">if</span> (!a.<span class="hljs-property">prev</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = b.<span class="hljs-property">next</span>;
          } <span class="hljs-keyword">else</span> {
            a.<span class="hljs-property">prev</span>.<span class="hljs-property">next</span> = b.<span class="hljs-property">next</span>;
          }
          <span class="hljs-keyword">if</span> (!b.<span class="hljs-property">next</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = a.<span class="hljs-property">prev</span>;
          } <span class="hljs-keyword">else</span> {
            b.<span class="hljs-property">next</span>.<span class="hljs-property">prev</span> = a.<span class="hljs-property">prev</span>;
          }
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;first&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">first</span>(<span class="hljs-params"></span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>;
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;isEmpty&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">isEmpty</span>(<span class="hljs-params"></span>) {
          <span class="hljs-keyword">return</span> !<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>;
        }
      }]);
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">VertexList2</span>;
    }();
    <span class="hljs-built_in">exports</span>[<span class="hljs-string">&quot;default&quot;</span>] = <span class="hljs-title class_">VertexList</span>;
  }
});

<span class="hljs-comment">// node_modules/quickhull3d/dist/Vertex.js</span>
<span class="hljs-keyword">var</span> require_Vertex = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/quickhull3d/dist/Vertex.js&quot;</span>(<span class="hljs-built_in">exports</span>) {
    <span class="hljs-string">&quot;use strict&quot;</span>;
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-string">&quot;__esModule&quot;</span>, {
      <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>
    });
    <span class="hljs-built_in">exports</span>[<span class="hljs-string">&quot;default&quot;</span>] = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-params">target, props</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; props.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-keyword">var</span> descriptor = props[i];
        descriptor.<span class="hljs-property">enumerable</span> = descriptor.<span class="hljs-property">enumerable</span> || <span class="hljs-literal">false</span>;
        descriptor.<span class="hljs-property">configurable</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;value&quot;</span> <span class="hljs-keyword">in</span> descriptor) descriptor.<span class="hljs-property">writable</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(target, descriptor.<span class="hljs-property">key</span>, descriptor);
      }
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_createClass</span>(<span class="hljs-params">Constructor, protoProps, staticProps</span>) {
      <span class="hljs-keyword">if</span> (protoProps) <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-title class_">Constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, protoProps);
      <span class="hljs-keyword">if</span> (staticProps) <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-title class_">Constructor</span>, staticProps);
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-title class_">Constructor</span>, <span class="hljs-string">&quot;prototype&quot;</span>, { <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span> });
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Constructor</span>;
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_classCallCheck</span>(<span class="hljs-params">instance, Constructor</span>) {
      <span class="hljs-keyword">if</span> (!(instance <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Constructor</span>)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">&quot;Cannot call a class as a function&quot;</span>);
      }
    }
    <span class="hljs-keyword">var</span> <span class="hljs-title class_">Vertex</span> = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-title function_">_createClass</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">Vertex2</span>(<span class="hljs-params">point, index</span>) {
      <span class="hljs-title function_">_classCallCheck</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-title class_">Vertex2</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">point</span> = point;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> = index;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">next</span> = <span class="hljs-literal">null</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">prev</span> = <span class="hljs-literal">null</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">face</span> = <span class="hljs-literal">null</span>;
    });
    <span class="hljs-built_in">exports</span>[<span class="hljs-string">&quot;default&quot;</span>] = <span class="hljs-title class_">Vertex</span>;
  }
});

<span class="hljs-comment">// node_modules/gl-vec3/add.js</span>
<span class="hljs-keyword">var</span> require_add = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/gl-vec3/add.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = add;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">out, a, b</span>) {
      out[<span class="hljs-number">0</span>] = a[<span class="hljs-number">0</span>] + b[<span class="hljs-number">0</span>];
      out[<span class="hljs-number">1</span>] = a[<span class="hljs-number">1</span>] + b[<span class="hljs-number">1</span>];
      out[<span class="hljs-number">2</span>] = a[<span class="hljs-number">2</span>] + b[<span class="hljs-number">2</span>];
      <span class="hljs-keyword">return</span> out;
    }
  }
});

<span class="hljs-comment">// node_modules/gl-vec3/copy.js</span>
<span class="hljs-keyword">var</span> require_copy = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/gl-vec3/copy.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = copy;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">copy</span>(<span class="hljs-params">out, a</span>) {
      out[<span class="hljs-number">0</span>] = a[<span class="hljs-number">0</span>];
      out[<span class="hljs-number">1</span>] = a[<span class="hljs-number">1</span>];
      out[<span class="hljs-number">2</span>] = a[<span class="hljs-number">2</span>];
      <span class="hljs-keyword">return</span> out;
    }
  }
});

<span class="hljs-comment">// node_modules/gl-vec3/length.js</span>
<span class="hljs-keyword">var</span> require_length = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/gl-vec3/length.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = length;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">length</span>(<span class="hljs-params">a</span>) {
      <span class="hljs-keyword">var</span> x = a[<span class="hljs-number">0</span>], y = a[<span class="hljs-number">1</span>], z = a[<span class="hljs-number">2</span>];
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(x * x + y * y + z * z);
    }
  }
});

<span class="hljs-comment">// node_modules/gl-vec3/scale.js</span>
<span class="hljs-keyword">var</span> require_scale = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/gl-vec3/scale.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = scale;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">scale</span>(<span class="hljs-params">out, a, b</span>) {
      out[<span class="hljs-number">0</span>] = a[<span class="hljs-number">0</span>] * b;
      out[<span class="hljs-number">1</span>] = a[<span class="hljs-number">1</span>] * b;
      out[<span class="hljs-number">2</span>] = a[<span class="hljs-number">2</span>] * b;
      <span class="hljs-keyword">return</span> out;
    }
  }
});

<span class="hljs-comment">// node_modules/gl-vec3/scaleAndAdd.js</span>
<span class="hljs-keyword">var</span> require_scaleAndAdd = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/gl-vec3/scaleAndAdd.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = scaleAndAdd;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">scaleAndAdd</span>(<span class="hljs-params">out, a, b, scale</span>) {
      out[<span class="hljs-number">0</span>] = a[<span class="hljs-number">0</span>] + b[<span class="hljs-number">0</span>] * scale;
      out[<span class="hljs-number">1</span>] = a[<span class="hljs-number">1</span>] + b[<span class="hljs-number">1</span>] * scale;
      out[<span class="hljs-number">2</span>] = a[<span class="hljs-number">2</span>] + b[<span class="hljs-number">2</span>] * scale;
      <span class="hljs-keyword">return</span> out;
    }
  }
});

<span class="hljs-comment">// node_modules/gl-vec3/distance.js</span>
<span class="hljs-keyword">var</span> require_distance = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/gl-vec3/distance.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = distance;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">distance</span>(<span class="hljs-params">a, b</span>) {
      <span class="hljs-keyword">var</span> x = b[<span class="hljs-number">0</span>] - a[<span class="hljs-number">0</span>], y = b[<span class="hljs-number">1</span>] - a[<span class="hljs-number">1</span>], z = b[<span class="hljs-number">2</span>] - a[<span class="hljs-number">2</span>];
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(x * x + y * y + z * z);
    }
  }
});

<span class="hljs-comment">// node_modules/gl-vec3/squaredDistance.js</span>
<span class="hljs-keyword">var</span> require_squaredDistance = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/gl-vec3/squaredDistance.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = squaredDistance;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">squaredDistance</span>(<span class="hljs-params">a, b</span>) {
      <span class="hljs-keyword">var</span> x = b[<span class="hljs-number">0</span>] - a[<span class="hljs-number">0</span>], y = b[<span class="hljs-number">1</span>] - a[<span class="hljs-number">1</span>], z = b[<span class="hljs-number">2</span>] - a[<span class="hljs-number">2</span>];
      <span class="hljs-keyword">return</span> x * x + y * y + z * z;
    }
  }
});

<span class="hljs-comment">// node_modules/ms/index.js</span>
<span class="hljs-keyword">var</span> require_ms = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/ms/index.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-keyword">var</span> s = <span class="hljs-number">1e3</span>;
    <span class="hljs-keyword">var</span> m = s * <span class="hljs-number">60</span>;
    <span class="hljs-keyword">var</span> h = m * <span class="hljs-number">60</span>;
    <span class="hljs-keyword">var</span> d = h * <span class="hljs-number">24</span>;
    <span class="hljs-keyword">var</span> w = d * <span class="hljs-number">7</span>;
    <span class="hljs-keyword">var</span> y = d * <span class="hljs-number">365.25</span>;
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">val, options</span>) {
      options = options || {};
      <span class="hljs-keyword">var</span> type = <span class="hljs-keyword">typeof</span> val;
      <span class="hljs-keyword">if</span> (type === <span class="hljs-string">&quot;string&quot;</span> &amp;&amp; val.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">parse</span>(val);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">&quot;number&quot;</span> &amp;&amp; <span class="hljs-built_in">isFinite</span>(val)) {
        <span class="hljs-keyword">return</span> options.<span class="hljs-property">long</span> ? <span class="hljs-title function_">fmtLong</span>(val) : <span class="hljs-title function_">fmtShort</span>(val);
      }
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(
        <span class="hljs-string">&quot;val is not a non-empty string or a valid number. val=&quot;</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(val)
      );
    };
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">str</span>) {
      str = <span class="hljs-title class_">String</span>(str);
      <span class="hljs-keyword">if</span> (str.<span class="hljs-property">length</span> &gt; <span class="hljs-number">100</span>) {
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">var</span> match = <span class="hljs-regexp">/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i</span>.<span class="hljs-title function_">exec</span>(
        str
      );
      <span class="hljs-keyword">if</span> (!match) {
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">var</span> n = <span class="hljs-built_in">parseFloat</span>(match[<span class="hljs-number">1</span>]);
      <span class="hljs-keyword">var</span> type = (match[<span class="hljs-number">2</span>] || <span class="hljs-string">&quot;ms&quot;</span>).<span class="hljs-title function_">toLowerCase</span>();
      <span class="hljs-keyword">switch</span> (type) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;years&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;year&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;yrs&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;yr&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;y&quot;</span>:
          <span class="hljs-keyword">return</span> n * y;
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;weeks&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;week&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;w&quot;</span>:
          <span class="hljs-keyword">return</span> n * w;
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;days&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;day&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;d&quot;</span>:
          <span class="hljs-keyword">return</span> n * d;
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;hours&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;hour&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;hrs&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;hr&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;h&quot;</span>:
          <span class="hljs-keyword">return</span> n * h;
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;minutes&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;minute&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;mins&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;min&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;m&quot;</span>:
          <span class="hljs-keyword">return</span> n * m;
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;seconds&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;second&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;secs&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;sec&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;s&quot;</span>:
          <span class="hljs-keyword">return</span> n * s;
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;milliseconds&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;millisecond&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;msecs&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;msec&quot;</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;ms&quot;</span>:
          <span class="hljs-keyword">return</span> n;
        <span class="hljs-attr">default</span>:
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
      }
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">fmtShort</span>(<span class="hljs-params">ms</span>) {
      <span class="hljs-keyword">var</span> msAbs = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(ms);
      <span class="hljs-keyword">if</span> (msAbs &gt;= d) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(ms / d) + <span class="hljs-string">&quot;d&quot;</span>;
      }
      <span class="hljs-keyword">if</span> (msAbs &gt;= h) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(ms / h) + <span class="hljs-string">&quot;h&quot;</span>;
      }
      <span class="hljs-keyword">if</span> (msAbs &gt;= m) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(ms / m) + <span class="hljs-string">&quot;m&quot;</span>;
      }
      <span class="hljs-keyword">if</span> (msAbs &gt;= s) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(ms / s) + <span class="hljs-string">&quot;s&quot;</span>;
      }
      <span class="hljs-keyword">return</span> ms + <span class="hljs-string">&quot;ms&quot;</span>;
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">fmtLong</span>(<span class="hljs-params">ms</span>) {
      <span class="hljs-keyword">var</span> msAbs = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(ms);
      <span class="hljs-keyword">if</span> (msAbs &gt;= d) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">plural</span>(ms, msAbs, d, <span class="hljs-string">&quot;day&quot;</span>);
      }
      <span class="hljs-keyword">if</span> (msAbs &gt;= h) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">plural</span>(ms, msAbs, h, <span class="hljs-string">&quot;hour&quot;</span>);
      }
      <span class="hljs-keyword">if</span> (msAbs &gt;= m) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">plural</span>(ms, msAbs, m, <span class="hljs-string">&quot;minute&quot;</span>);
      }
      <span class="hljs-keyword">if</span> (msAbs &gt;= s) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">plural</span>(ms, msAbs, s, <span class="hljs-string">&quot;second&quot;</span>);
      }
      <span class="hljs-keyword">return</span> ms + <span class="hljs-string">&quot; ms&quot;</span>;
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">plural</span>(<span class="hljs-params">ms, msAbs, n, name</span>) {
      <span class="hljs-keyword">var</span> isPlural = msAbs &gt;= n * <span class="hljs-number">1.5</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(ms / n) + <span class="hljs-string">&quot; &quot;</span> + name + (isPlural ? <span class="hljs-string">&quot;s&quot;</span> : <span class="hljs-string">&quot;&quot;</span>);
    }
  }
});

<span class="hljs-comment">// node_modules/debug/src/common.js</span>
<span class="hljs-keyword">var</span> require_common = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/debug/src/common.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params">env</span>) {
      createDebug.<span class="hljs-property">debug</span> = createDebug;
      createDebug.<span class="hljs-property">default</span> = createDebug;
      createDebug.<span class="hljs-property">coerce</span> = coerce;
      createDebug.<span class="hljs-property">disable</span> = disable;
      createDebug.<span class="hljs-property">enable</span> = enable;
      createDebug.<span class="hljs-property">enabled</span> = enabled;
      createDebug.<span class="hljs-property">humanize</span> = require_ms();
      createDebug.<span class="hljs-property">destroy</span> = destroy;
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(env).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
        createDebug[key] = env[key];
      });
      createDebug.<span class="hljs-property">names</span> = [];
      createDebug.<span class="hljs-property">skips</span> = [];
      createDebug.<span class="hljs-property">formatters</span> = {};
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">selectColor</span>(<span class="hljs-params">namespace</span>) {
        <span class="hljs-keyword">let</span> hash = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; namespace.<span class="hljs-property">length</span>; i++) {
          hash = (hash &lt;&lt; <span class="hljs-number">5</span>) - hash + namespace.<span class="hljs-title function_">charCodeAt</span>(i);
          hash |= <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">return</span> createDebug.<span class="hljs-property">colors</span>[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(hash) % createDebug.<span class="hljs-property">colors</span>.<span class="hljs-property">length</span>];
      }
      createDebug.<span class="hljs-property">selectColor</span> = selectColor;
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">createDebug</span>(<span class="hljs-params">namespace</span>) {
        <span class="hljs-keyword">let</span> prevTime;
        <span class="hljs-keyword">let</span> enableOverride = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">let</span> namespacesCache;
        <span class="hljs-keyword">let</span> enabledCache;
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">debug</span>(<span class="hljs-params">...args</span>) {
          <span class="hljs-keyword">if</span> (!debug.<span class="hljs-property">enabled</span>) {
            <span class="hljs-keyword">return</span>;
          }
          <span class="hljs-keyword">const</span> self = debug;
          <span class="hljs-keyword">const</span> curr = <span class="hljs-title class_">Number</span>(<span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
          <span class="hljs-keyword">const</span> ms = curr - (prevTime || curr);
          self.<span class="hljs-property">diff</span> = ms;
          self.<span class="hljs-property">prev</span> = prevTime;
          self.<span class="hljs-property">curr</span> = curr;
          prevTime = curr;
          args[<span class="hljs-number">0</span>] = createDebug.<span class="hljs-title function_">coerce</span>(args[<span class="hljs-number">0</span>]);
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> args[<span class="hljs-number">0</span>] !== <span class="hljs-string">&quot;string&quot;</span>) {
            args.<span class="hljs-title function_">unshift</span>(<span class="hljs-string">&quot;%O&quot;</span>);
          }
          <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
          args[<span class="hljs-number">0</span>] = args[<span class="hljs-number">0</span>].<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/%([a-zA-Z%])/g</span>, <span class="hljs-function">(<span class="hljs-params">match, format</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (match === <span class="hljs-string">&quot;%%&quot;</span>) {
              <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;%&quot;</span>;
            }
            index++;
            <span class="hljs-keyword">const</span> formatter = createDebug.<span class="hljs-property">formatters</span>[format];
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> formatter === <span class="hljs-string">&quot;function&quot;</span>) {
              <span class="hljs-keyword">const</span> val = args[index];
              match = formatter.<span class="hljs-title function_">call</span>(self, val);
              args.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
              index--;
            }
            <span class="hljs-keyword">return</span> match;
          });
          createDebug.<span class="hljs-property">formatArgs</span>.<span class="hljs-title function_">call</span>(self, args);
          <span class="hljs-keyword">const</span> logFn = self.<span class="hljs-property">log</span> || createDebug.<span class="hljs-property">log</span>;
          logFn.<span class="hljs-title function_">apply</span>(self, args);
        }
        debug.<span class="hljs-property">namespace</span> = namespace;
        debug.<span class="hljs-property">useColors</span> = createDebug.<span class="hljs-title function_">useColors</span>();
        debug.<span class="hljs-property">color</span> = createDebug.<span class="hljs-title function_">selectColor</span>(namespace);
        debug.<span class="hljs-property">extend</span> = extend;
        debug.<span class="hljs-property">destroy</span> = createDebug.<span class="hljs-property">destroy</span>;
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(debug, <span class="hljs-string">&quot;enabled&quot;</span>, {
          <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">configurable</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">if</span> (enableOverride !== <span class="hljs-literal">null</span>) {
              <span class="hljs-keyword">return</span> enableOverride;
            }
            <span class="hljs-keyword">if</span> (namespacesCache !== createDebug.<span class="hljs-property">namespaces</span>) {
              namespacesCache = createDebug.<span class="hljs-property">namespaces</span>;
              enabledCache = createDebug.<span class="hljs-title function_">enabled</span>(namespace);
            }
            <span class="hljs-keyword">return</span> enabledCache;
          },
          <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> {
            enableOverride = v;
          }
        });
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> createDebug.<span class="hljs-property">init</span> === <span class="hljs-string">&quot;function&quot;</span>) {
          createDebug.<span class="hljs-title function_">init</span>(debug);
        }
        <span class="hljs-keyword">return</span> debug;
      }
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">extend</span>(<span class="hljs-params">namespace, delimiter</span>) {
        <span class="hljs-keyword">const</span> newDebug = <span class="hljs-title function_">createDebug</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">namespace</span> + (<span class="hljs-keyword">typeof</span> delimiter === <span class="hljs-string">&quot;undefined&quot;</span> ? <span class="hljs-string">&quot;:&quot;</span> : delimiter) + namespace);
        newDebug.<span class="hljs-property">log</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">log</span>;
        <span class="hljs-keyword">return</span> newDebug;
      }
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">enable</span>(<span class="hljs-params">namespaces</span>) {
        createDebug.<span class="hljs-title function_">save</span>(namespaces);
        createDebug.<span class="hljs-property">namespaces</span> = namespaces;
        createDebug.<span class="hljs-property">names</span> = [];
        createDebug.<span class="hljs-property">skips</span> = [];
        <span class="hljs-keyword">let</span> i;
        <span class="hljs-keyword">const</span> split = (<span class="hljs-keyword">typeof</span> namespaces === <span class="hljs-string">&quot;string&quot;</span> ? namespaces : <span class="hljs-string">&quot;&quot;</span>).<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/[\s,]+/</span>);
        <span class="hljs-keyword">const</span> len = split.<span class="hljs-property">length</span>;
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; len; i++) {
          <span class="hljs-keyword">if</span> (!split[i]) {
            <span class="hljs-keyword">continue</span>;
          }
          namespaces = split[i].<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\*/g</span>, <span class="hljs-string">&quot;.*?&quot;</span>);
          <span class="hljs-keyword">if</span> (namespaces[<span class="hljs-number">0</span>] === <span class="hljs-string">&quot;-&quot;</span>) {
            createDebug.<span class="hljs-property">skips</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">&quot;^&quot;</span> + namespaces.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>) + <span class="hljs-string">&quot;$&quot;</span>));
          } <span class="hljs-keyword">else</span> {
            createDebug.<span class="hljs-property">names</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">&quot;^&quot;</span> + namespaces + <span class="hljs-string">&quot;$&quot;</span>));
          }
        }
      }
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">disable</span>(<span class="hljs-params"></span>) {
        <span class="hljs-keyword">const</span> namespaces = [
          ...createDebug.<span class="hljs-property">names</span>.<span class="hljs-title function_">map</span>(toNamespace),
          ...createDebug.<span class="hljs-property">skips</span>.<span class="hljs-title function_">map</span>(toNamespace).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">namespace</span>) =&gt;</span> <span class="hljs-string">&quot;-&quot;</span> + namespace)
        ].<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;,&quot;</span>);
        createDebug.<span class="hljs-title function_">enable</span>(<span class="hljs-string">&quot;&quot;</span>);
        <span class="hljs-keyword">return</span> namespaces;
      }
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">enabled</span>(<span class="hljs-params">name</span>) {
        <span class="hljs-keyword">if</span> (name[name.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>] === <span class="hljs-string">&quot;*&quot;</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">let</span> i;
        <span class="hljs-keyword">let</span> len;
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, len = createDebug.<span class="hljs-property">skips</span>.<span class="hljs-property">length</span>; i &lt; len; i++) {
          <span class="hljs-keyword">if</span> (createDebug.<span class="hljs-property">skips</span>[i].<span class="hljs-title function_">test</span>(name)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
          }
        }
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, len = createDebug.<span class="hljs-property">names</span>.<span class="hljs-property">length</span>; i &lt; len; i++) {
          <span class="hljs-keyword">if</span> (createDebug.<span class="hljs-property">names</span>[i].<span class="hljs-title function_">test</span>(name)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
          }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">toNamespace</span>(<span class="hljs-params">regexp</span>) {
        <span class="hljs-keyword">return</span> regexp.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">substring</span>(<span class="hljs-number">2</span>, regexp.<span class="hljs-title function_">toString</span>().<span class="hljs-property">length</span> - <span class="hljs-number">2</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\.\*\?$/</span>, <span class="hljs-string">&quot;*&quot;</span>);
      }
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">coerce</span>(<span class="hljs-params">val</span>) {
        <span class="hljs-keyword">if</span> (val <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>) {
          <span class="hljs-keyword">return</span> val.<span class="hljs-property">stack</span> || val.<span class="hljs-property">message</span>;
        }
        <span class="hljs-keyword">return</span> val;
      }
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">destroy</span>(<span class="hljs-params"></span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&quot;Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.&quot;</span>);
      }
      createDebug.<span class="hljs-title function_">enable</span>(createDebug.<span class="hljs-title function_">load</span>());
      <span class="hljs-keyword">return</span> createDebug;
    }
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = setup;
  }
});

<span class="hljs-comment">// node_modules/debug/src/browser.js</span>
<span class="hljs-keyword">var</span> require_browser = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/debug/src/browser.js&quot;</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-variable language_">module</span>) {
    <span class="hljs-built_in">exports</span>.<span class="hljs-property">formatArgs</span> = formatArgs;
    <span class="hljs-built_in">exports</span>.<span class="hljs-property">save</span> = save;
    <span class="hljs-built_in">exports</span>.<span class="hljs-property">load</span> = load;
    <span class="hljs-built_in">exports</span>.<span class="hljs-property">useColors</span> = useColors;
    <span class="hljs-built_in">exports</span>.<span class="hljs-property">storage</span> = <span class="hljs-title function_">localstorage</span>();
    <span class="hljs-built_in">exports</span>.<span class="hljs-property">destroy</span> = <span class="hljs-comment">/* @__PURE__ */</span> (<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">let</span> warned = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!warned) {
          warned = <span class="hljs-literal">true</span>;
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&quot;Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.&quot;</span>);
        }
      };
    })();
    <span class="hljs-built_in">exports</span>.<span class="hljs-property">colors</span> = [
      <span class="hljs-string">&quot;#0000CC&quot;</span>,
      <span class="hljs-string">&quot;#0000FF&quot;</span>,
      <span class="hljs-string">&quot;#0033CC&quot;</span>,
      <span class="hljs-string">&quot;#0033FF&quot;</span>,
      <span class="hljs-string">&quot;#0066CC&quot;</span>,
      <span class="hljs-string">&quot;#0066FF&quot;</span>,
      <span class="hljs-string">&quot;#0099CC&quot;</span>,
      <span class="hljs-string">&quot;#0099FF&quot;</span>,
      <span class="hljs-string">&quot;#00CC00&quot;</span>,
      <span class="hljs-string">&quot;#00CC33&quot;</span>,
      <span class="hljs-string">&quot;#00CC66&quot;</span>,
      <span class="hljs-string">&quot;#00CC99&quot;</span>,
      <span class="hljs-string">&quot;#00CCCC&quot;</span>,
      <span class="hljs-string">&quot;#00CCFF&quot;</span>,
      <span class="hljs-string">&quot;#3300CC&quot;</span>,
      <span class="hljs-string">&quot;#3300FF&quot;</span>,
      <span class="hljs-string">&quot;#3333CC&quot;</span>,
      <span class="hljs-string">&quot;#3333FF&quot;</span>,
      <span class="hljs-string">&quot;#3366CC&quot;</span>,
      <span class="hljs-string">&quot;#3366FF&quot;</span>,
      <span class="hljs-string">&quot;#3399CC&quot;</span>,
      <span class="hljs-string">&quot;#3399FF&quot;</span>,
      <span class="hljs-string">&quot;#33CC00&quot;</span>,
      <span class="hljs-string">&quot;#33CC33&quot;</span>,
      <span class="hljs-string">&quot;#33CC66&quot;</span>,
      <span class="hljs-string">&quot;#33CC99&quot;</span>,
      <span class="hljs-string">&quot;#33CCCC&quot;</span>,
      <span class="hljs-string">&quot;#33CCFF&quot;</span>,
      <span class="hljs-string">&quot;#6600CC&quot;</span>,
      <span class="hljs-string">&quot;#6600FF&quot;</span>,
      <span class="hljs-string">&quot;#6633CC&quot;</span>,
      <span class="hljs-string">&quot;#6633FF&quot;</span>,
      <span class="hljs-string">&quot;#66CC00&quot;</span>,
      <span class="hljs-string">&quot;#66CC33&quot;</span>,
      <span class="hljs-string">&quot;#9900CC&quot;</span>,
      <span class="hljs-string">&quot;#9900FF&quot;</span>,
      <span class="hljs-string">&quot;#9933CC&quot;</span>,
      <span class="hljs-string">&quot;#9933FF&quot;</span>,
      <span class="hljs-string">&quot;#99CC00&quot;</span>,
      <span class="hljs-string">&quot;#99CC33&quot;</span>,
      <span class="hljs-string">&quot;#CC0000&quot;</span>,
      <span class="hljs-string">&quot;#CC0033&quot;</span>,
      <span class="hljs-string">&quot;#CC0066&quot;</span>,
      <span class="hljs-string">&quot;#CC0099&quot;</span>,
      <span class="hljs-string">&quot;#CC00CC&quot;</span>,
      <span class="hljs-string">&quot;#CC00FF&quot;</span>,
      <span class="hljs-string">&quot;#CC3300&quot;</span>,
      <span class="hljs-string">&quot;#CC3333&quot;</span>,
      <span class="hljs-string">&quot;#CC3366&quot;</span>,
      <span class="hljs-string">&quot;#CC3399&quot;</span>,
      <span class="hljs-string">&quot;#CC33CC&quot;</span>,
      <span class="hljs-string">&quot;#CC33FF&quot;</span>,
      <span class="hljs-string">&quot;#CC6600&quot;</span>,
      <span class="hljs-string">&quot;#CC6633&quot;</span>,
      <span class="hljs-string">&quot;#CC9900&quot;</span>,
      <span class="hljs-string">&quot;#CC9933&quot;</span>,
      <span class="hljs-string">&quot;#CCCC00&quot;</span>,
      <span class="hljs-string">&quot;#CCCC33&quot;</span>,
      <span class="hljs-string">&quot;#FF0000&quot;</span>,
      <span class="hljs-string">&quot;#FF0033&quot;</span>,
      <span class="hljs-string">&quot;#FF0066&quot;</span>,
      <span class="hljs-string">&quot;#FF0099&quot;</span>,
      <span class="hljs-string">&quot;#FF00CC&quot;</span>,
      <span class="hljs-string">&quot;#FF00FF&quot;</span>,
      <span class="hljs-string">&quot;#FF3300&quot;</span>,
      <span class="hljs-string">&quot;#FF3333&quot;</span>,
      <span class="hljs-string">&quot;#FF3366&quot;</span>,
      <span class="hljs-string">&quot;#FF3399&quot;</span>,
      <span class="hljs-string">&quot;#FF33CC&quot;</span>,
      <span class="hljs-string">&quot;#FF33FF&quot;</span>,
      <span class="hljs-string">&quot;#FF6600&quot;</span>,
      <span class="hljs-string">&quot;#FF6633&quot;</span>,
      <span class="hljs-string">&quot;#FF9900&quot;</span>,
      <span class="hljs-string">&quot;#FF9933&quot;</span>,
      <span class="hljs-string">&quot;#FFCC00&quot;</span>,
      <span class="hljs-string">&quot;#FFCC33&quot;</span>
    ];
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">useColors</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">&quot;undefined&quot;</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">process</span> &amp;&amp; (<span class="hljs-variable language_">window</span>.<span class="hljs-property">process</span>.<span class="hljs-property">type</span> === <span class="hljs-string">&quot;renderer&quot;</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">process</span>.<span class="hljs-property">__nwjs</span>)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> navigator !== <span class="hljs-string">&quot;undefined&quot;</span> &amp;&amp; navigator.<span class="hljs-property">userAgent</span> &amp;&amp; navigator.<span class="hljs-property">userAgent</span>.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/(edge|trident)\/(\d+)/</span>)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">document</span> !== <span class="hljs-string">&quot;undefined&quot;</span> &amp;&amp; <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span> &amp;&amp; <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span> &amp;&amp; <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">WebkitAppearance</span> || <span class="hljs-comment">// Is firebug? http://stackoverflow.com/a/398120/376773</span>
      <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">&quot;undefined&quot;</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">console</span> &amp;&amp; (<span class="hljs-variable language_">window</span>.<span class="hljs-property">console</span>.<span class="hljs-property">firebug</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">console</span>.<span class="hljs-property">exception</span> &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">console</span>.<span class="hljs-property">table</span>) || <span class="hljs-comment">// Is firefox &gt;= v31?</span>
      <span class="hljs-comment">// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages</span>
      <span class="hljs-keyword">typeof</span> navigator !== <span class="hljs-string">&quot;undefined&quot;</span> &amp;&amp; navigator.<span class="hljs-property">userAgent</span> &amp;&amp; navigator.<span class="hljs-property">userAgent</span>.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/firefox\/(\d+)/</span>) &amp;&amp; <span class="hljs-built_in">parseInt</span>(<span class="hljs-title class_">RegExp</span>.<span class="hljs-property">$1</span>, <span class="hljs-number">10</span>) &gt;= <span class="hljs-number">31</span> || <span class="hljs-comment">// Double check webkit in userAgent just in case we are in a worker</span>
      <span class="hljs-keyword">typeof</span> navigator !== <span class="hljs-string">&quot;undefined&quot;</span> &amp;&amp; navigator.<span class="hljs-property">userAgent</span> &amp;&amp; navigator.<span class="hljs-property">userAgent</span>.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/applewebkit\/(\d+)/</span>);
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">formatArgs</span>(<span class="hljs-params">args</span>) {
      args[<span class="hljs-number">0</span>] = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">useColors</span> ? <span class="hljs-string">&quot;%c&quot;</span> : <span class="hljs-string">&quot;&quot;</span>) + <span class="hljs-variable language_">this</span>.<span class="hljs-property">namespace</span> + (<span class="hljs-variable language_">this</span>.<span class="hljs-property">useColors</span> ? <span class="hljs-string">&quot; %c&quot;</span> : <span class="hljs-string">&quot; &quot;</span>) + args[<span class="hljs-number">0</span>] + (<span class="hljs-variable language_">this</span>.<span class="hljs-property">useColors</span> ? <span class="hljs-string">&quot;%c &quot;</span> : <span class="hljs-string">&quot; &quot;</span>) + <span class="hljs-string">&quot;+&quot;</span> + <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>.<span class="hljs-title function_">humanize</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">diff</span>);
      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">useColors</span>) {
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">const</span> c = <span class="hljs-string">&quot;color: &quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span>;
      args.<span class="hljs-title function_">splice</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, c, <span class="hljs-string">&quot;color: inherit&quot;</span>);
      <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">let</span> lastC = <span class="hljs-number">0</span>;
      args[<span class="hljs-number">0</span>].<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/%[a-zA-Z%]/g</span>, <span class="hljs-function">(<span class="hljs-params">match</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (match === <span class="hljs-string">&quot;%%&quot;</span>) {
          <span class="hljs-keyword">return</span>;
        }
        index++;
        <span class="hljs-keyword">if</span> (match === <span class="hljs-string">&quot;%c&quot;</span>) {
          lastC = index;
        }
      });
      args.<span class="hljs-title function_">splice</span>(lastC, <span class="hljs-number">0</span>, c);
    }
    <span class="hljs-built_in">exports</span>.<span class="hljs-property">log</span> = <span class="hljs-variable language_">console</span>.<span class="hljs-property">debug</span> || <span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span> || (<span class="hljs-function">() =&gt;</span> {
    });
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">save</span>(<span class="hljs-params">namespaces</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">if</span> (namespaces) {
          <span class="hljs-built_in">exports</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&quot;debug&quot;</span>, namespaces);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-built_in">exports</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">&quot;debug&quot;</span>);
        }
      } <span class="hljs-keyword">catch</span> (error) {
      }
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">load</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">let</span> r;
      <span class="hljs-keyword">try</span> {
        r = <span class="hljs-built_in">exports</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&quot;debug&quot;</span>);
      } <span class="hljs-keyword">catch</span> (error) {
      }
      <span class="hljs-keyword">if</span> (!r &amp;&amp; <span class="hljs-keyword">typeof</span> process !== <span class="hljs-string">&quot;undefined&quot;</span> &amp;&amp; <span class="hljs-string">&quot;env&quot;</span> <span class="hljs-keyword">in</span> process) {
        r = process.<span class="hljs-property">env</span>.<span class="hljs-property">DEBUG</span>;
      }
      <span class="hljs-keyword">return</span> r;
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">localstorage</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">localStorage</span>;
      } <span class="hljs-keyword">catch</span> (error) {
      }
    }
    <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = require_common()(<span class="hljs-built_in">exports</span>);
    <span class="hljs-keyword">var</span> { formatters } = <span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>;
    formatters.<span class="hljs-property">j</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(v);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;[UnexpectedJSONParseError]: &quot;</span> + error.<span class="hljs-property">message</span>;
      }
    };
  }
});

<span class="hljs-comment">// node_modules/quickhull3d/dist/HalfEdge.js</span>
<span class="hljs-keyword">var</span> require_HalfEdge = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/quickhull3d/dist/HalfEdge.js&quot;</span>(<span class="hljs-built_in">exports</span>) {
    <span class="hljs-string">&quot;use strict&quot;</span>;
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-string">&quot;__esModule&quot;</span>, {
      <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>
    });
    <span class="hljs-built_in">exports</span>[<span class="hljs-string">&quot;default&quot;</span>] = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> _distance = <span class="hljs-title function_">_interopRequireDefault</span>(require_distance());
    <span class="hljs-keyword">var</span> _squaredDistance = <span class="hljs-title function_">_interopRequireDefault</span>(require_squaredDistance());
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_interopRequireDefault</span>(<span class="hljs-params">obj</span>) {
      <span class="hljs-keyword">return</span> obj &amp;&amp; obj.<span class="hljs-property">__esModule</span> ? obj : { <span class="hljs-string">&quot;default&quot;</span>: obj };
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_classCallCheck</span>(<span class="hljs-params">instance, Constructor</span>) {
      <span class="hljs-keyword">if</span> (!(instance <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Constructor</span>)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">&quot;Cannot call a class as a function&quot;</span>);
      }
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-params">target, props</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; props.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-keyword">var</span> descriptor = props[i];
        descriptor.<span class="hljs-property">enumerable</span> = descriptor.<span class="hljs-property">enumerable</span> || <span class="hljs-literal">false</span>;
        descriptor.<span class="hljs-property">configurable</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;value&quot;</span> <span class="hljs-keyword">in</span> descriptor) descriptor.<span class="hljs-property">writable</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(target, descriptor.<span class="hljs-property">key</span>, descriptor);
      }
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_createClass</span>(<span class="hljs-params">Constructor, protoProps, staticProps</span>) {
      <span class="hljs-keyword">if</span> (protoProps) <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-title class_">Constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, protoProps);
      <span class="hljs-keyword">if</span> (staticProps) <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-title class_">Constructor</span>, staticProps);
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-title class_">Constructor</span>, <span class="hljs-string">&quot;prototype&quot;</span>, { <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span> });
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Constructor</span>;
    }
    <span class="hljs-keyword">var</span> debug = require_browser()(<span class="hljs-string">&quot;halfedge&quot;</span>);
    <span class="hljs-keyword">var</span> <span class="hljs-title class_">HalfEdge</span> = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">HalfEdge2</span>(<span class="hljs-params">vertex, face</span>) {
        <span class="hljs-title function_">_classCallCheck</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-title class_">HalfEdge2</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertex</span> = vertex;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">face</span> = face;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">next</span> = <span class="hljs-literal">null</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">prev</span> = <span class="hljs-literal">null</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">opposite</span> = <span class="hljs-literal">null</span>;
      }
      <span class="hljs-title function_">_createClass</span>(<span class="hljs-title class_">HalfEdge2</span>, [{
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;head&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">head</span>(<span class="hljs-params"></span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertex</span>;
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;tail&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">tail</span>(<span class="hljs-params"></span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">prev</span> ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">prev</span>.<span class="hljs-property">vertex</span> : <span class="hljs-literal">null</span>;
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;length&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">length</span>(<span class="hljs-params"></span>) {
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tail</span>()) {
            <span class="hljs-keyword">return</span> (<span class="hljs-number">0</span>, _distance[<span class="hljs-string">&quot;default&quot;</span>])(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tail</span>().<span class="hljs-property">point</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">head</span>().<span class="hljs-property">point</span>);
          }
          <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;lengthSquared&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">lengthSquared</span>(<span class="hljs-params"></span>) {
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tail</span>()) {
            <span class="hljs-keyword">return</span> (<span class="hljs-number">0</span>, _squaredDistance[<span class="hljs-string">&quot;default&quot;</span>])(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tail</span>().<span class="hljs-property">point</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">head</span>().<span class="hljs-property">point</span>);
          }
          <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;setOpposite&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">setOpposite</span>(<span class="hljs-params">edge</span>) {
          <span class="hljs-keyword">var</span> me = <span class="hljs-variable language_">this</span>;
          <span class="hljs-keyword">if</span> (debug.<span class="hljs-property">enabled</span>) {
            <span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;opposite &quot;</span>.<span class="hljs-title function_">concat</span>(me.<span class="hljs-title function_">tail</span>().<span class="hljs-property">index</span>, <span class="hljs-string">&quot; &lt;--&gt; &quot;</span>).<span class="hljs-title function_">concat</span>(me.<span class="hljs-title function_">head</span>().<span class="hljs-property">index</span>, <span class="hljs-string">&quot; between &quot;</span>).<span class="hljs-title function_">concat</span>(me.<span class="hljs-property">face</span>.<span class="hljs-title function_">collectIndices</span>(), <span class="hljs-string">&quot;, &quot;</span>).<span class="hljs-title function_">concat</span>(edge.<span class="hljs-property">face</span>.<span class="hljs-title function_">collectIndices</span>()));
          }
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">opposite</span> = edge;
          edge.<span class="hljs-property">opposite</span> = <span class="hljs-variable language_">this</span>;
        }
      }]);
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">HalfEdge2</span>;
    }();
    <span class="hljs-built_in">exports</span>[<span class="hljs-string">&quot;default&quot;</span>] = <span class="hljs-title class_">HalfEdge</span>;
  }
});

<span class="hljs-comment">// node_modules/quickhull3d/dist/Face.js</span>
<span class="hljs-keyword">var</span> require_Face = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/quickhull3d/dist/Face.js&quot;</span>(<span class="hljs-built_in">exports</span>) {
    <span class="hljs-string">&quot;use strict&quot;</span>;
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-string">&quot;__esModule&quot;</span>, {
      <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>
    });
    <span class="hljs-built_in">exports</span>[<span class="hljs-string">&quot;default&quot;</span>] = <span class="hljs-built_in">exports</span>.<span class="hljs-property">VISIBLE</span> = <span class="hljs-built_in">exports</span>.<span class="hljs-property">NON_CONVEX</span> = <span class="hljs-built_in">exports</span>.<span class="hljs-property">DELETED</span> = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> _dot = <span class="hljs-title function_">_interopRequireDefault</span>(require_dot());
    <span class="hljs-keyword">var</span> _add = <span class="hljs-title function_">_interopRequireDefault</span>(require_add());
    <span class="hljs-keyword">var</span> _subtract = <span class="hljs-title function_">_interopRequireDefault</span>(require_subtract());
    <span class="hljs-keyword">var</span> _cross = <span class="hljs-title function_">_interopRequireDefault</span>(require_cross());
    <span class="hljs-keyword">var</span> _copy = <span class="hljs-title function_">_interopRequireDefault</span>(require_copy());
    <span class="hljs-keyword">var</span> _length = <span class="hljs-title function_">_interopRequireDefault</span>(require_length());
    <span class="hljs-keyword">var</span> _scale = <span class="hljs-title function_">_interopRequireDefault</span>(require_scale());
    <span class="hljs-keyword">var</span> _scaleAndAdd = <span class="hljs-title function_">_interopRequireDefault</span>(require_scaleAndAdd());
    <span class="hljs-keyword">var</span> _normalize = <span class="hljs-title function_">_interopRequireDefault</span>(require_normalize());
    <span class="hljs-keyword">var</span> _HalfEdge = <span class="hljs-title function_">_interopRequireDefault</span>(require_HalfEdge());
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_interopRequireDefault</span>(<span class="hljs-params">obj</span>) {
      <span class="hljs-keyword">return</span> obj &amp;&amp; obj.<span class="hljs-property">__esModule</span> ? obj : { <span class="hljs-string">&quot;default&quot;</span>: obj };
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_classCallCheck</span>(<span class="hljs-params">instance, Constructor</span>) {
      <span class="hljs-keyword">if</span> (!(instance <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Constructor</span>)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">&quot;Cannot call a class as a function&quot;</span>);
      }
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-params">target, props</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; props.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-keyword">var</span> descriptor = props[i];
        descriptor.<span class="hljs-property">enumerable</span> = descriptor.<span class="hljs-property">enumerable</span> || <span class="hljs-literal">false</span>;
        descriptor.<span class="hljs-property">configurable</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;value&quot;</span> <span class="hljs-keyword">in</span> descriptor) descriptor.<span class="hljs-property">writable</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(target, descriptor.<span class="hljs-property">key</span>, descriptor);
      }
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_createClass</span>(<span class="hljs-params">Constructor, protoProps, staticProps</span>) {
      <span class="hljs-keyword">if</span> (protoProps) <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-title class_">Constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, protoProps);
      <span class="hljs-keyword">if</span> (staticProps) <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-title class_">Constructor</span>, staticProps);
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-title class_">Constructor</span>, <span class="hljs-string">&quot;prototype&quot;</span>, { <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span> });
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Constructor</span>;
    }
    <span class="hljs-keyword">var</span> debug = require_browser()(<span class="hljs-string">&quot;face&quot;</span>);
    <span class="hljs-keyword">var</span> <span class="hljs-variable constant_">VISIBLE</span> = <span class="hljs-number">0</span>;
    <span class="hljs-built_in">exports</span>.<span class="hljs-property">VISIBLE</span> = <span class="hljs-variable constant_">VISIBLE</span>;
    <span class="hljs-keyword">var</span> <span class="hljs-variable constant_">NON_CONVEX</span> = <span class="hljs-number">1</span>;
    <span class="hljs-built_in">exports</span>.<span class="hljs-property">NON_CONVEX</span> = <span class="hljs-variable constant_">NON_CONVEX</span>;
    <span class="hljs-keyword">var</span> <span class="hljs-variable constant_">DELETED</span> = <span class="hljs-number">2</span>;
    <span class="hljs-built_in">exports</span>.<span class="hljs-property">DELETED</span> = <span class="hljs-variable constant_">DELETED</span>;
    <span class="hljs-keyword">var</span> <span class="hljs-title class_">Face</span> = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">Face2</span>(<span class="hljs-params"></span>) {
        <span class="hljs-title function_">_classCallCheck</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-title class_">Face2</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span> = [];
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">centroid</span> = [];
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span> = <span class="hljs-number">0</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">outside</span> = <span class="hljs-literal">null</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">mark</span> = <span class="hljs-variable constant_">VISIBLE</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">edge</span> = <span class="hljs-literal">null</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">nVertices</span> = <span class="hljs-number">0</span>;
      }
      <span class="hljs-title function_">_createClass</span>(<span class="hljs-title class_">Face2</span>, [{
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;getEdge&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">getEdge</span>(<span class="hljs-params">i</span>) {
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> i !== <span class="hljs-string">&quot;number&quot;</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;requires a number&quot;</span>);
          }
          <span class="hljs-keyword">var</span> it = <span class="hljs-variable language_">this</span>.<span class="hljs-property">edge</span>;
          <span class="hljs-keyword">while</span> (i &gt; <span class="hljs-number">0</span>) {
            it = it.<span class="hljs-property">next</span>;
            i -= <span class="hljs-number">1</span>;
          }
          <span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">0</span>) {
            it = it.<span class="hljs-property">prev</span>;
            i += <span class="hljs-number">1</span>;
          }
          <span class="hljs-keyword">return</span> it;
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;computeNormal&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">computeNormal</span>(<span class="hljs-params"></span>) {
          <span class="hljs-keyword">var</span> e0 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">edge</span>;
          <span class="hljs-keyword">var</span> e1 = e0.<span class="hljs-property">next</span>;
          <span class="hljs-keyword">var</span> e2 = e1.<span class="hljs-property">next</span>;
          <span class="hljs-keyword">var</span> v2 = (<span class="hljs-number">0</span>, _subtract[<span class="hljs-string">&quot;default&quot;</span>])([], e1.<span class="hljs-title function_">head</span>().<span class="hljs-property">point</span>, e0.<span class="hljs-title function_">head</span>().<span class="hljs-property">point</span>);
          <span class="hljs-keyword">var</span> t = [];
          <span class="hljs-keyword">var</span> v1 = [];
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">nVertices</span> = <span class="hljs-number">2</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span> = [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>];
          <span class="hljs-keyword">while</span> (e2 !== e0) {
            (<span class="hljs-number">0</span>, _copy[<span class="hljs-string">&quot;default&quot;</span>])(v1, v2);
            (<span class="hljs-number">0</span>, _subtract[<span class="hljs-string">&quot;default&quot;</span>])(v2, e2.<span class="hljs-title function_">head</span>().<span class="hljs-property">point</span>, e0.<span class="hljs-title function_">head</span>().<span class="hljs-property">point</span>);
            (<span class="hljs-number">0</span>, _add[<span class="hljs-string">&quot;default&quot;</span>])(<span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span>, (<span class="hljs-number">0</span>, _cross[<span class="hljs-string">&quot;default&quot;</span>])(t, v1, v2));
            e2 = e2.<span class="hljs-property">next</span>;
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">nVertices</span> += <span class="hljs-number">1</span>;
          }
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">area</span> = (<span class="hljs-number">0</span>, _length[<span class="hljs-string">&quot;default&quot;</span>])(<span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span>);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span> = (<span class="hljs-number">0</span>, _scale[<span class="hljs-string">&quot;default&quot;</span>])(<span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span>, <span class="hljs-number">1</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">area</span>);
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;computeNormalMinArea&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">computeNormalMinArea</span>(<span class="hljs-params">minArea</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">computeNormal</span>();
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">area</span> &lt; minArea) {
            <span class="hljs-keyword">var</span> maxEdge;
            <span class="hljs-keyword">var</span> maxSquaredLength = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">var</span> edge = <span class="hljs-variable language_">this</span>.<span class="hljs-property">edge</span>;
            <span class="hljs-keyword">do</span> {
              <span class="hljs-keyword">var</span> lengthSquared = edge.<span class="hljs-title function_">lengthSquared</span>();
              <span class="hljs-keyword">if</span> (lengthSquared &gt; maxSquaredLength) {
                maxEdge = edge;
                maxSquaredLength = lengthSquared;
              }
              edge = edge.<span class="hljs-property">next</span>;
            } <span class="hljs-keyword">while</span> (edge !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">edge</span>);
            <span class="hljs-keyword">var</span> p1 = maxEdge.<span class="hljs-title function_">tail</span>().<span class="hljs-property">point</span>;
            <span class="hljs-keyword">var</span> p2 = maxEdge.<span class="hljs-title function_">head</span>().<span class="hljs-property">point</span>;
            <span class="hljs-keyword">var</span> maxVector = (<span class="hljs-number">0</span>, _subtract[<span class="hljs-string">&quot;default&quot;</span>])([], p2, p1);
            <span class="hljs-keyword">var</span> maxLength = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(maxSquaredLength);
            (<span class="hljs-number">0</span>, _scale[<span class="hljs-string">&quot;default&quot;</span>])(maxVector, maxVector, <span class="hljs-number">1</span> / maxLength);
            <span class="hljs-keyword">var</span> maxProjection = (<span class="hljs-number">0</span>, _dot[<span class="hljs-string">&quot;default&quot;</span>])(<span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span>, maxVector);
            (<span class="hljs-number">0</span>, _scaleAndAdd[<span class="hljs-string">&quot;default&quot;</span>])(<span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span>, maxVector, -maxProjection);
            (<span class="hljs-number">0</span>, _normalize[<span class="hljs-string">&quot;default&quot;</span>])(<span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span>);
          }
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;computeCentroid&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">computeCentroid</span>(<span class="hljs-params"></span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">centroid</span> = [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>];
          <span class="hljs-keyword">var</span> edge = <span class="hljs-variable language_">this</span>.<span class="hljs-property">edge</span>;
          <span class="hljs-keyword">do</span> {
            (<span class="hljs-number">0</span>, _add[<span class="hljs-string">&quot;default&quot;</span>])(<span class="hljs-variable language_">this</span>.<span class="hljs-property">centroid</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">centroid</span>, edge.<span class="hljs-title function_">head</span>().<span class="hljs-property">point</span>);
            edge = edge.<span class="hljs-property">next</span>;
          } <span class="hljs-keyword">while</span> (edge !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">edge</span>);
          (<span class="hljs-number">0</span>, _scale[<span class="hljs-string">&quot;default&quot;</span>])(<span class="hljs-variable language_">this</span>.<span class="hljs-property">centroid</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">centroid</span>, <span class="hljs-number">1</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">nVertices</span>);
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;computeNormalAndCentroid&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">computeNormalAndCentroid</span>(<span class="hljs-params">minArea</span>) {
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> minArea !== <span class="hljs-string">&quot;undefined&quot;</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">computeNormalMinArea</span>(minArea);
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">computeNormal</span>();
          }
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">computeCentroid</span>();
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span> = (<span class="hljs-number">0</span>, _dot[<span class="hljs-string">&quot;default&quot;</span>])(<span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">centroid</span>);
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;distanceToPlane&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">distanceToPlane</span>(<span class="hljs-params">point</span>) {
          <span class="hljs-keyword">return</span> (<span class="hljs-number">0</span>, _dot[<span class="hljs-string">&quot;default&quot;</span>])(<span class="hljs-variable language_">this</span>.<span class="hljs-property">normal</span>, point) - <span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span>;
        }
        <span class="hljs-comment">/**
         * <span class="hljs-doctag">@private</span>
         *
         * Connects two edges assuming that prev.head().point === next.tail().point
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HalfEdge</span>} <span class="hljs-variable">prev</span>
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HalfEdge</span>} <span class="hljs-variable">next</span>
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;connectHalfEdges&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">connectHalfEdges</span>(<span class="hljs-params">prev, next</span>) {
          <span class="hljs-keyword">var</span> discardedFace;
          <span class="hljs-keyword">if</span> (prev.<span class="hljs-property">opposite</span>.<span class="hljs-property">face</span> === next.<span class="hljs-property">opposite</span>.<span class="hljs-property">face</span>) {
            <span class="hljs-keyword">var</span> oppositeFace = next.<span class="hljs-property">opposite</span>.<span class="hljs-property">face</span>;
            <span class="hljs-keyword">var</span> oppositeEdge;
            <span class="hljs-keyword">if</span> (prev === <span class="hljs-variable language_">this</span>.<span class="hljs-property">edge</span>) {
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">edge</span> = next;
            }
            <span class="hljs-keyword">if</span> (oppositeFace.<span class="hljs-property">nVertices</span> === <span class="hljs-number">3</span>) {
              oppositeEdge = next.<span class="hljs-property">opposite</span>.<span class="hljs-property">prev</span>.<span class="hljs-property">opposite</span>;
              oppositeFace.<span class="hljs-property">mark</span> = <span class="hljs-variable constant_">DELETED</span>;
              discardedFace = oppositeFace;
            } <span class="hljs-keyword">else</span> {
              oppositeEdge = next.<span class="hljs-property">opposite</span>.<span class="hljs-property">next</span>;
              <span class="hljs-keyword">if</span> (oppositeFace.<span class="hljs-property">edge</span> === oppositeEdge.<span class="hljs-property">prev</span>) {
                oppositeFace.<span class="hljs-property">edge</span> = oppositeEdge;
              }
              oppositeEdge.<span class="hljs-property">prev</span> = oppositeEdge.<span class="hljs-property">prev</span>.<span class="hljs-property">prev</span>;
              oppositeEdge.<span class="hljs-property">prev</span>.<span class="hljs-property">next</span> = oppositeEdge;
            }
            next.<span class="hljs-property">prev</span> = prev.<span class="hljs-property">prev</span>;
            next.<span class="hljs-property">prev</span>.<span class="hljs-property">next</span> = next;
            next.<span class="hljs-title function_">setOpposite</span>(oppositeEdge);
            oppositeFace.<span class="hljs-title function_">computeNormalAndCentroid</span>();
          } <span class="hljs-keyword">else</span> {
            prev.<span class="hljs-property">next</span> = next;
            next.<span class="hljs-property">prev</span> = prev;
          }
          <span class="hljs-keyword">return</span> discardedFace;
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;mergeAdjacentFaces&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">mergeAdjacentFaces</span>(<span class="hljs-params">adjacentEdge, discardedFaces</span>) {
          <span class="hljs-keyword">var</span> oppositeEdge = adjacentEdge.<span class="hljs-property">opposite</span>;
          <span class="hljs-keyword">var</span> oppositeFace = oppositeEdge.<span class="hljs-property">face</span>;
          discardedFaces.<span class="hljs-title function_">push</span>(oppositeFace);
          oppositeFace.<span class="hljs-property">mark</span> = <span class="hljs-variable constant_">DELETED</span>;
          <span class="hljs-keyword">var</span> adjacentEdgePrev = adjacentEdge.<span class="hljs-property">prev</span>;
          <span class="hljs-keyword">var</span> adjacentEdgeNext = adjacentEdge.<span class="hljs-property">next</span>;
          <span class="hljs-keyword">var</span> oppositeEdgePrev = oppositeEdge.<span class="hljs-property">prev</span>;
          <span class="hljs-keyword">var</span> oppositeEdgeNext = oppositeEdge.<span class="hljs-property">next</span>;
          <span class="hljs-keyword">while</span> (adjacentEdgePrev.<span class="hljs-property">opposite</span>.<span class="hljs-property">face</span> === oppositeFace) {
            adjacentEdgePrev = adjacentEdgePrev.<span class="hljs-property">prev</span>;
            oppositeEdgeNext = oppositeEdgeNext.<span class="hljs-property">next</span>;
          }
          <span class="hljs-keyword">while</span> (adjacentEdgeNext.<span class="hljs-property">opposite</span>.<span class="hljs-property">face</span> === oppositeFace) {
            adjacentEdgeNext = adjacentEdgeNext.<span class="hljs-property">next</span>;
            oppositeEdgePrev = oppositeEdgePrev.<span class="hljs-property">prev</span>;
          }
          <span class="hljs-keyword">var</span> edge;
          <span class="hljs-keyword">for</span> (edge = oppositeEdgeNext; edge !== oppositeEdgePrev.<span class="hljs-property">next</span>; edge = edge.<span class="hljs-property">next</span>) {
            edge.<span class="hljs-property">face</span> = <span class="hljs-variable language_">this</span>;
          }
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">edge</span> = adjacentEdgeNext;
          <span class="hljs-keyword">var</span> discardedFace;
          discardedFace = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">connectHalfEdges</span>(oppositeEdgePrev, adjacentEdgeNext);
          <span class="hljs-keyword">if</span> (discardedFace) {
            discardedFaces.<span class="hljs-title function_">push</span>(discardedFace);
          }
          discardedFace = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">connectHalfEdges</span>(adjacentEdgePrev, oppositeEdgeNext);
          <span class="hljs-keyword">if</span> (discardedFace) {
            discardedFaces.<span class="hljs-title function_">push</span>(discardedFace);
          }
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">computeNormalAndCentroid</span>();
          <span class="hljs-keyword">return</span> discardedFaces;
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;collectIndices&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">collectIndices</span>(<span class="hljs-params"></span>) {
          <span class="hljs-keyword">var</span> indices = [];
          <span class="hljs-keyword">var</span> edge = <span class="hljs-variable language_">this</span>.<span class="hljs-property">edge</span>;
          <span class="hljs-keyword">do</span> {
            indices.<span class="hljs-title function_">push</span>(edge.<span class="hljs-title function_">head</span>().<span class="hljs-property">index</span>);
            edge = edge.<span class="hljs-property">next</span>;
          } <span class="hljs-keyword">while</span> (edge !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">edge</span>);
          <span class="hljs-keyword">return</span> indices;
        }
      }], [{
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;createTriangle&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">createTriangle</span>(<span class="hljs-params">v0, v1, v2</span>) {
          <span class="hljs-keyword">var</span> minArea = <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">3</span> &amp;&amp; <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">3</span>] !== <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> ? <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">3</span>] : <span class="hljs-number">0</span>;
          <span class="hljs-keyword">var</span> face = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Face2</span>();
          <span class="hljs-keyword">var</span> e0 = <span class="hljs-keyword">new</span> _HalfEdge[<span class="hljs-string">&quot;default&quot;</span>](v0, face);
          <span class="hljs-keyword">var</span> e1 = <span class="hljs-keyword">new</span> _HalfEdge[<span class="hljs-string">&quot;default&quot;</span>](v1, face);
          <span class="hljs-keyword">var</span> e2 = <span class="hljs-keyword">new</span> _HalfEdge[<span class="hljs-string">&quot;default&quot;</span>](v2, face);
          e0.<span class="hljs-property">next</span> = e2.<span class="hljs-property">prev</span> = e1;
          e1.<span class="hljs-property">next</span> = e0.<span class="hljs-property">prev</span> = e2;
          e2.<span class="hljs-property">next</span> = e1.<span class="hljs-property">prev</span> = e0;
          face.<span class="hljs-property">edge</span> = e0;
          face.<span class="hljs-title function_">computeNormalAndCentroid</span>(minArea);
          <span class="hljs-keyword">if</span> (debug.<span class="hljs-property">enabled</span>) {
            <span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;face created %j&quot;</span>, face.<span class="hljs-title function_">collectIndices</span>());
          }
          <span class="hljs-keyword">return</span> face;
        }
      }]);
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Face2</span>;
    }();
    <span class="hljs-built_in">exports</span>[<span class="hljs-string">&quot;default&quot;</span>] = <span class="hljs-title class_">Face</span>;
  }
});

<span class="hljs-comment">// node_modules/quickhull3d/dist/QuickHull.js</span>
<span class="hljs-keyword">var</span> require_QuickHull = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/quickhull3d/dist/QuickHull.js&quot;</span>(<span class="hljs-built_in">exports</span>) {
    <span class="hljs-string">&quot;use strict&quot;</span>;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_typeof</span>(<span class="hljs-params">obj</span>) {
      <span class="hljs-string">&quot;@babel/helpers - typeof&quot;</span>;
      <span class="hljs-keyword">return</span> _typeof = <span class="hljs-string">&quot;function&quot;</span> == <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Symbol</span> &amp;&amp; <span class="hljs-string">&quot;symbol&quot;</span> == <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span> ? <span class="hljs-keyword">function</span>(<span class="hljs-params">obj2</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> obj2;
      } : <span class="hljs-keyword">function</span>(<span class="hljs-params">obj2</span>) {
        <span class="hljs-keyword">return</span> obj2 &amp;&amp; <span class="hljs-string">&quot;function&quot;</span> == <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Symbol</span> &amp;&amp; obj2.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Symbol</span> &amp;&amp; obj2 !== <span class="hljs-title class_">Symbol</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> ? <span class="hljs-string">&quot;symbol&quot;</span> : <span class="hljs-keyword">typeof</span> obj2;
      }, <span class="hljs-title function_">_typeof</span>(obj);
    }
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-string">&quot;__esModule&quot;</span>, {
      <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>
    });
    <span class="hljs-built_in">exports</span>[<span class="hljs-string">&quot;default&quot;</span>] = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> _pointLineDistance = <span class="hljs-title function_">_interopRequireDefault</span>(require_point_line_distance());
    <span class="hljs-keyword">var</span> _getPlaneNormal = <span class="hljs-title function_">_interopRequireDefault</span>(require_get_plane_normal());
    <span class="hljs-keyword">var</span> _dot = <span class="hljs-title function_">_interopRequireDefault</span>(require_dot());
    <span class="hljs-keyword">var</span> _VertexList = <span class="hljs-title function_">_interopRequireDefault</span>(require_VertexList());
    <span class="hljs-keyword">var</span> _Vertex = <span class="hljs-title function_">_interopRequireDefault</span>(require_Vertex());
    <span class="hljs-keyword">var</span> _Face = <span class="hljs-title function_">_interopRequireWildcard</span>(require_Face());
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_getRequireWildcardCache</span>(<span class="hljs-params">nodeInterop</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">WeakMap</span> !== <span class="hljs-string">&quot;function&quot;</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">var</span> cacheBabelInterop = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
      <span class="hljs-keyword">var</span> cacheNodeInterop = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
      <span class="hljs-keyword">return</span> (_getRequireWildcardCache = <span class="hljs-keyword">function</span> <span class="hljs-title function_">_getRequireWildcardCache2</span>(<span class="hljs-params">nodeInterop2</span>) {
        <span class="hljs-keyword">return</span> nodeInterop2 ? cacheNodeInterop : cacheBabelInterop;
      })(nodeInterop);
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_interopRequireWildcard</span>(<span class="hljs-params">obj, nodeInterop</span>) {
      <span class="hljs-keyword">if</span> (!nodeInterop &amp;&amp; obj &amp;&amp; obj.<span class="hljs-property">__esModule</span>) {
        <span class="hljs-keyword">return</span> obj;
      }
      <span class="hljs-keyword">if</span> (obj === <span class="hljs-literal">null</span> || <span class="hljs-title function_">_typeof</span>(obj) !== <span class="hljs-string">&quot;object&quot;</span> &amp;&amp; <span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">&quot;function&quot;</span>) {
        <span class="hljs-keyword">return</span> { <span class="hljs-string">&quot;default&quot;</span>: obj };
      }
      <span class="hljs-keyword">var</span> cache = <span class="hljs-title function_">_getRequireWildcardCache</span>(nodeInterop);
      <span class="hljs-keyword">if</span> (cache &amp;&amp; cache.<span class="hljs-title function_">has</span>(obj)) {
        <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">get</span>(obj);
      }
      <span class="hljs-keyword">var</span> newObj = {};
      <span class="hljs-keyword">var</span> hasPropertyDescriptor = <span class="hljs-title class_">Object</span>.<span class="hljs-property">defineProperty</span> &amp;&amp; <span class="hljs-title class_">Object</span>.<span class="hljs-property">getOwnPropertyDescriptor</span>;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj) {
        <span class="hljs-keyword">if</span> (key !== <span class="hljs-string">&quot;default&quot;</span> &amp;&amp; <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>.<span class="hljs-title function_">call</span>(obj, key)) {
          <span class="hljs-keyword">var</span> desc = hasPropertyDescriptor ? <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(obj, key) : <span class="hljs-literal">null</span>;
          <span class="hljs-keyword">if</span> (desc &amp;&amp; (desc.<span class="hljs-property">get</span> || desc.<span class="hljs-property">set</span>)) {
            <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(newObj, key, desc);
          } <span class="hljs-keyword">else</span> {
            newObj[key] = obj[key];
          }
        }
      }
      newObj[<span class="hljs-string">&quot;default&quot;</span>] = obj;
      <span class="hljs-keyword">if</span> (cache) {
        cache.<span class="hljs-title function_">set</span>(obj, newObj);
      }
      <span class="hljs-keyword">return</span> newObj;
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_interopRequireDefault</span>(<span class="hljs-params">obj</span>) {
      <span class="hljs-keyword">return</span> obj &amp;&amp; obj.<span class="hljs-property">__esModule</span> ? obj : { <span class="hljs-string">&quot;default&quot;</span>: obj };
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_slicedToArray</span>(<span class="hljs-params">arr, i</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">_arrayWithHoles</span>(arr) || <span class="hljs-title function_">_iterableToArrayLimit</span>(arr, i) || <span class="hljs-title function_">_unsupportedIterableToArray</span>(arr, i) || <span class="hljs-title function_">_nonIterableRest</span>();
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_nonIterableRest</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">&quot;Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.&quot;</span>);
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_unsupportedIterableToArray</span>(<span class="hljs-params">o, minLen</span>) {
      <span class="hljs-keyword">if</span> (!o) <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> o === <span class="hljs-string">&quot;string&quot;</span>) <span class="hljs-keyword">return</span> <span class="hljs-title function_">_arrayLikeToArray</span>(o, minLen);
      <span class="hljs-keyword">var</span> n = <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(o).<span class="hljs-title function_">slice</span>(<span class="hljs-number">8</span>, -<span class="hljs-number">1</span>);
      <span class="hljs-keyword">if</span> (n === <span class="hljs-string">&quot;Object&quot;</span> &amp;&amp; o.<span class="hljs-property">constructor</span>) n = o.<span class="hljs-property">constructor</span>.<span class="hljs-property">name</span>;
      <span class="hljs-keyword">if</span> (n === <span class="hljs-string">&quot;Map&quot;</span> || n === <span class="hljs-string">&quot;Set&quot;</span>) <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(o);
      <span class="hljs-keyword">if</span> (n === <span class="hljs-string">&quot;Arguments&quot;</span> || <span class="hljs-regexp">/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/</span>.<span class="hljs-title function_">test</span>(n)) <span class="hljs-keyword">return</span> <span class="hljs-title function_">_arrayLikeToArray</span>(o, minLen);
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_arrayLikeToArray</span>(<span class="hljs-params">arr, len</span>) {
      <span class="hljs-keyword">if</span> (len == <span class="hljs-literal">null</span> || len &gt; arr.<span class="hljs-property">length</span>) len = arr.<span class="hljs-property">length</span>;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, arr2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(len); i &lt; len; i++) {
        arr2[i] = arr[i];
      }
      <span class="hljs-keyword">return</span> arr2;
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_iterableToArrayLimit</span>(<span class="hljs-params">arr, i</span>) {
      <span class="hljs-keyword">var</span> _i = arr == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Symbol</span> !== <span class="hljs-string">&quot;undefined&quot;</span> &amp;&amp; arr[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>] || arr[<span class="hljs-string">&quot;@@iterator&quot;</span>];
      <span class="hljs-keyword">if</span> (_i == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">var</span> _arr = [];
      <span class="hljs-keyword">var</span> _n = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">var</span> _d = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">var</span> _s, _e;
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">for</span> (_i = _i.<span class="hljs-title function_">call</span>(arr); !(_n = (_s = _i.<span class="hljs-title function_">next</span>()).<span class="hljs-property">done</span>); _n = <span class="hljs-literal">true</span>) {
          _arr.<span class="hljs-title function_">push</span>(_s.<span class="hljs-property">value</span>);
          <span class="hljs-keyword">if</span> (i &amp;&amp; _arr.<span class="hljs-property">length</span> === i) <span class="hljs-keyword">break</span>;
        }
      } <span class="hljs-keyword">catch</span> (err) {
        _d = <span class="hljs-literal">true</span>;
        _e = err;
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-keyword">if</span> (!_n &amp;&amp; _i[<span class="hljs-string">&quot;return&quot;</span>] != <span class="hljs-literal">null</span>) _i[<span class="hljs-string">&quot;return&quot;</span>]();
        } <span class="hljs-keyword">finally</span> {
          <span class="hljs-keyword">if</span> (_d) <span class="hljs-keyword">throw</span> _e;
        }
      }
      <span class="hljs-keyword">return</span> _arr;
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_arrayWithHoles</span>(<span class="hljs-params">arr</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(arr)) <span class="hljs-keyword">return</span> arr;
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_classCallCheck</span>(<span class="hljs-params">instance, Constructor</span>) {
      <span class="hljs-keyword">if</span> (!(instance <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Constructor</span>)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">&quot;Cannot call a class as a function&quot;</span>);
      }
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-params">target, props</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; props.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-keyword">var</span> descriptor = props[i];
        descriptor.<span class="hljs-property">enumerable</span> = descriptor.<span class="hljs-property">enumerable</span> || <span class="hljs-literal">false</span>;
        descriptor.<span class="hljs-property">configurable</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;value&quot;</span> <span class="hljs-keyword">in</span> descriptor) descriptor.<span class="hljs-property">writable</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(target, descriptor.<span class="hljs-property">key</span>, descriptor);
      }
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_createClass</span>(<span class="hljs-params">Constructor, protoProps, staticProps</span>) {
      <span class="hljs-keyword">if</span> (protoProps) <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-title class_">Constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, protoProps);
      <span class="hljs-keyword">if</span> (staticProps) <span class="hljs-title function_">_defineProperties</span>(<span class="hljs-title class_">Constructor</span>, staticProps);
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-title class_">Constructor</span>, <span class="hljs-string">&quot;prototype&quot;</span>, { <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span> });
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Constructor</span>;
    }
    <span class="hljs-keyword">var</span> debug = require_browser()(<span class="hljs-string">&quot;quickhull&quot;</span>);
    <span class="hljs-keyword">var</span> <span class="hljs-variable constant_">MERGE_NON_CONVEX_WRT_LARGER_FACE</span> = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">var</span> <span class="hljs-variable constant_">MERGE_NON_CONVEX</span> = <span class="hljs-number">2</span>;
    <span class="hljs-keyword">var</span> <span class="hljs-title class_">QuickHull</span> = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">QuickHull2</span>(<span class="hljs-params">points</span>) {
        <span class="hljs-title function_">_classCallCheck</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-title class_">QuickHull2</span>);
        <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(points)) {
          <span class="hljs-keyword">throw</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">&quot;input is not a valid array&quot;</span>);
        }
        <span class="hljs-keyword">if</span> (points.<span class="hljs-property">length</span> &lt; <span class="hljs-number">4</span>) {
          <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;cannot build a simplex out of &lt;4 points&quot;</span>);
        }
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span> = -<span class="hljs-number">1</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">nFaces</span> = <span class="hljs-number">0</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">nPoints</span> = points.<span class="hljs-property">length</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">faces</span> = [];
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">newFaces</span> = [];
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">claimed</span> = <span class="hljs-keyword">new</span> _VertexList[<span class="hljs-string">&quot;default&quot;</span>]();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">unclaimed</span> = <span class="hljs-keyword">new</span> _VertexList[<span class="hljs-string">&quot;default&quot;</span>]();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertices</span> = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; points.<span class="hljs-property">length</span>; i += <span class="hljs-number">1</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertices</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> _Vertex[<span class="hljs-string">&quot;default&quot;</span>](points[i], i));
        }
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">discardedFaces</span> = [];
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertexPointIndices</span> = [];
      }
      <span class="hljs-title function_">_createClass</span>(<span class="hljs-title class_">QuickHull2</span>, [{
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;addVertexToFace&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">addVertexToFace</span>(<span class="hljs-params">vertex, face</span>) {
          vertex.<span class="hljs-property">face</span> = face;
          <span class="hljs-keyword">if</span> (!face.<span class="hljs-property">outside</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">claimed</span>.<span class="hljs-title function_">add</span>(vertex);
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">claimed</span>.<span class="hljs-title function_">insertBefore</span>(face.<span class="hljs-property">outside</span>, vertex);
          }
          face.<span class="hljs-property">outside</span> = vertex;
        }
        <span class="hljs-comment">/**
         * Removes `vertex` for the `claimed` list of vertices, it also makes sure
         * that the link from `face` to the first vertex it sees in `claimed` is
         * linked correctly after the removal
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Vertex</span>} <span class="hljs-variable">vertex</span>
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Face</span>} <span class="hljs-variable">face</span>
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;removeVertexFromFace&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">removeVertexFromFace</span>(<span class="hljs-params">vertex, face</span>) {
          <span class="hljs-keyword">if</span> (vertex === face.<span class="hljs-property">outside</span>) {
            <span class="hljs-keyword">if</span> (vertex.<span class="hljs-property">next</span> &amp;&amp; vertex.<span class="hljs-property">next</span>.<span class="hljs-property">face</span> === face) {
              face.<span class="hljs-property">outside</span> = vertex.<span class="hljs-property">next</span>;
            } <span class="hljs-keyword">else</span> {
              face.<span class="hljs-property">outside</span> = <span class="hljs-literal">null</span>;
            }
          }
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">claimed</span>.<span class="hljs-title function_">remove</span>(vertex);
        }
        <span class="hljs-comment">/**
         * Removes all the visible vertices that `face` is able to see which are
         * stored in the `claimed` vertext list
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Face</span>} <span class="hljs-variable">face</span>
         * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Vertex|undefined</span>} If face had visible vertices returns
         * `face.outside`, otherwise undefined
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;removeAllVerticesFromFace&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">removeAllVerticesFromFace</span>(<span class="hljs-params">face</span>) {
          <span class="hljs-keyword">if</span> (face.<span class="hljs-property">outside</span>) {
            <span class="hljs-keyword">var</span> end = face.<span class="hljs-property">outside</span>;
            <span class="hljs-keyword">while</span> (end.<span class="hljs-property">next</span> &amp;&amp; end.<span class="hljs-property">next</span>.<span class="hljs-property">face</span> === face) {
              end = end.<span class="hljs-property">next</span>;
            }
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">claimed</span>.<span class="hljs-title function_">removeChain</span>(face.<span class="hljs-property">outside</span>, end);
            end.<span class="hljs-property">next</span> = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">return</span> face.<span class="hljs-property">outside</span>;
          }
        }
        <span class="hljs-comment">/**
         * Removes all the visible vertices that `face` is able to see, additionally
         * checking the following:
         *
         * If `absorbingFace` doesn&#x27;t exist then all the removed vertices will be
         * added to the `unclaimed` vertex list
         *
         * If `absorbingFace` exists then this method will assign all the vertices of
         * `face` that can see `absorbingFace`, if a vertex cannot see `absorbingFace`
         * it&#x27;s added to the `unclaimed` vertex list
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Face</span>} <span class="hljs-variable">face</span>
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Face</span>} [absorbingFace]
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;deleteFaceVertices&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteFaceVertices</span>(<span class="hljs-params">face, absorbingFace</span>) {
          <span class="hljs-keyword">var</span> faceVertices = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeAllVerticesFromFace</span>(face);
          <span class="hljs-keyword">if</span> (faceVertices) {
            <span class="hljs-keyword">if</span> (!absorbingFace) {
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">unclaimed</span>.<span class="hljs-title function_">addAll</span>(faceVertices);
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">var</span> nextVertex;
              <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> vertex = faceVertices; vertex; vertex = nextVertex) {
                nextVertex = vertex.<span class="hljs-property">next</span>;
                <span class="hljs-keyword">var</span> distance = absorbingFace.<span class="hljs-title function_">distanceToPlane</span>(vertex.<span class="hljs-property">point</span>);
                <span class="hljs-keyword">if</span> (distance &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span>) {
                  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addVertexToFace</span>(vertex, absorbingFace);
                } <span class="hljs-keyword">else</span> {
                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">unclaimed</span>.<span class="hljs-title function_">add</span>(vertex);
                }
              }
            }
          }
        }
        <span class="hljs-comment">/**
         * Reassigns as many vertices as possible from the unclaimed list to the new
         * faces
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Faces[]</span>} <span class="hljs-variable">newFaces</span>
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;resolveUnclaimedPoints&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">resolveUnclaimedPoints</span>(<span class="hljs-params">newFaces</span>) {
          <span class="hljs-keyword">var</span> vertexNext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">unclaimed</span>.<span class="hljs-title function_">first</span>();
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> vertex = vertexNext; vertex; vertex = vertexNext) {
            vertexNext = vertex.<span class="hljs-property">next</span>;
            <span class="hljs-keyword">var</span> maxDistance = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span>;
            <span class="hljs-keyword">var</span> maxFace = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; newFaces.<span class="hljs-property">length</span>; i += <span class="hljs-number">1</span>) {
              <span class="hljs-keyword">var</span> face = newFaces[i];
              <span class="hljs-keyword">if</span> (face.<span class="hljs-property">mark</span> === _Face.<span class="hljs-property">VISIBLE</span>) {
                <span class="hljs-keyword">var</span> dist = face.<span class="hljs-title function_">distanceToPlane</span>(vertex.<span class="hljs-property">point</span>);
                <span class="hljs-keyword">if</span> (dist &gt; maxDistance) {
                  maxDistance = dist;
                  maxFace = face;
                }
                <span class="hljs-keyword">if</span> (maxDistance &gt; <span class="hljs-number">1e3</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span>) {
                  <span class="hljs-keyword">break</span>;
                }
              }
            }
            <span class="hljs-keyword">if</span> (maxFace) {
              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addVertexToFace</span>(vertex, maxFace);
            }
          }
        }
        <span class="hljs-comment">/**
         * Computes the extremes of a tetrahedron which will be the initial hull
         *
         * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number[]</span>} The min/max vertices in the x,y,z directions
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;computeExtremes&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">computeExtremes</span>(<span class="hljs-params"></span>) {
          <span class="hljs-keyword">var</span> me = <span class="hljs-variable language_">this</span>;
          <span class="hljs-keyword">var</span> min = [];
          <span class="hljs-keyword">var</span> max = [];
          <span class="hljs-keyword">var</span> minVertices = [];
          <span class="hljs-keyword">var</span> maxVertices = [];
          <span class="hljs-keyword">var</span> i, j;
          <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i += <span class="hljs-number">1</span>) {
            minVertices[i] = maxVertices[i] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertices</span>[<span class="hljs-number">0</span>];
          }
          <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i += <span class="hljs-number">1</span>) {
            min[i] = max[i] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">point</span>[i];
          }
          <span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertices</span>.<span class="hljs-property">length</span>; i += <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">var</span> vertex = <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertices</span>[i];
            <span class="hljs-keyword">var</span> point = vertex.<span class="hljs-property">point</span>;
            <span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j += <span class="hljs-number">1</span>) {
              <span class="hljs-keyword">if</span> (point[j] &lt; min[j]) {
                min[j] = point[j];
                minVertices[j] = vertex;
              }
            }
            <span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j += <span class="hljs-number">1</span>) {
              <span class="hljs-keyword">if</span> (point[j] &gt; max[j]) {
                max[j] = point[j];
                maxVertices[j] = vertex;
              }
            }
          }
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span> = <span class="hljs-number">3</span> * <span class="hljs-title class_">Number</span>.<span class="hljs-property">EPSILON</span> * (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(min[<span class="hljs-number">0</span>]), <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(max[<span class="hljs-number">0</span>])) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(min[<span class="hljs-number">1</span>]), <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(max[<span class="hljs-number">1</span>])) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(min[<span class="hljs-number">2</span>]), <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(max[<span class="hljs-number">2</span>])));
          <span class="hljs-keyword">if</span> (debug.<span class="hljs-property">enabled</span>) {
            <span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;tolerance %d&quot;</span>, me.<span class="hljs-property">tolerance</span>);
          }
          <span class="hljs-keyword">return</span> [minVertices, maxVertices];
        }
        <span class="hljs-comment">/**
         * Compues the initial tetrahedron assigning to its faces all the points that
         * are candidates to form part of the hull
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;createInitialSimplex&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">createInitialSimplex</span>(<span class="hljs-params"></span>) {
          <span class="hljs-keyword">var</span> vertices = <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertices</span>;
          <span class="hljs-keyword">var</span> _this$computeExtremes = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">computeExtremes</span>(), _this$computeExtremes2 = <span class="hljs-title function_">_slicedToArray</span>(_this$computeExtremes, <span class="hljs-number">2</span>), min = _this$computeExtremes2[<span class="hljs-number">0</span>], max = _this$computeExtremes2[<span class="hljs-number">1</span>];
          <span class="hljs-keyword">var</span> i, j;
          <span class="hljs-keyword">var</span> maxDistance = <span class="hljs-number">0</span>;
          <span class="hljs-keyword">var</span> indexMax = <span class="hljs-number">0</span>;
          <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i += <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">var</span> distance = max[i].<span class="hljs-property">point</span>[i] - min[i].<span class="hljs-property">point</span>[i];
            <span class="hljs-keyword">if</span> (distance &gt; maxDistance) {
              maxDistance = distance;
              indexMax = i;
            }
          }
          <span class="hljs-keyword">var</span> v0 = min[indexMax];
          <span class="hljs-keyword">var</span> v1 = max[indexMax];
          <span class="hljs-keyword">var</span> v2, v3;
          maxDistance = <span class="hljs-number">0</span>;
          <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertices</span>.<span class="hljs-property">length</span>; i += <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">var</span> vertex = <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertices</span>[i];
            <span class="hljs-keyword">if</span> (vertex !== v0 &amp;&amp; vertex !== v1) {
              <span class="hljs-keyword">var</span> _distance = (<span class="hljs-number">0</span>, _pointLineDistance[<span class="hljs-string">&quot;default&quot;</span>])(vertex.<span class="hljs-property">point</span>, v0.<span class="hljs-property">point</span>, v1.<span class="hljs-property">point</span>);
              <span class="hljs-keyword">if</span> (_distance &gt; maxDistance) {
                maxDistance = _distance;
                v2 = vertex;
              }
            }
          }
          <span class="hljs-keyword">var</span> normal = (<span class="hljs-number">0</span>, _getPlaneNormal[<span class="hljs-string">&quot;default&quot;</span>])([], v0.<span class="hljs-property">point</span>, v1.<span class="hljs-property">point</span>, v2.<span class="hljs-property">point</span>);
          <span class="hljs-keyword">var</span> distPO = (<span class="hljs-number">0</span>, _dot[<span class="hljs-string">&quot;default&quot;</span>])(v0.<span class="hljs-property">point</span>, normal);
          maxDistance = -<span class="hljs-number">1</span>;
          <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertices</span>.<span class="hljs-property">length</span>; i += <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">var</span> _vertex = <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertices</span>[i];
            <span class="hljs-keyword">if</span> (_vertex !== v0 &amp;&amp; _vertex !== v1 &amp;&amp; _vertex !== v2) {
              <span class="hljs-keyword">var</span> _distance2 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>((<span class="hljs-number">0</span>, _dot[<span class="hljs-string">&quot;default&quot;</span>])(normal, _vertex.<span class="hljs-property">point</span>) - distPO);
              <span class="hljs-keyword">if</span> (_distance2 &gt; maxDistance) {
                maxDistance = _distance2;
                v3 = _vertex;
              }
            }
          }
          <span class="hljs-keyword">var</span> faces = [];
          <span class="hljs-keyword">if</span> ((<span class="hljs-number">0</span>, _dot[<span class="hljs-string">&quot;default&quot;</span>])(v3.<span class="hljs-property">point</span>, normal) - distPO &lt; <span class="hljs-number">0</span>) {
            faces.<span class="hljs-title function_">push</span>(_Face[<span class="hljs-string">&quot;default&quot;</span>].<span class="hljs-title function_">createTriangle</span>(v0, v1, v2), _Face[<span class="hljs-string">&quot;default&quot;</span>].<span class="hljs-title function_">createTriangle</span>(v3, v1, v0), _Face[<span class="hljs-string">&quot;default&quot;</span>].<span class="hljs-title function_">createTriangle</span>(v3, v2, v1), _Face[<span class="hljs-string">&quot;default&quot;</span>].<span class="hljs-title function_">createTriangle</span>(v3, v0, v2));
            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i += <span class="hljs-number">1</span>) {
              <span class="hljs-keyword">var</span> _j = (i + <span class="hljs-number">1</span>) % <span class="hljs-number">3</span>;
              faces[i + <span class="hljs-number">1</span>].<span class="hljs-title function_">getEdge</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">setOpposite</span>(faces[<span class="hljs-number">0</span>].<span class="hljs-title function_">getEdge</span>(_j));
              faces[i + <span class="hljs-number">1</span>].<span class="hljs-title function_">getEdge</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">setOpposite</span>(faces[_j + <span class="hljs-number">1</span>].<span class="hljs-title function_">getEdge</span>(<span class="hljs-number">0</span>));
            }
          } <span class="hljs-keyword">else</span> {
            faces.<span class="hljs-title function_">push</span>(_Face[<span class="hljs-string">&quot;default&quot;</span>].<span class="hljs-title function_">createTriangle</span>(v0, v2, v1), _Face[<span class="hljs-string">&quot;default&quot;</span>].<span class="hljs-title function_">createTriangle</span>(v3, v0, v1), _Face[<span class="hljs-string">&quot;default&quot;</span>].<span class="hljs-title function_">createTriangle</span>(v3, v1, v2), _Face[<span class="hljs-string">&quot;default&quot;</span>].<span class="hljs-title function_">createTriangle</span>(v3, v2, v0));
            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i += <span class="hljs-number">1</span>) {
              <span class="hljs-keyword">var</span> _j2 = (i + <span class="hljs-number">1</span>) % <span class="hljs-number">3</span>;
              faces[i + <span class="hljs-number">1</span>].<span class="hljs-title function_">getEdge</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">setOpposite</span>(faces[<span class="hljs-number">0</span>].<span class="hljs-title function_">getEdge</span>((<span class="hljs-number">3</span> - i) % <span class="hljs-number">3</span>));
              faces[i + <span class="hljs-number">1</span>].<span class="hljs-title function_">getEdge</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">setOpposite</span>(faces[_j2 + <span class="hljs-number">1</span>].<span class="hljs-title function_">getEdge</span>(<span class="hljs-number">1</span>));
            }
          }
          <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i += <span class="hljs-number">1</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">faces</span>.<span class="hljs-title function_">push</span>(faces[i]);
          }
          <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; vertices.<span class="hljs-property">length</span>; i += <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">var</span> _vertex2 = vertices[i];
            <span class="hljs-keyword">if</span> (_vertex2 !== v0 &amp;&amp; _vertex2 !== v1 &amp;&amp; _vertex2 !== v2 &amp;&amp; _vertex2 !== v3) {
              maxDistance = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span>;
              <span class="hljs-keyword">var</span> maxFace = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
              <span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">4</span>; j += <span class="hljs-number">1</span>) {
                <span class="hljs-keyword">var</span> _distance3 = faces[j].<span class="hljs-title function_">distanceToPlane</span>(_vertex2.<span class="hljs-property">point</span>);
                <span class="hljs-keyword">if</span> (_distance3 &gt; maxDistance) {
                  maxDistance = _distance3;
                  maxFace = faces[j];
                }
              }
              <span class="hljs-keyword">if</span> (maxFace) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addVertexToFace</span>(_vertex2, maxFace);
              }
            }
          }
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;reindexFaceAndVertices&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">reindexFaceAndVertices</span>(<span class="hljs-params"></span>) {
          <span class="hljs-keyword">var</span> activeFaces = [];
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">faces</span>.<span class="hljs-property">length</span>; i += <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">var</span> face = <span class="hljs-variable language_">this</span>.<span class="hljs-property">faces</span>[i];
            <span class="hljs-keyword">if</span> (face.<span class="hljs-property">mark</span> === _Face.<span class="hljs-property">VISIBLE</span>) {
              activeFaces.<span class="hljs-title function_">push</span>(face);
            }
          }
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">faces</span> = activeFaces;
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;collectFaces&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">collectFaces</span>(<span class="hljs-params">skipTriangulation</span>) {
          <span class="hljs-keyword">var</span> faceIndices = [];
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">faces</span>.<span class="hljs-property">length</span>; i += <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">faces</span>[i].<span class="hljs-property">mark</span> !== _Face.<span class="hljs-property">VISIBLE</span>) {
              <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;attempt to include a destroyed face in the hull&quot;</span>);
            }
            <span class="hljs-keyword">var</span> indices = <span class="hljs-variable language_">this</span>.<span class="hljs-property">faces</span>[i].<span class="hljs-title function_">collectIndices</span>();
            <span class="hljs-keyword">if</span> (skipTriangulation) {
              faceIndices.<span class="hljs-title function_">push</span>(indices);
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; indices.<span class="hljs-property">length</span> - <span class="hljs-number">2</span>; j += <span class="hljs-number">1</span>) {
                faceIndices.<span class="hljs-title function_">push</span>([indices[<span class="hljs-number">0</span>], indices[j + <span class="hljs-number">1</span>], indices[j + <span class="hljs-number">2</span>]]);
              }
            }
          }
          <span class="hljs-keyword">return</span> faceIndices;
        }
        <span class="hljs-comment">/**
         * Finds the next vertex to make faces with the current hull
         *
         * - let `face` be the first face existing in the `claimed` vertex list
         *  - if `face` doesn&#x27;t exist then return since there&#x27;re no vertices left
         *  - otherwise for each `vertex` that face sees find the one furthest away
         *  from `face`
         *
         * <span class="hljs-doctag">@return</span> {<span class="hljs-type">Vertex|undefined</span>} Returns undefined when there&#x27;re no more
         * visible vertices
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;nextVertexToAdd&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">nextVertexToAdd</span>(<span class="hljs-params"></span>) {
          <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">claimed</span>.<span class="hljs-title function_">isEmpty</span>()) {
            <span class="hljs-keyword">var</span> eyeVertex, vertex;
            <span class="hljs-keyword">var</span> maxDistance = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">var</span> eyeFace = <span class="hljs-variable language_">this</span>.<span class="hljs-property">claimed</span>.<span class="hljs-title function_">first</span>().<span class="hljs-property">face</span>;
            <span class="hljs-keyword">for</span> (vertex = eyeFace.<span class="hljs-property">outside</span>; vertex &amp;&amp; vertex.<span class="hljs-property">face</span> === eyeFace; vertex = vertex.<span class="hljs-property">next</span>) {
              <span class="hljs-keyword">var</span> distance = eyeFace.<span class="hljs-title function_">distanceToPlane</span>(vertex.<span class="hljs-property">point</span>);
              <span class="hljs-keyword">if</span> (distance &gt; maxDistance) {
                maxDistance = distance;
                eyeVertex = vertex;
              }
            }
            <span class="hljs-keyword">return</span> eyeVertex;
          }
        }
        <span class="hljs-comment">/**
         * Computes a chain of half edges in ccw order called the `horizon`, for an
         * edge to be part of the horizon it must join a face that can see
         * `eyePoint` and a face that cannot see `eyePoint`
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">eyePoint</span> - The coordinates of a point
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HalfEdge</span>} <span class="hljs-variable">crossEdge</span> - The edge used to jump to the current `face`
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Face</span>} <span class="hljs-variable">face</span> - The current face being tested
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HalfEdge[]</span>} <span class="hljs-variable">horizon</span> - The edges that form part of the horizon in
         * ccw order
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;computeHorizon&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">computeHorizon</span>(<span class="hljs-params">eyePoint, crossEdge, face, horizon</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deleteFaceVertices</span>(face);
          face.<span class="hljs-property">mark</span> = _Face.<span class="hljs-property">DELETED</span>;
          <span class="hljs-keyword">var</span> edge;
          <span class="hljs-keyword">if</span> (!crossEdge) {
            edge = crossEdge = face.<span class="hljs-title function_">getEdge</span>(<span class="hljs-number">0</span>);
          } <span class="hljs-keyword">else</span> {
            edge = crossEdge.<span class="hljs-property">next</span>;
          }
          <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">var</span> oppositeEdge = edge.<span class="hljs-property">opposite</span>;
            <span class="hljs-keyword">var</span> oppositeFace = oppositeEdge.<span class="hljs-property">face</span>;
            <span class="hljs-keyword">if</span> (oppositeFace.<span class="hljs-property">mark</span> === _Face.<span class="hljs-property">VISIBLE</span>) {
              <span class="hljs-keyword">if</span> (oppositeFace.<span class="hljs-title function_">distanceToPlane</span>(eyePoint) &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span>) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">computeHorizon</span>(eyePoint, oppositeEdge, oppositeFace, horizon);
              } <span class="hljs-keyword">else</span> {
                horizon.<span class="hljs-title function_">push</span>(edge);
              }
            }
            edge = edge.<span class="hljs-property">next</span>;
          } <span class="hljs-keyword">while</span> (edge !== crossEdge);
        }
        <span class="hljs-comment">/**
         * Creates a face with the points `eyeVertex.point`, `horizonEdge.tail` and
         * `horizonEdge.tail` in ccw order
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Vertex</span>} <span class="hljs-variable">eyeVertex</span>
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HalfEdge</span>} <span class="hljs-variable">horizonEdge</span>
         * <span class="hljs-doctag">@return</span> {<span class="hljs-type">HalfEdge</span>} The half edge whose vertex is the eyeVertex
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;addAdjoiningFace&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">addAdjoiningFace</span>(<span class="hljs-params">eyeVertex, horizonEdge</span>) {
          <span class="hljs-keyword">var</span> face = _Face[<span class="hljs-string">&quot;default&quot;</span>].<span class="hljs-title function_">createTriangle</span>(eyeVertex, horizonEdge.<span class="hljs-title function_">tail</span>(), horizonEdge.<span class="hljs-title function_">head</span>());
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">faces</span>.<span class="hljs-title function_">push</span>(face);
          face.<span class="hljs-title function_">getEdge</span>(-<span class="hljs-number">1</span>).<span class="hljs-title function_">setOpposite</span>(horizonEdge.<span class="hljs-property">opposite</span>);
          <span class="hljs-keyword">return</span> face.<span class="hljs-title function_">getEdge</span>(<span class="hljs-number">0</span>);
        }
        <span class="hljs-comment">/**
         * Adds horizon.length faces to the hull, each face will be &#x27;linked&#x27; with the
         * horizon opposite face and the face on the left/right
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Vertex</span>} <span class="hljs-variable">eyeVertex</span>
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HalfEdge[]</span>} <span class="hljs-variable">horizon</span> - A chain of half edges in ccw order
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;addNewFaces&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">addNewFaces</span>(<span class="hljs-params">eyeVertex, horizon</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">newFaces</span> = [];
          <span class="hljs-keyword">var</span> firstSideEdge, previousSideEdge;
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; horizon.<span class="hljs-property">length</span>; i += <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">var</span> horizonEdge = horizon[i];
            <span class="hljs-keyword">var</span> sideEdge = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addAdjoiningFace</span>(eyeVertex, horizonEdge);
            <span class="hljs-keyword">if</span> (!firstSideEdge) {
              firstSideEdge = sideEdge;
            } <span class="hljs-keyword">else</span> {
              sideEdge.<span class="hljs-property">next</span>.<span class="hljs-title function_">setOpposite</span>(previousSideEdge);
            }
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">newFaces</span>.<span class="hljs-title function_">push</span>(sideEdge.<span class="hljs-property">face</span>);
            previousSideEdge = sideEdge;
          }
          firstSideEdge.<span class="hljs-property">next</span>.<span class="hljs-title function_">setOpposite</span>(previousSideEdge);
        }
        <span class="hljs-comment">/**
         * Computes the distance from `edge` opposite face&#x27;s centroid to
         * `edge.face`
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HalfEdge</span>} <span class="hljs-variable">edge</span>
         * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number</span>}
         * - A positive number when the centroid of the opposite face is above the
         *   face i.e. when the faces are concave
         * - A negative number when the centroid of the opposite face is below the
         *   face i.e. when the faces are convex
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;oppositeFaceDistance&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">oppositeFaceDistance</span>(<span class="hljs-params">edge</span>) {
          <span class="hljs-keyword">return</span> edge.<span class="hljs-property">face</span>.<span class="hljs-title function_">distanceToPlane</span>(edge.<span class="hljs-property">opposite</span>.<span class="hljs-property">face</span>.<span class="hljs-property">centroid</span>);
        }
        <span class="hljs-comment">/**
         * Merges a face with none/any/all its neighbors according to the strategy
         * used
         *
         * if `mergeType` is MERGE_NON_CONVEX_WRT_LARGER_FACE then the merge will be
         * decided based on the face with the larger area, the centroid of the face
         * with the smaller area will be checked against the one with the larger area
         * to see if it&#x27;s in the merge range [tolerance, -tolerance] i.e.
         *
         *    dot(centroid smaller face, larger face normal) - larger face offset &gt; -tolerance
         *
         * Note that the first check (with +tolerance) was done on `computeHorizon`
         *
         * If the above is not true then the check is done with respect to the smaller
         * face i.e.
         *
         *    dot(centroid larger face, smaller face normal) - smaller face offset &gt; -tolerance
         *
         * If true then it means that two faces are non convex (concave), even if the
         * dot(...) - offset value is &gt; 0 (that&#x27;s the point of doing the merge in the
         * first place)
         *
         * If two faces are concave then the check must also be done on the other face
         * but this is done in another merge pass, for this to happen the face is
         * marked in a temporal NON_CONVEX state
         *
         * if `mergeType` is MERGE_NON_CONVEX then two faces will be merged only if
         * they pass the following conditions
         *
         *    dot(centroid smaller face, larger face normal) - larger face offset &gt; -tolerance
         *    dot(centroid larger face, smaller face normal) - smaller face offset &gt; -tolerance
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Face</span>} <span class="hljs-variable">face</span>
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">mergeType</span> - Either MERGE_NON_CONVEX_WRT_LARGER_FACE or
         * MERGE_NON_CONVEX
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;doAdjacentMerge&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">doAdjacentMerge</span>(<span class="hljs-params">face, mergeType</span>) {
          <span class="hljs-keyword">var</span> edge = face.<span class="hljs-property">edge</span>;
          <span class="hljs-keyword">var</span> convex = <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">var</span> it = <span class="hljs-number">0</span>;
          <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">if</span> (it &gt;= face.<span class="hljs-property">nVertices</span>) {
              <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;merge recursion limit exceeded&quot;</span>);
            }
            <span class="hljs-keyword">var</span> oppositeFace = edge.<span class="hljs-property">opposite</span>.<span class="hljs-property">face</span>;
            <span class="hljs-keyword">var</span> merge = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">if</span> (mergeType === <span class="hljs-variable constant_">MERGE_NON_CONVEX</span>) {
              <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">oppositeFaceDistance</span>(edge) &gt; -<span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">oppositeFaceDistance</span>(edge.<span class="hljs-property">opposite</span>) &gt; -<span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span>) {
                merge = <span class="hljs-literal">true</span>;
              }
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">if</span> (face.<span class="hljs-property">area</span> &gt; oppositeFace.<span class="hljs-property">area</span>) {
                <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">oppositeFaceDistance</span>(edge) &gt; -<span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span>) {
                  merge = <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">oppositeFaceDistance</span>(edge.<span class="hljs-property">opposite</span>) &gt; -<span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span>) {
                  convex = <span class="hljs-literal">false</span>;
                }
              } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">oppositeFaceDistance</span>(edge.<span class="hljs-property">opposite</span>) &gt; -<span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span>) {
                  merge = <span class="hljs-literal">true</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">oppositeFaceDistance</span>(edge) &gt; -<span class="hljs-variable language_">this</span>.<span class="hljs-property">tolerance</span>) {
                  convex = <span class="hljs-literal">false</span>;
                }
              }
            }
            <span class="hljs-keyword">if</span> (merge) {
              <span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;face merge&quot;</span>);
              <span class="hljs-keyword">var</span> discardedFaces = face.<span class="hljs-title function_">mergeAdjacentFaces</span>(edge, []);
              <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; discardedFaces.<span class="hljs-property">length</span>; i += <span class="hljs-number">1</span>) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deleteFaceVertices</span>(discardedFaces[i], face);
              }
              <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            edge = edge.<span class="hljs-property">next</span>;
            it += <span class="hljs-number">1</span>;
          } <span class="hljs-keyword">while</span> (edge !== face.<span class="hljs-property">edge</span>);
          <span class="hljs-keyword">if</span> (!convex) {
            face.<span class="hljs-property">mark</span> = _Face.<span class="hljs-property">NON_CONVEX</span>;
          }
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-comment">/**
         * Adds a vertex to the hull with the following algorithm
         *
         * - Compute the `horizon` which is a chain of half edges, for an edge to
         *   belong to this group it must be the edge connecting a face that can
         *   see `eyeVertex` and a face which cannot see `eyeVertex`
         * - All the faces that can see `eyeVertex` have its visible vertices removed
         *   from the claimed VertexList
         * - A new set of faces is created with each edge of the `horizon` and
         *   `eyeVertex`, each face is connected with the opposite horizon face and
         *   the face on the left/right
         * - The new faces are merged if possible with the opposite horizon face first
         *   and then the faces on the right/left
         * - The vertices removed from all the visible faces are assigned to the new
         *   faces if possible
         *
         * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Vertex</span>} <span class="hljs-variable">eyeVertex</span>
         */</span>
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;addVertexToHull&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">addVertexToHull</span>(<span class="hljs-params">eyeVertex</span>) {
          <span class="hljs-keyword">var</span> horizon = [];
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">unclaimed</span>.<span class="hljs-title function_">clear</span>();
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeVertexFromFace</span>(eyeVertex, eyeVertex.<span class="hljs-property">face</span>);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">computeHorizon</span>(eyeVertex.<span class="hljs-property">point</span>, <span class="hljs-literal">null</span>, eyeVertex.<span class="hljs-property">face</span>, horizon);
          <span class="hljs-keyword">if</span> (debug.<span class="hljs-property">enabled</span>) {
            <span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;horizon %j&quot;</span>, horizon.<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">edge</span>) {
              <span class="hljs-keyword">return</span> edge.<span class="hljs-title function_">head</span>().<span class="hljs-property">index</span>;
            }));
          }
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addNewFaces</span>(eyeVertex, horizon);
          <span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;first merge&quot;</span>);
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">newFaces</span>.<span class="hljs-property">length</span>; i += <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">var</span> face = <span class="hljs-variable language_">this</span>.<span class="hljs-property">newFaces</span>[i];
            <span class="hljs-keyword">if</span> (face.<span class="hljs-property">mark</span> === _Face.<span class="hljs-property">VISIBLE</span>) {
              <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">doAdjacentMerge</span>(face, <span class="hljs-variable constant_">MERGE_NON_CONVEX_WRT_LARGER_FACE</span>)) {
              }
            }
          }
          <span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;second merge&quot;</span>);
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _i2 = <span class="hljs-number">0</span>; _i2 &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">newFaces</span>.<span class="hljs-property">length</span>; _i2 += <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">var</span> _face = <span class="hljs-variable language_">this</span>.<span class="hljs-property">newFaces</span>[_i2];
            <span class="hljs-keyword">if</span> (_face.<span class="hljs-property">mark</span> === _Face.<span class="hljs-property">NON_CONVEX</span>) {
              _face.<span class="hljs-property">mark</span> = _Face.<span class="hljs-property">VISIBLE</span>;
              <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">doAdjacentMerge</span>(_face, <span class="hljs-variable constant_">MERGE_NON_CONVEX</span>)) {
              }
            }
          }
          <span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;reassigning points to newFaces&quot;</span>);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolveUnclaimedPoints</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">newFaces</span>);
        }
      }, {
        <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;build&quot;</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {
          <span class="hljs-keyword">var</span> iterations = <span class="hljs-number">0</span>;
          <span class="hljs-keyword">var</span> eyeVertex;
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createInitialSimplex</span>();
          <span class="hljs-keyword">while</span> (eyeVertex = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">nextVertexToAdd</span>()) {
            iterations += <span class="hljs-number">1</span>;
            <span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;== iteration %j ==&quot;</span>, iterations);
            <span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;next vertex to add = %d %j&quot;</span>, eyeVertex.<span class="hljs-property">index</span>, eyeVertex.<span class="hljs-property">point</span>);
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addVertexToHull</span>(eyeVertex);
            <span class="hljs-title function_">debug</span>(<span class="hljs-string">&quot;end&quot;</span>);
          }
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reindexFaceAndVertices</span>();
        }
      }]);
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">QuickHull2</span>;
    }();
    <span class="hljs-built_in">exports</span>[<span class="hljs-string">&quot;default&quot;</span>] = <span class="hljs-title class_">QuickHull</span>;
  }
});

<span class="hljs-comment">// node_modules/quickhull3d/dist/index.js</span>
<span class="hljs-keyword">var</span> require_dist = <span class="hljs-title function_">__commonJS</span>({
  <span class="hljs-string">&quot;node_modules/quickhull3d/dist/index.js&quot;</span>(<span class="hljs-built_in">exports</span>) {
    <span class="hljs-string">&quot;use strict&quot;</span>;
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-string">&quot;__esModule&quot;</span>, {
      <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>
    });
    <span class="hljs-built_in">exports</span>[<span class="hljs-string">&quot;default&quot;</span>] = runner;
    <span class="hljs-built_in">exports</span>.<span class="hljs-property">isPointInsideHull</span> = isPointInsideHull;
    <span class="hljs-keyword">var</span> _QuickHull = <span class="hljs-title function_">_interopRequireDefault</span>(require_QuickHull());
    <span class="hljs-keyword">var</span> _getPlaneNormal = <span class="hljs-title function_">_interopRequireDefault</span>(require_get_plane_normal());
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">_interopRequireDefault</span>(<span class="hljs-params">obj</span>) {
      <span class="hljs-keyword">return</span> obj &amp;&amp; obj.<span class="hljs-property">__esModule</span> ? obj : { <span class="hljs-string">&quot;default&quot;</span>: obj };
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">runner</span>(<span class="hljs-params">points</span>) {
      <span class="hljs-keyword">var</span> options = <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>] !== <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> ? <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>] : {};
      <span class="hljs-keyword">var</span> instance = <span class="hljs-keyword">new</span> _QuickHull[<span class="hljs-string">&quot;default&quot;</span>](points);
      instance.<span class="hljs-title function_">build</span>();
      <span class="hljs-keyword">return</span> instance.<span class="hljs-title function_">collectFaces</span>(options.<span class="hljs-property">skipTriangulation</span>);
    }
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">isPointInsideHull</span>(<span class="hljs-params">point, points, faces</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; faces.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-keyword">var</span> face = faces[i];
        <span class="hljs-keyword">var</span> a = points[face[<span class="hljs-number">0</span>]];
        <span class="hljs-keyword">var</span> b = points[face[<span class="hljs-number">1</span>]];
        <span class="hljs-keyword">var</span> c = points[face[<span class="hljs-number">2</span>]];
        <span class="hljs-keyword">var</span> planeNormal = (<span class="hljs-number">0</span>, _getPlaneNormal[<span class="hljs-string">&quot;default&quot;</span>])([], a, b, c);
        <span class="hljs-keyword">var</span> pointAbsA = [point[<span class="hljs-number">0</span>] - a[<span class="hljs-number">0</span>], point[<span class="hljs-number">1</span>] - a[<span class="hljs-number">1</span>], point[<span class="hljs-number">2</span>] - a[<span class="hljs-number">2</span>]];
        <span class="hljs-keyword">var</span> dotProduct = planeNormal[<span class="hljs-number">0</span>] * pointAbsA[<span class="hljs-number">0</span>] + planeNormal[<span class="hljs-number">1</span>] * pointAbsA[<span class="hljs-number">1</span>] + planeNormal[<span class="hljs-number">2</span>] * pointAbsA[<span class="hljs-number">2</span>];
        <span class="hljs-keyword">if</span> (dotProduct &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
  }
});

<span class="hljs-comment">// lib/math/utils.mjs</span>
<span class="hljs-keyword">var</span> <span class="hljs-title function_">clamp</span> = (<span class="hljs-params">value, min, max</span>) =&gt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(min, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(max, value));
<span class="hljs-keyword">var</span> <span class="hljs-title function_">rad2deg</span> = (<span class="hljs-params">radians</span>) =&gt; radians * <span class="hljs-number">180</span> / <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>;
<span class="hljs-keyword">var</span> <span class="hljs-title function_">centroid</span> = (<span class="hljs-params">...vectors</span>) =&gt; {
  <span class="hljs-keyword">const</span> sum = vectors.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum2, vector</span>) =&gt;</span> sum2.<span class="hljs-title function_">add</span>(vector), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>());
  <span class="hljs-keyword">return</span> sum.<span class="hljs-title function_">divide</span>(vectors.<span class="hljs-property">length</span>);
};

<span class="hljs-comment">// lib/math/Quaternion.mjs</span>
<span class="hljs-keyword">var</span> <span class="hljs-title class_">Quaternion</span> = <span class="hljs-keyword">class</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">x = <span class="hljs-number">0</span>, y = <span class="hljs-number">0</span>, z = <span class="hljs-number">0</span>, w = <span class="hljs-number">1</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isQuaternion</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = x;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = y;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = z;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = w;
  }
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">slerpFlat</span>(<span class="hljs-params">dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t</span>) {
    <span class="hljs-keyword">let</span> x0 = src0[srcOffset0 + <span class="hljs-number">0</span>], y0 = src0[srcOffset0 + <span class="hljs-number">1</span>], z0 = src0[srcOffset0 + <span class="hljs-number">2</span>], w0 = src0[srcOffset0 + <span class="hljs-number">3</span>];
    <span class="hljs-keyword">const</span> x1 = src1[srcOffset1 + <span class="hljs-number">0</span>], y1 = src1[srcOffset1 + <span class="hljs-number">1</span>], z1 = src1[srcOffset1 + <span class="hljs-number">2</span>], w1 = src1[srcOffset1 + <span class="hljs-number">3</span>];
    <span class="hljs-keyword">if</span> (t === <span class="hljs-number">0</span>) {
      dst[dstOffset + <span class="hljs-number">0</span>] = x0;
      dst[dstOffset + <span class="hljs-number">1</span>] = y0;
      dst[dstOffset + <span class="hljs-number">2</span>] = z0;
      dst[dstOffset + <span class="hljs-number">3</span>] = w0;
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (t === <span class="hljs-number">1</span>) {
      dst[dstOffset + <span class="hljs-number">0</span>] = x1;
      dst[dstOffset + <span class="hljs-number">1</span>] = y1;
      dst[dstOffset + <span class="hljs-number">2</span>] = z1;
      dst[dstOffset + <span class="hljs-number">3</span>] = w1;
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1) {
      <span class="hljs-keyword">let</span> s = <span class="hljs-number">1</span> - t;
      <span class="hljs-keyword">const</span> cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1, dir = cos &gt;= <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>, sqrSin = <span class="hljs-number">1</span> - cos * cos;
      <span class="hljs-keyword">if</span> (sqrSin &gt; <span class="hljs-title class_">Number</span>.<span class="hljs-property">EPSILON</span>) {
        <span class="hljs-keyword">const</span> sin = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(sqrSin), len = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(sin, cos * dir);
        s = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(s * len) / sin;
        t = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(t * len) / sin;
      }
      <span class="hljs-keyword">const</span> tDir = t * dir;
      x0 = x0 * s + x1 * tDir;
      y0 = y0 * s + y1 * tDir;
      z0 = z0 * s + z1 * tDir;
      w0 = w0 * s + w1 * tDir;
      <span class="hljs-keyword">if</span> (s === <span class="hljs-number">1</span> - t) {
        <span class="hljs-keyword">const</span> f = <span class="hljs-number">1</span> / <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0);
        x0 *= f;
        y0 *= f;
        z0 *= f;
        w0 *= f;
      }
    }
    dst[dstOffset] = x0;
    dst[dstOffset + <span class="hljs-number">1</span>] = y0;
    dst[dstOffset + <span class="hljs-number">2</span>] = z0;
    dst[dstOffset + <span class="hljs-number">3</span>] = w0;
  }
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">multiplyQuaternionsFlat</span>(<span class="hljs-params">dst, dstOffset, src0, srcOffset0, src1, srcOffset1</span>) {
    <span class="hljs-keyword">const</span> x0 = src0[srcOffset0];
    <span class="hljs-keyword">const</span> y0 = src0[srcOffset0 + <span class="hljs-number">1</span>];
    <span class="hljs-keyword">const</span> z0 = src0[srcOffset0 + <span class="hljs-number">2</span>];
    <span class="hljs-keyword">const</span> w0 = src0[srcOffset0 + <span class="hljs-number">3</span>];
    <span class="hljs-keyword">const</span> x1 = src1[srcOffset1];
    <span class="hljs-keyword">const</span> y1 = src1[srcOffset1 + <span class="hljs-number">1</span>];
    <span class="hljs-keyword">const</span> z1 = src1[srcOffset1 + <span class="hljs-number">2</span>];
    <span class="hljs-keyword">const</span> w1 = src1[srcOffset1 + <span class="hljs-number">3</span>];
    dst[dstOffset] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;
    dst[dstOffset + <span class="hljs-number">1</span>] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;
    dst[dstOffset + <span class="hljs-number">2</span>] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;
    dst[dstOffset + <span class="hljs-number">3</span>] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;
    <span class="hljs-keyword">return</span> dst;
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">x</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span>;
  }
  <span class="hljs-keyword">set</span> <span class="hljs-title function_">x</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = value;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">y</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span>;
  }
  <span class="hljs-keyword">set</span> <span class="hljs-title function_">y</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = value;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">z</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span>;
  }
  <span class="hljs-keyword">set</span> <span class="hljs-title function_">z</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = value;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">w</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span>;
  }
  <span class="hljs-keyword">set</span> <span class="hljs-title function_">w</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = value;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
  }
  <span class="hljs-title function_">set</span>(<span class="hljs-params">x, y, z, w</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = x;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = y;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = z;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = w;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">clone</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-variable language_">this</span>._x, <span class="hljs-variable language_">this</span>._y, <span class="hljs-variable language_">this</span>._z, <span class="hljs-variable language_">this</span>._w</span>);
  }
  <span class="hljs-title function_">copy</span>(<span class="hljs-params">quaternion</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = quaternion.<span class="hljs-property">x</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = quaternion.<span class="hljs-property">y</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = quaternion.<span class="hljs-property">z</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = quaternion.<span class="hljs-property">w</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">setFromEuler</span>(<span class="hljs-params">euler, update = <span class="hljs-literal">true</span></span>) {
    <span class="hljs-keyword">const</span> x = euler.<span class="hljs-property">_x</span>, y = euler.<span class="hljs-property">_y</span>, z = euler.<span class="hljs-property">_z</span>, order = euler.<span class="hljs-property">_order</span>;
    <span class="hljs-keyword">const</span> cos = <span class="hljs-title class_">Math</span>.<span class="hljs-property">cos</span>;
    <span class="hljs-keyword">const</span> sin = <span class="hljs-title class_">Math</span>.<span class="hljs-property">sin</span>;
    <span class="hljs-keyword">const</span> c1 = <span class="hljs-title function_">cos</span>(x / <span class="hljs-number">2</span>);
    <span class="hljs-keyword">const</span> c2 = <span class="hljs-title function_">cos</span>(y / <span class="hljs-number">2</span>);
    <span class="hljs-keyword">const</span> c3 = <span class="hljs-title function_">cos</span>(z / <span class="hljs-number">2</span>);
    <span class="hljs-keyword">const</span> s1 = <span class="hljs-title function_">sin</span>(x / <span class="hljs-number">2</span>);
    <span class="hljs-keyword">const</span> s2 = <span class="hljs-title function_">sin</span>(y / <span class="hljs-number">2</span>);
    <span class="hljs-keyword">const</span> s3 = <span class="hljs-title function_">sin</span>(z / <span class="hljs-number">2</span>);
    <span class="hljs-keyword">switch</span> (order) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;XYZ&quot;</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = s1 * c2 * c3 + c1 * s2 * s3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = c1 * s2 * c3 - s1 * c2 * s3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = c1 * c2 * s3 + s1 * s2 * c3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = c1 * c2 * c3 - s1 * s2 * s3;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;YXZ&quot;</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = s1 * c2 * c3 + c1 * s2 * s3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = c1 * s2 * c3 - s1 * c2 * s3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = c1 * c2 * s3 - s1 * s2 * c3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = c1 * c2 * c3 + s1 * s2 * s3;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;ZXY&quot;</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = s1 * c2 * c3 - c1 * s2 * s3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = c1 * s2 * c3 + s1 * c2 * s3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = c1 * c2 * s3 + s1 * s2 * c3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = c1 * c2 * c3 - s1 * s2 * s3;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;ZYX&quot;</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = s1 * c2 * c3 - c1 * s2 * s3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = c1 * s2 * c3 + s1 * c2 * s3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = c1 * c2 * s3 - s1 * s2 * c3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = c1 * c2 * c3 + s1 * s2 * s3;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;YZX&quot;</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = s1 * c2 * c3 + c1 * s2 * s3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = c1 * s2 * c3 + s1 * c2 * s3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = c1 * c2 * s3 - s1 * s2 * c3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = c1 * c2 * c3 - s1 * s2 * s3;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;XZY&quot;</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = s1 * c2 * c3 - c1 * s2 * s3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = c1 * s2 * c3 - s1 * c2 * s3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = c1 * c2 * s3 + s1 * s2 * c3;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = c1 * c2 * c3 + s1 * s2 * s3;
        <span class="hljs-keyword">break</span>;
      <span class="hljs-attr">default</span>:
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&quot;THREE.Quaternion: .setFromEuler() encountered an unknown order: &quot;</span> + order);
    }
    <span class="hljs-keyword">if</span> (update === <span class="hljs-literal">true</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">setFromAxisAngle</span>(<span class="hljs-params">axis, angle</span>) {
    <span class="hljs-keyword">const</span> halfAngle = angle / <span class="hljs-number">2</span>, s = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(halfAngle);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = axis.<span class="hljs-property">x</span> * s;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = axis.<span class="hljs-property">y</span> * s;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = axis.<span class="hljs-property">z</span> * s;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(halfAngle);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">setFromRotationMatrix</span>(<span class="hljs-params">m</span>) {
    <span class="hljs-keyword">const</span> te = m.<span class="hljs-property">elements</span>, m11 = te[<span class="hljs-number">0</span>], m12 = te[<span class="hljs-number">4</span>], m13 = te[<span class="hljs-number">8</span>], m21 = te[<span class="hljs-number">1</span>], m22 = te[<span class="hljs-number">5</span>], m23 = te[<span class="hljs-number">9</span>], m31 = te[<span class="hljs-number">2</span>], m32 = te[<span class="hljs-number">6</span>], m33 = te[<span class="hljs-number">10</span>], trace = m11 + m22 + m33;
    <span class="hljs-keyword">if</span> (trace &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">const</span> s = <span class="hljs-number">0.5</span> / <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(trace + <span class="hljs-number">1</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = <span class="hljs-number">0.25</span> / s;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = (m32 - m23) * s;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = (m13 - m31) * s;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = (m21 - m12) * s;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (m11 &gt; m22 &amp;&amp; m11 &gt; m33) {
      <span class="hljs-keyword">const</span> s = <span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-number">1</span> + m11 - m22 - m33);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = (m32 - m23) / s;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = <span class="hljs-number">0.25</span> * s;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = (m12 + m21) / s;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = (m13 + m31) / s;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (m22 &gt; m33) {
      <span class="hljs-keyword">const</span> s = <span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-number">1</span> + m22 - m11 - m33);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = (m13 - m31) / s;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = (m12 + m21) / s;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = <span class="hljs-number">0.25</span> * s;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = (m23 + m32) / s;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">const</span> s = <span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-number">1</span> + m33 - m11 - m22);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = (m21 - m12) / s;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = (m13 + m31) / s;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = (m23 + m32) / s;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = <span class="hljs-number">0.25</span> * s;
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">setFromUnitVectors</span>(<span class="hljs-params">vFrom, vTo</span>) {
    <span class="hljs-keyword">let</span> r = vFrom.<span class="hljs-title function_">dot</span>(vTo) + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (r &lt; <span class="hljs-title class_">Number</span>.<span class="hljs-property">EPSILON</span>) {
      r = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(vFrom.<span class="hljs-property">x</span>) &gt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(vFrom.<span class="hljs-property">z</span>)) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = -vFrom.<span class="hljs-property">y</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = vFrom.<span class="hljs-property">x</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = <span class="hljs-number">0</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = r;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = <span class="hljs-number">0</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = -vFrom.<span class="hljs-property">z</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = vFrom.<span class="hljs-property">y</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = r;
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = vFrom.<span class="hljs-property">y</span> * vTo.<span class="hljs-property">z</span> - vFrom.<span class="hljs-property">z</span> * vTo.<span class="hljs-property">y</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = vFrom.<span class="hljs-property">z</span> * vTo.<span class="hljs-property">x</span> - vFrom.<span class="hljs-property">x</span> * vTo.<span class="hljs-property">z</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = vFrom.<span class="hljs-property">x</span> * vTo.<span class="hljs-property">y</span> - vFrom.<span class="hljs-property">y</span> * vTo.<span class="hljs-property">x</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = r;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">normalize</span>();
  }
  <span class="hljs-title function_">angleTo</span>(<span class="hljs-params">q</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">acos</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(<span class="hljs-title function_">clamp</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">dot</span>(q), -<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)));
  }
  <span class="hljs-title function_">rotateTowards</span>(<span class="hljs-params">q, step</span>) {
    <span class="hljs-keyword">const</span> angle = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">angleTo</span>(q);
    <span class="hljs-keyword">if</span> (angle === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">const</span> t = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">1</span>, step / angle);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">slerp</span>(q, t);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">identity</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
  }
  <span class="hljs-title function_">invert</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">conjugate</span>();
  }
  <span class="hljs-title function_">conjugate</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> *= -<span class="hljs-number">1</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> *= -<span class="hljs-number">1</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> *= -<span class="hljs-number">1</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">dot</span>(<span class="hljs-params">v</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> * v.<span class="hljs-property">_x</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> * v.<span class="hljs-property">_y</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> * v.<span class="hljs-property">_z</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> * v.<span class="hljs-property">_w</span>;
  }
  <span class="hljs-title function_">lengthSq</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span>;
  }
  <span class="hljs-title function_">length</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span>);
  }
  <span class="hljs-title function_">normalize</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">let</span> l = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">length</span>();
    <span class="hljs-keyword">if</span> (l === <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = <span class="hljs-number">0</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = <span class="hljs-number">0</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = <span class="hljs-number">0</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> {
      l = <span class="hljs-number">1</span> / l;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> * l;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> * l;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> * l;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> * l;
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">multiply</span>(<span class="hljs-params">q</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">multiplyQuaternions</span>(<span class="hljs-variable language_">this</span>, q);
  }
  <span class="hljs-title function_">premultiply</span>(<span class="hljs-params">q</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">multiplyQuaternions</span>(q, <span class="hljs-variable language_">this</span>);
  }
  <span class="hljs-title function_">multiplyQuaternions</span>(<span class="hljs-params">a, b</span>) {
    <span class="hljs-keyword">const</span> qax = a.<span class="hljs-property">_x</span>, qay = a.<span class="hljs-property">_y</span>, qaz = a.<span class="hljs-property">_z</span>, qaw = a.<span class="hljs-property">_w</span>;
    <span class="hljs-keyword">const</span> qbx = b.<span class="hljs-property">_x</span>, qby = b.<span class="hljs-property">_y</span>, qbz = b.<span class="hljs-property">_z</span>, qbw = b.<span class="hljs-property">_w</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">slerp</span>(<span class="hljs-params">qb, t</span>) {
    <span class="hljs-keyword">if</span> (t === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">if</span> (t === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">copy</span>(qb);
    <span class="hljs-keyword">const</span> x = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span>, y = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span>, z = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span>, w = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span>;
    <span class="hljs-keyword">let</span> cosHalfTheta = w * qb.<span class="hljs-property">_w</span> + x * qb.<span class="hljs-property">_x</span> + y * qb.<span class="hljs-property">_y</span> + z * qb.<span class="hljs-property">_z</span>;
    <span class="hljs-keyword">if</span> (cosHalfTheta &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = -qb.<span class="hljs-property">_w</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = -qb.<span class="hljs-property">_x</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = -qb.<span class="hljs-property">_y</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = -qb.<span class="hljs-property">_z</span>;
      cosHalfTheta = -cosHalfTheta;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">copy</span>(qb);
    }
    <span class="hljs-keyword">if</span> (cosHalfTheta &gt;= <span class="hljs-number">1</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = w;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = x;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = y;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = z;
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
    }
    <span class="hljs-keyword">const</span> sqrSinHalfTheta = <span class="hljs-number">1</span> - cosHalfTheta * cosHalfTheta;
    <span class="hljs-keyword">if</span> (sqrSinHalfTheta &lt;= <span class="hljs-title class_">Number</span>.<span class="hljs-property">EPSILON</span>) {
      <span class="hljs-keyword">const</span> s = <span class="hljs-number">1</span> - t;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = s * w + t * <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = s * x + t * <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = s * y + t * <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = s * z + t * <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">normalize</span>();
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
    }
    <span class="hljs-keyword">const</span> sinHalfTheta = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(sqrSinHalfTheta);
    <span class="hljs-keyword">const</span> halfTheta = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(sinHalfTheta, cosHalfTheta);
    <span class="hljs-keyword">const</span> ratioA = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>((<span class="hljs-number">1</span> - t) * halfTheta) / sinHalfTheta, ratioB = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(t * halfTheta) / sinHalfTheta;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = w * ratioA + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> * ratioB;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = x * ratioA + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> * ratioB;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = y * ratioA + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> * ratioB;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = z * ratioA + <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> * ratioB;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">slerpQuaternions</span>(<span class="hljs-params">qa, qb, t</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">copy</span>(qa).<span class="hljs-title function_">slerp</span>(qb, t);
  }
  <span class="hljs-title function_">random</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> theta1 = <span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>();
    <span class="hljs-keyword">const</span> theta2 = <span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>();
    <span class="hljs-keyword">const</span> x0 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>();
    <span class="hljs-keyword">const</span> r1 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-number">1</span> - x0);
    <span class="hljs-keyword">const</span> r2 = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(x0);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(
      r1 * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(theta1),
      r1 * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(theta1),
      r2 * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(theta2),
      r2 * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(theta2)
    );
  }
  <span class="hljs-title function_">equals</span>(<span class="hljs-params">quaternion</span>) {
    <span class="hljs-keyword">return</span> quaternion.<span class="hljs-property">_x</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> &amp;&amp; quaternion.<span class="hljs-property">_y</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> &amp;&amp; quaternion.<span class="hljs-property">_z</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> &amp;&amp; quaternion.<span class="hljs-property">_w</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span>;
  }
  <span class="hljs-title function_">fromArray</span>(<span class="hljs-params">array, offset = <span class="hljs-number">0</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = array[offset];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = array[offset + <span class="hljs-number">1</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = array[offset + <span class="hljs-number">2</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = array[offset + <span class="hljs-number">3</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">toArray</span>(<span class="hljs-params">array = [], offset = <span class="hljs-number">0</span></span>) {
    array[offset] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span>;
    array[offset + <span class="hljs-number">1</span>] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span>;
    array[offset + <span class="hljs-number">2</span>] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span>;
    array[offset + <span class="hljs-number">3</span>] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span>;
    <span class="hljs-keyword">return</span> array;
  }
  <span class="hljs-title function_">fromBufferAttribute</span>(<span class="hljs-params">attribute, index</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = attribute.<span class="hljs-title function_">getX</span>(index);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = attribute.<span class="hljs-title function_">getY</span>(index);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = attribute.<span class="hljs-title function_">getZ</span>(index);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span> = attribute.<span class="hljs-title function_">getW</span>(index);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">toJSON</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toArray</span>();
  }
  <span class="hljs-title function_">_onChange</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_onChangeCallback</span> = callback;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">_onChangeCallback</span>(<span class="hljs-params"></span>) {
  }
  *[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]() {
    <span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_w</span>;
  }
};

<span class="hljs-comment">// lib/math/Vector3.mjs</span>
<span class="hljs-keyword">var</span> <span class="hljs-title class_">Vector3</span> = <span class="hljs-keyword">class</span> <span class="hljs-title class_">_Vector3</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">x = <span class="hljs-number">0</span>, y = <span class="hljs-number">0</span>, z = <span class="hljs-number">0</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = x;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> = y;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> = z;
  }
  <span class="hljs-title function_">set</span>(<span class="hljs-params">x, y, z</span>) {
    <span class="hljs-keyword">if</span> (z === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>) z = <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = x;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> = y;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> = z;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">clone</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-variable language_">this</span>.x, <span class="hljs-variable language_">this</span>.y, <span class="hljs-variable language_">this</span>.z</span>);
  }
  <span class="hljs-title function_">copy</span>(<span class="hljs-params">v</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = v.<span class="hljs-property">x</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> = v.<span class="hljs-property">y</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> = v.<span class="hljs-property">z</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">add</span>(<span class="hljs-params">v</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">_Vector3</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> + v.<span class="hljs-property">x</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> + v.<span class="hljs-property">y</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> + v.<span class="hljs-property">z</span>);
  }
  <span class="hljs-title function_">divide</span>(<span class="hljs-params">v</span>) {
    v = <span class="hljs-keyword">typeof</span> v === <span class="hljs-string">&quot;number&quot;</span> ? <span class="hljs-keyword">new</span> <span class="hljs-title function_">_Vector3</span>(v, v, v) : v;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">_Vector3</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> / v.<span class="hljs-property">x</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> / v.<span class="hljs-property">y</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> / v.<span class="hljs-property">z</span>);
  }
  <span class="hljs-title function_">dot</span>(<span class="hljs-params">v</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> * v.<span class="hljs-property">x</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> * v.<span class="hljs-property">y</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> * v.<span class="hljs-property">z</span>;
  }
  <span class="hljs-title function_">equals</span>(<span class="hljs-params">v</span>) {
    <span class="hljs-keyword">return</span> v.<span class="hljs-property">x</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> &amp;&amp; v.<span class="hljs-property">y</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> &amp;&amp; v.<span class="hljs-property">z</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span>;
  }
  <span class="hljs-title function_">cross</span>(<span class="hljs-params">v</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">_Vector3</span>(
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> * v.<span class="hljs-property">z</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> * v.<span class="hljs-property">y</span>,
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> * v.<span class="hljs-property">x</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> * v.<span class="hljs-property">z</span>,
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> * v.<span class="hljs-property">y</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> * v.<span class="hljs-property">x</span>
    );
  }
  <span class="hljs-title function_">rotateX</span>(<span class="hljs-params">angle</span>) {
    <span class="hljs-keyword">const</span> cos = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(angle);
    <span class="hljs-keyword">const</span> sin = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(angle);
    <span class="hljs-keyword">const</span> y = <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> * cos - <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> * sin;
    <span class="hljs-keyword">const</span> z = <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> * sin + <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> * cos;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">_Vector3</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>, y, z);
  }
  <span class="hljs-title function_">rotateY</span>(<span class="hljs-params">angle</span>) {
    <span class="hljs-keyword">const</span> cos = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(angle);
    <span class="hljs-keyword">const</span> sin = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(angle);
    <span class="hljs-keyword">const</span> x = <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> * cos - <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> * sin;
    <span class="hljs-keyword">const</span> z = <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> * sin + <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> * cos;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">_Vector3</span>(x, <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>, z);
  }
  <span class="hljs-title function_">rotateZ</span>(<span class="hljs-params">angle</span>) {
    <span class="hljs-keyword">const</span> cos = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(angle);
    <span class="hljs-keyword">const</span> sin = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(angle);
    <span class="hljs-keyword">const</span> x = <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> * cos - <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> * sin;
    <span class="hljs-keyword">const</span> y = <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> * sin + <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> * cos;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">_Vector3</span>(x, y, <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span>);
  }
  <span class="hljs-title function_">valueOf</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> [<span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span>];
  }
  <span class="hljs-title function_">toString</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`(<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.x}</span>, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.y}</span>, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.z}</span>)`</span>;
  }
  <span class="hljs-title function_">applyAxisAngle</span>(<span class="hljs-params">axis, angle</span>) {
    <span class="hljs-keyword">const</span> quaternion = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Quaternion</span>().<span class="hljs-title function_">setFromAxisAngle</span>(axis, angle);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyQuaternion</span>(quaternion);
  }
  <span class="hljs-title function_">applyQuaternion</span>(<span class="hljs-params">q</span>) {
    <span class="hljs-keyword">const</span> x = <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>, y = <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>, z = <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span>;
    <span class="hljs-keyword">const</span> qx = q.<span class="hljs-property">x</span>, qy = q.<span class="hljs-property">y</span>, qz = q.<span class="hljs-property">z</span>, qw = q.<span class="hljs-property">w</span>;
    <span class="hljs-keyword">const</span> ix = qw * x + qy * z - qz * y;
    <span class="hljs-keyword">const</span> iy = qw * y + qz * x - qx * z;
    <span class="hljs-keyword">const</span> iz = qw * z + qx * y - qy * x;
    <span class="hljs-keyword">const</span> iw = -qx * x - qy * y - qz * z;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = ix * qw + iw * -qx + iy * -qz - iz * -qy;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> = iy * qw + iw * -qy + iz * -qx - ix * -qz;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> = iz * qw + iw * -qz + ix * -qy - iy * -qx;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">subVectors</span>(<span class="hljs-params">a, b</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = a.<span class="hljs-property">x</span> - b.<span class="hljs-property">x</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> = a.<span class="hljs-property">y</span> - b.<span class="hljs-property">y</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> = a.<span class="hljs-property">z</span> - b.<span class="hljs-property">z</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">multiplyScalar</span>(<span class="hljs-params">scalar</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> *= scalar;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> *= scalar;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> *= scalar;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">divideScalar</span>(<span class="hljs-params">scalar</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">multiplyScalar</span>(<span class="hljs-number">1</span> / scalar);
  }
  <span class="hljs-title function_">lengthSq</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span>;
  }
  <span class="hljs-title function_">length</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span>);
  }
  <span class="hljs-title function_">normalize</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">divideScalar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">length</span>() || <span class="hljs-number">1</span>);
  }
  <span class="hljs-title function_">sub</span>(<span class="hljs-params">v</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> -= v.<span class="hljs-property">x</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> -= v.<span class="hljs-property">y</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> -= v.<span class="hljs-property">z</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">crossVectors</span>(<span class="hljs-params">a, b</span>) {
    <span class="hljs-keyword">const</span> ax = a.<span class="hljs-property">x</span>, ay = a.<span class="hljs-property">y</span>, az = a.<span class="hljs-property">z</span>;
    <span class="hljs-keyword">const</span> bx = b.<span class="hljs-property">x</span>, by = b.<span class="hljs-property">y</span>, bz = b.<span class="hljs-property">z</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = ay * bz - az * by;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> = az * bx - ax * bz;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> = ax * by - ay * bx;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">setFromMatrixPosition</span>(<span class="hljs-params">m</span>) {
    <span class="hljs-keyword">const</span> e = m.<span class="hljs-property">elements</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = e[<span class="hljs-number">12</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> = e[<span class="hljs-number">13</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> = e[<span class="hljs-number">14</span>];
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  *[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]() {
    <span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span>;
  }
};

<span class="hljs-comment">// lib/math/Matrix4.mjs</span>
<span class="hljs-keyword">var</span> <span class="hljs-title class_">WebGLCoordinateSystem</span> = <span class="hljs-number">2e3</span>;
<span class="hljs-keyword">var</span> <span class="hljs-title class_">WebGPUCoordinateSystem</span> = <span class="hljs-number">2001</span>;
<span class="hljs-keyword">var</span> <span class="hljs-title class_">Matrix4</span> = <span class="hljs-keyword">class</span> <span class="hljs-title class_">_Matrix4</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44</span>) {
    _Matrix4.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">isMatrix4</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span> = [
      <span class="hljs-number">1</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>
    ];
    <span class="hljs-keyword">if</span> (n11 !== <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44);
    }
  }
  <span class="hljs-title function_">set</span>(<span class="hljs-params">n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44</span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    te[<span class="hljs-number">0</span>] = n11;
    te[<span class="hljs-number">4</span>] = n12;
    te[<span class="hljs-number">8</span>] = n13;
    te[<span class="hljs-number">12</span>] = n14;
    te[<span class="hljs-number">1</span>] = n21;
    te[<span class="hljs-number">5</span>] = n22;
    te[<span class="hljs-number">9</span>] = n23;
    te[<span class="hljs-number">13</span>] = n24;
    te[<span class="hljs-number">2</span>] = n31;
    te[<span class="hljs-number">6</span>] = n32;
    te[<span class="hljs-number">10</span>] = n33;
    te[<span class="hljs-number">14</span>] = n34;
    te[<span class="hljs-number">3</span>] = n41;
    te[<span class="hljs-number">7</span>] = n42;
    te[<span class="hljs-number">11</span>] = n43;
    te[<span class="hljs-number">15</span>] = n44;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">identity</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(
      <span class="hljs-number">1</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>
    );
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">clone</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">_Matrix4</span>().<span class="hljs-title function_">fromArray</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>);
  }
  <span class="hljs-title function_">copy</span>(<span class="hljs-params">m</span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> me = m.<span class="hljs-property">elements</span>;
    te[<span class="hljs-number">0</span>] = me[<span class="hljs-number">0</span>];
    te[<span class="hljs-number">1</span>] = me[<span class="hljs-number">1</span>];
    te[<span class="hljs-number">2</span>] = me[<span class="hljs-number">2</span>];
    te[<span class="hljs-number">3</span>] = me[<span class="hljs-number">3</span>];
    te[<span class="hljs-number">4</span>] = me[<span class="hljs-number">4</span>];
    te[<span class="hljs-number">5</span>] = me[<span class="hljs-number">5</span>];
    te[<span class="hljs-number">6</span>] = me[<span class="hljs-number">6</span>];
    te[<span class="hljs-number">7</span>] = me[<span class="hljs-number">7</span>];
    te[<span class="hljs-number">8</span>] = me[<span class="hljs-number">8</span>];
    te[<span class="hljs-number">9</span>] = me[<span class="hljs-number">9</span>];
    te[<span class="hljs-number">10</span>] = me[<span class="hljs-number">10</span>];
    te[<span class="hljs-number">11</span>] = me[<span class="hljs-number">11</span>];
    te[<span class="hljs-number">12</span>] = me[<span class="hljs-number">12</span>];
    te[<span class="hljs-number">13</span>] = me[<span class="hljs-number">13</span>];
    te[<span class="hljs-number">14</span>] = me[<span class="hljs-number">14</span>];
    te[<span class="hljs-number">15</span>] = me[<span class="hljs-number">15</span>];
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">copyPosition</span>(<span class="hljs-params">m</span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>, me = m.<span class="hljs-property">elements</span>;
    te[<span class="hljs-number">12</span>] = me[<span class="hljs-number">12</span>];
    te[<span class="hljs-number">13</span>] = me[<span class="hljs-number">13</span>];
    te[<span class="hljs-number">14</span>] = me[<span class="hljs-number">14</span>];
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">setFromMatrix3</span>(<span class="hljs-params">m</span>) {
    <span class="hljs-keyword">const</span> me = m.<span class="hljs-property">elements</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(
      me[<span class="hljs-number">0</span>],
      me[<span class="hljs-number">3</span>],
      me[<span class="hljs-number">6</span>],
      <span class="hljs-number">0</span>,
      me[<span class="hljs-number">1</span>],
      me[<span class="hljs-number">4</span>],
      me[<span class="hljs-number">7</span>],
      <span class="hljs-number">0</span>,
      me[<span class="hljs-number">2</span>],
      me[<span class="hljs-number">5</span>],
      me[<span class="hljs-number">8</span>],
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>
    );
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">extractBasis</span>(<span class="hljs-params">xAxis, yAxis, zAxis</span>) {
    xAxis.<span class="hljs-title function_">setFromMatrixColumn</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-number">0</span>);
    yAxis.<span class="hljs-title function_">setFromMatrixColumn</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-number">1</span>);
    zAxis.<span class="hljs-title function_">setFromMatrixColumn</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-number">2</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">makeBasis</span>(<span class="hljs-params">xAxis, yAxis, zAxis</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(
      xAxis.<span class="hljs-property">x</span>,
      yAxis.<span class="hljs-property">x</span>,
      zAxis.<span class="hljs-property">x</span>,
      <span class="hljs-number">0</span>,
      xAxis.<span class="hljs-property">y</span>,
      yAxis.<span class="hljs-property">y</span>,
      zAxis.<span class="hljs-property">y</span>,
      <span class="hljs-number">0</span>,
      xAxis.<span class="hljs-property">z</span>,
      yAxis.<span class="hljs-property">z</span>,
      zAxis.<span class="hljs-property">z</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>
    );
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">extractRotation</span>(<span class="hljs-params">m</span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> me = m.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> scaleX = <span class="hljs-number">1</span> / _v1.<span class="hljs-title function_">setFromMatrixColumn</span>(m, <span class="hljs-number">0</span>).<span class="hljs-title function_">length</span>();
    <span class="hljs-keyword">const</span> scaleY = <span class="hljs-number">1</span> / _v1.<span class="hljs-title function_">setFromMatrixColumn</span>(m, <span class="hljs-number">1</span>).<span class="hljs-title function_">length</span>();
    <span class="hljs-keyword">const</span> scaleZ = <span class="hljs-number">1</span> / _v1.<span class="hljs-title function_">setFromMatrixColumn</span>(m, <span class="hljs-number">2</span>).<span class="hljs-title function_">length</span>();
    te[<span class="hljs-number">0</span>] = me[<span class="hljs-number">0</span>] * scaleX;
    te[<span class="hljs-number">1</span>] = me[<span class="hljs-number">1</span>] * scaleX;
    te[<span class="hljs-number">2</span>] = me[<span class="hljs-number">2</span>] * scaleX;
    te[<span class="hljs-number">3</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">4</span>] = me[<span class="hljs-number">4</span>] * scaleY;
    te[<span class="hljs-number">5</span>] = me[<span class="hljs-number">5</span>] * scaleY;
    te[<span class="hljs-number">6</span>] = me[<span class="hljs-number">6</span>] * scaleY;
    te[<span class="hljs-number">7</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">8</span>] = me[<span class="hljs-number">8</span>] * scaleZ;
    te[<span class="hljs-number">9</span>] = me[<span class="hljs-number">9</span>] * scaleZ;
    te[<span class="hljs-number">10</span>] = me[<span class="hljs-number">10</span>] * scaleZ;
    te[<span class="hljs-number">11</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">12</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">13</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">14</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">15</span>] = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">makeRotationFromEuler</span>(<span class="hljs-params">euler</span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> x = euler.<span class="hljs-property">x</span>, y = euler.<span class="hljs-property">y</span>, z = euler.<span class="hljs-property">z</span>;
    <span class="hljs-keyword">const</span> a = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(x), b = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(x);
    <span class="hljs-keyword">const</span> c = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(y), d = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(y);
    <span class="hljs-keyword">const</span> e = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(z), f = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(z);
    <span class="hljs-keyword">if</span> (euler.<span class="hljs-property">order</span> === <span class="hljs-string">&quot;XYZ&quot;</span>) {
      <span class="hljs-keyword">const</span> ae = a * e, af = a * f, be = b * e, bf = b * f;
      te[<span class="hljs-number">0</span>] = c * e;
      te[<span class="hljs-number">4</span>] = -c * f;
      te[<span class="hljs-number">8</span>] = d;
      te[<span class="hljs-number">1</span>] = af + be * d;
      te[<span class="hljs-number">5</span>] = ae - bf * d;
      te[<span class="hljs-number">9</span>] = -b * c;
      te[<span class="hljs-number">2</span>] = bf - ae * d;
      te[<span class="hljs-number">6</span>] = be + af * d;
      te[<span class="hljs-number">10</span>] = a * c;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (euler.<span class="hljs-property">order</span> === <span class="hljs-string">&quot;YXZ&quot;</span>) {
      <span class="hljs-keyword">const</span> ce = c * e, cf = c * f, de = d * e, df = d * f;
      te[<span class="hljs-number">0</span>] = ce + df * b;
      te[<span class="hljs-number">4</span>] = de * b - cf;
      te[<span class="hljs-number">8</span>] = a * d;
      te[<span class="hljs-number">1</span>] = a * f;
      te[<span class="hljs-number">5</span>] = a * e;
      te[<span class="hljs-number">9</span>] = -b;
      te[<span class="hljs-number">2</span>] = cf * b - de;
      te[<span class="hljs-number">6</span>] = df + ce * b;
      te[<span class="hljs-number">10</span>] = a * c;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (euler.<span class="hljs-property">order</span> === <span class="hljs-string">&quot;ZXY&quot;</span>) {
      <span class="hljs-keyword">const</span> ce = c * e, cf = c * f, de = d * e, df = d * f;
      te[<span class="hljs-number">0</span>] = ce - df * b;
      te[<span class="hljs-number">4</span>] = -a * f;
      te[<span class="hljs-number">8</span>] = de + cf * b;
      te[<span class="hljs-number">1</span>] = cf + de * b;
      te[<span class="hljs-number">5</span>] = a * e;
      te[<span class="hljs-number">9</span>] = df - ce * b;
      te[<span class="hljs-number">2</span>] = -a * d;
      te[<span class="hljs-number">6</span>] = b;
      te[<span class="hljs-number">10</span>] = a * c;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (euler.<span class="hljs-property">order</span> === <span class="hljs-string">&quot;ZYX&quot;</span>) {
      <span class="hljs-keyword">const</span> ae = a * e, af = a * f, be = b * e, bf = b * f;
      te[<span class="hljs-number">0</span>] = c * e;
      te[<span class="hljs-number">4</span>] = be * d - af;
      te[<span class="hljs-number">8</span>] = ae * d + bf;
      te[<span class="hljs-number">1</span>] = c * f;
      te[<span class="hljs-number">5</span>] = bf * d + ae;
      te[<span class="hljs-number">9</span>] = af * d - be;
      te[<span class="hljs-number">2</span>] = -d;
      te[<span class="hljs-number">6</span>] = b * c;
      te[<span class="hljs-number">10</span>] = a * c;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (euler.<span class="hljs-property">order</span> === <span class="hljs-string">&quot;YZX&quot;</span>) {
      <span class="hljs-keyword">const</span> ac = a * c, ad = a * d, bc = b * c, bd = b * d;
      te[<span class="hljs-number">0</span>] = c * e;
      te[<span class="hljs-number">4</span>] = bd - ac * f;
      te[<span class="hljs-number">8</span>] = bc * f + ad;
      te[<span class="hljs-number">1</span>] = f;
      te[<span class="hljs-number">5</span>] = a * e;
      te[<span class="hljs-number">9</span>] = -b * e;
      te[<span class="hljs-number">2</span>] = -d * e;
      te[<span class="hljs-number">6</span>] = ad * f + bc;
      te[<span class="hljs-number">10</span>] = ac - bd * f;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (euler.<span class="hljs-property">order</span> === <span class="hljs-string">&quot;XZY&quot;</span>) {
      <span class="hljs-keyword">const</span> ac = a * c, ad = a * d, bc = b * c, bd = b * d;
      te[<span class="hljs-number">0</span>] = c * e;
      te[<span class="hljs-number">4</span>] = -f;
      te[<span class="hljs-number">8</span>] = d * e;
      te[<span class="hljs-number">1</span>] = ac * f + bd;
      te[<span class="hljs-number">5</span>] = a * e;
      te[<span class="hljs-number">9</span>] = ad * f - bc;
      te[<span class="hljs-number">2</span>] = bc * f - ad;
      te[<span class="hljs-number">6</span>] = b * e;
      te[<span class="hljs-number">10</span>] = bd * f + ac;
    }
    te[<span class="hljs-number">3</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">7</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">11</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">12</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">13</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">14</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">15</span>] = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">makeRotationFromQuaternion</span>(<span class="hljs-params">q</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">compose</span>(_zero, q, _one);
  }
  <span class="hljs-title function_">lookAt</span>(<span class="hljs-params">eye, target, up</span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    _z.<span class="hljs-title function_">subVectors</span>(eye, target);
    <span class="hljs-keyword">if</span> (_z.<span class="hljs-title function_">lengthSq</span>() === <span class="hljs-number">0</span>) {
      _z.<span class="hljs-property">z</span> = <span class="hljs-number">1</span>;
    }
    _z.<span class="hljs-title function_">normalize</span>();
    _x.<span class="hljs-title function_">crossVectors</span>(up, _z);
    <span class="hljs-keyword">if</span> (_x.<span class="hljs-title function_">lengthSq</span>() === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(up.<span class="hljs-property">z</span>) === <span class="hljs-number">1</span>) {
        _z.<span class="hljs-property">x</span> += <span class="hljs-number">1e-4</span>;
      } <span class="hljs-keyword">else</span> {
        _z.<span class="hljs-property">z</span> += <span class="hljs-number">1e-4</span>;
      }
      _z.<span class="hljs-title function_">normalize</span>();
      _x.<span class="hljs-title function_">crossVectors</span>(up, _z);
    }
    _x.<span class="hljs-title function_">normalize</span>();
    _y.<span class="hljs-title function_">crossVectors</span>(_z, _x);
    te[<span class="hljs-number">0</span>] = _x.<span class="hljs-property">x</span>;
    te[<span class="hljs-number">4</span>] = _y.<span class="hljs-property">x</span>;
    te[<span class="hljs-number">8</span>] = _z.<span class="hljs-property">x</span>;
    te[<span class="hljs-number">1</span>] = _x.<span class="hljs-property">y</span>;
    te[<span class="hljs-number">5</span>] = _y.<span class="hljs-property">y</span>;
    te[<span class="hljs-number">9</span>] = _z.<span class="hljs-property">y</span>;
    te[<span class="hljs-number">2</span>] = _x.<span class="hljs-property">z</span>;
    te[<span class="hljs-number">6</span>] = _y.<span class="hljs-property">z</span>;
    te[<span class="hljs-number">10</span>] = _z.<span class="hljs-property">z</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">multiply</span>(<span class="hljs-params">m</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">multiplyMatrices</span>(<span class="hljs-variable language_">this</span>, m);
  }
  <span class="hljs-title function_">premultiply</span>(<span class="hljs-params">m</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">multiplyMatrices</span>(m, <span class="hljs-variable language_">this</span>);
  }
  <span class="hljs-title function_">multiplyMatrices</span>(<span class="hljs-params">a, b</span>) {
    <span class="hljs-keyword">const</span> ae = a.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> be = b.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> a11 = ae[<span class="hljs-number">0</span>], a12 = ae[<span class="hljs-number">4</span>], a13 = ae[<span class="hljs-number">8</span>], a14 = ae[<span class="hljs-number">12</span>];
    <span class="hljs-keyword">const</span> a21 = ae[<span class="hljs-number">1</span>], a22 = ae[<span class="hljs-number">5</span>], a23 = ae[<span class="hljs-number">9</span>], a24 = ae[<span class="hljs-number">13</span>];
    <span class="hljs-keyword">const</span> a31 = ae[<span class="hljs-number">2</span>], a32 = ae[<span class="hljs-number">6</span>], a33 = ae[<span class="hljs-number">10</span>], a34 = ae[<span class="hljs-number">14</span>];
    <span class="hljs-keyword">const</span> a41 = ae[<span class="hljs-number">3</span>], a42 = ae[<span class="hljs-number">7</span>], a43 = ae[<span class="hljs-number">11</span>], a44 = ae[<span class="hljs-number">15</span>];
    <span class="hljs-keyword">const</span> b11 = be[<span class="hljs-number">0</span>], b12 = be[<span class="hljs-number">4</span>], b13 = be[<span class="hljs-number">8</span>], b14 = be[<span class="hljs-number">12</span>];
    <span class="hljs-keyword">const</span> b21 = be[<span class="hljs-number">1</span>], b22 = be[<span class="hljs-number">5</span>], b23 = be[<span class="hljs-number">9</span>], b24 = be[<span class="hljs-number">13</span>];
    <span class="hljs-keyword">const</span> b31 = be[<span class="hljs-number">2</span>], b32 = be[<span class="hljs-number">6</span>], b33 = be[<span class="hljs-number">10</span>], b34 = be[<span class="hljs-number">14</span>];
    <span class="hljs-keyword">const</span> b41 = be[<span class="hljs-number">3</span>], b42 = be[<span class="hljs-number">7</span>], b43 = be[<span class="hljs-number">11</span>], b44 = be[<span class="hljs-number">15</span>];
    te[<span class="hljs-number">0</span>] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;
    te[<span class="hljs-number">4</span>] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;
    te[<span class="hljs-number">8</span>] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;
    te[<span class="hljs-number">12</span>] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;
    te[<span class="hljs-number">1</span>] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;
    te[<span class="hljs-number">5</span>] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;
    te[<span class="hljs-number">9</span>] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;
    te[<span class="hljs-number">13</span>] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;
    te[<span class="hljs-number">2</span>] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;
    te[<span class="hljs-number">6</span>] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;
    te[<span class="hljs-number">10</span>] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;
    te[<span class="hljs-number">14</span>] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;
    te[<span class="hljs-number">3</span>] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;
    te[<span class="hljs-number">7</span>] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;
    te[<span class="hljs-number">11</span>] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;
    te[<span class="hljs-number">15</span>] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">multiplyScalar</span>(<span class="hljs-params">s</span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    te[<span class="hljs-number">0</span>] *= s;
    te[<span class="hljs-number">4</span>] *= s;
    te[<span class="hljs-number">8</span>] *= s;
    te[<span class="hljs-number">12</span>] *= s;
    te[<span class="hljs-number">1</span>] *= s;
    te[<span class="hljs-number">5</span>] *= s;
    te[<span class="hljs-number">9</span>] *= s;
    te[<span class="hljs-number">13</span>] *= s;
    te[<span class="hljs-number">2</span>] *= s;
    te[<span class="hljs-number">6</span>] *= s;
    te[<span class="hljs-number">10</span>] *= s;
    te[<span class="hljs-number">14</span>] *= s;
    te[<span class="hljs-number">3</span>] *= s;
    te[<span class="hljs-number">7</span>] *= s;
    te[<span class="hljs-number">11</span>] *= s;
    te[<span class="hljs-number">15</span>] *= s;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">determinant</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> n11 = te[<span class="hljs-number">0</span>], n12 = te[<span class="hljs-number">4</span>], n13 = te[<span class="hljs-number">8</span>], n14 = te[<span class="hljs-number">12</span>];
    <span class="hljs-keyword">const</span> n21 = te[<span class="hljs-number">1</span>], n22 = te[<span class="hljs-number">5</span>], n23 = te[<span class="hljs-number">9</span>], n24 = te[<span class="hljs-number">13</span>];
    <span class="hljs-keyword">const</span> n31 = te[<span class="hljs-number">2</span>], n32 = te[<span class="hljs-number">6</span>], n33 = te[<span class="hljs-number">10</span>], n34 = te[<span class="hljs-number">14</span>];
    <span class="hljs-keyword">const</span> n41 = te[<span class="hljs-number">3</span>], n42 = te[<span class="hljs-number">7</span>], n43 = te[<span class="hljs-number">11</span>], n44 = te[<span class="hljs-number">15</span>];
    <span class="hljs-keyword">return</span> n41 * (+n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34) + n42 * (+n11 * n23 * n34 - n11 * n24 * n33 + n14 * n21 * n33 - n13 * n21 * n34 + n13 * n24 * n31 - n14 * n23 * n31) + n43 * (+n11 * n24 * n32 - n11 * n22 * n34 - n14 * n21 * n32 + n12 * n21 * n34 + n14 * n22 * n31 - n12 * n24 * n31) + n44 * (-n13 * n22 * n31 - n11 * n23 * n32 + n11 * n22 * n33 + n13 * n21 * n32 - n12 * n21 * n33 + n12 * n23 * n31);
  }
  <span class="hljs-title function_">transpose</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">let</span> tmp;
    tmp = te[<span class="hljs-number">1</span>];
    te[<span class="hljs-number">1</span>] = te[<span class="hljs-number">4</span>];
    te[<span class="hljs-number">4</span>] = tmp;
    tmp = te[<span class="hljs-number">2</span>];
    te[<span class="hljs-number">2</span>] = te[<span class="hljs-number">8</span>];
    te[<span class="hljs-number">8</span>] = tmp;
    tmp = te[<span class="hljs-number">6</span>];
    te[<span class="hljs-number">6</span>] = te[<span class="hljs-number">9</span>];
    te[<span class="hljs-number">9</span>] = tmp;
    tmp = te[<span class="hljs-number">3</span>];
    te[<span class="hljs-number">3</span>] = te[<span class="hljs-number">12</span>];
    te[<span class="hljs-number">12</span>] = tmp;
    tmp = te[<span class="hljs-number">7</span>];
    te[<span class="hljs-number">7</span>] = te[<span class="hljs-number">13</span>];
    te[<span class="hljs-number">13</span>] = tmp;
    tmp = te[<span class="hljs-number">11</span>];
    te[<span class="hljs-number">11</span>] = te[<span class="hljs-number">14</span>];
    te[<span class="hljs-number">14</span>] = tmp;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">setPosition</span>(<span class="hljs-params">x, y, z</span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">if</span> (x.<span class="hljs-property">isVector3</span>) {
      te[<span class="hljs-number">12</span>] = x.<span class="hljs-property">x</span>;
      te[<span class="hljs-number">13</span>] = x.<span class="hljs-property">y</span>;
      te[<span class="hljs-number">14</span>] = x.<span class="hljs-property">z</span>;
    } <span class="hljs-keyword">else</span> {
      te[<span class="hljs-number">12</span>] = x;
      te[<span class="hljs-number">13</span>] = y;
      te[<span class="hljs-number">14</span>] = z;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">invert</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>, n11 = te[<span class="hljs-number">0</span>], n21 = te[<span class="hljs-number">1</span>], n31 = te[<span class="hljs-number">2</span>], n41 = te[<span class="hljs-number">3</span>], n12 = te[<span class="hljs-number">4</span>], n22 = te[<span class="hljs-number">5</span>], n32 = te[<span class="hljs-number">6</span>], n42 = te[<span class="hljs-number">7</span>], n13 = te[<span class="hljs-number">8</span>], n23 = te[<span class="hljs-number">9</span>], n33 = te[<span class="hljs-number">10</span>], n43 = te[<span class="hljs-number">11</span>], n14 = te[<span class="hljs-number">12</span>], n24 = te[<span class="hljs-number">13</span>], n34 = te[<span class="hljs-number">14</span>], n44 = te[<span class="hljs-number">15</span>], t11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44, t12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44, t13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44, t14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;
    <span class="hljs-keyword">const</span> det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;
    <span class="hljs-keyword">if</span> (det === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> detInv = <span class="hljs-number">1</span> / det;
    te[<span class="hljs-number">0</span>] = t11 * detInv;
    te[<span class="hljs-number">1</span>] = (n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44) * detInv;
    te[<span class="hljs-number">2</span>] = (n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44) * detInv;
    te[<span class="hljs-number">3</span>] = (n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43) * detInv;
    te[<span class="hljs-number">4</span>] = t12 * detInv;
    te[<span class="hljs-number">5</span>] = (n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44) * detInv;
    te[<span class="hljs-number">6</span>] = (n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44) * detInv;
    te[<span class="hljs-number">7</span>] = (n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43) * detInv;
    te[<span class="hljs-number">8</span>] = t13 * detInv;
    te[<span class="hljs-number">9</span>] = (n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44) * detInv;
    te[<span class="hljs-number">10</span>] = (n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44) * detInv;
    te[<span class="hljs-number">11</span>] = (n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43) * detInv;
    te[<span class="hljs-number">12</span>] = t14 * detInv;
    te[<span class="hljs-number">13</span>] = (n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34) * detInv;
    te[<span class="hljs-number">14</span>] = (n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34) * detInv;
    te[<span class="hljs-number">15</span>] = (n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33) * detInv;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">scale</span>(<span class="hljs-params">v</span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> x = v.<span class="hljs-property">x</span>, y = v.<span class="hljs-property">y</span>, z = v.<span class="hljs-property">z</span>;
    te[<span class="hljs-number">0</span>] *= x;
    te[<span class="hljs-number">4</span>] *= y;
    te[<span class="hljs-number">8</span>] *= z;
    te[<span class="hljs-number">1</span>] *= x;
    te[<span class="hljs-number">5</span>] *= y;
    te[<span class="hljs-number">9</span>] *= z;
    te[<span class="hljs-number">2</span>] *= x;
    te[<span class="hljs-number">6</span>] *= y;
    te[<span class="hljs-number">10</span>] *= z;
    te[<span class="hljs-number">3</span>] *= x;
    te[<span class="hljs-number">7</span>] *= y;
    te[<span class="hljs-number">11</span>] *= z;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">getMaxScaleOnAxis</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> scaleXSq = te[<span class="hljs-number">0</span>] * te[<span class="hljs-number">0</span>] + te[<span class="hljs-number">1</span>] * te[<span class="hljs-number">1</span>] + te[<span class="hljs-number">2</span>] * te[<span class="hljs-number">2</span>];
    <span class="hljs-keyword">const</span> scaleYSq = te[<span class="hljs-number">4</span>] * te[<span class="hljs-number">4</span>] + te[<span class="hljs-number">5</span>] * te[<span class="hljs-number">5</span>] + te[<span class="hljs-number">6</span>] * te[<span class="hljs-number">6</span>];
    <span class="hljs-keyword">const</span> scaleZSq = te[<span class="hljs-number">8</span>] * te[<span class="hljs-number">8</span>] + te[<span class="hljs-number">9</span>] * te[<span class="hljs-number">9</span>] + te[<span class="hljs-number">10</span>] * te[<span class="hljs-number">10</span>];
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(scaleXSq, scaleYSq, scaleZSq));
  }
  <span class="hljs-title function_">makeTranslation</span>(<span class="hljs-params">x, y, z</span>) {
    <span class="hljs-keyword">if</span> (x.<span class="hljs-property">isVector3</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(
        <span class="hljs-number">1</span>,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">0</span>,
        x.<span class="hljs-property">x</span>,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">1</span>,
        <span class="hljs-number">0</span>,
        x.<span class="hljs-property">y</span>,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">1</span>,
        x.<span class="hljs-property">z</span>,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">1</span>
      );
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(
        <span class="hljs-number">1</span>,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">0</span>,
        x,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">1</span>,
        <span class="hljs-number">0</span>,
        y,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">1</span>,
        z,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">0</span>,
        <span class="hljs-number">1</span>
      );
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">makeRotationX</span>(<span class="hljs-params">theta</span>) {
    <span class="hljs-keyword">const</span> c = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(theta), s = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(theta);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(
      <span class="hljs-number">1</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      c,
      -s,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      s,
      c,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>
    );
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">makeRotationY</span>(<span class="hljs-params">theta</span>) {
    <span class="hljs-keyword">const</span> c = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(theta), s = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(theta);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(
      c,
      <span class="hljs-number">0</span>,
      s,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      -s,
      <span class="hljs-number">0</span>,
      c,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>
    );
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">makeRotationZ</span>(<span class="hljs-params">theta</span>) {
    <span class="hljs-keyword">const</span> c = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(theta), s = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(theta);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(
      c,
      -s,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      s,
      c,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>
    );
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">makeRotationAxis</span>(<span class="hljs-params">axis, angle</span>) {
    <span class="hljs-keyword">const</span> c = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(angle);
    <span class="hljs-keyword">const</span> s = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(angle);
    <span class="hljs-keyword">const</span> t = <span class="hljs-number">1</span> - c;
    <span class="hljs-keyword">const</span> x = axis.<span class="hljs-property">x</span>, y = axis.<span class="hljs-property">y</span>, z = axis.<span class="hljs-property">z</span>;
    <span class="hljs-keyword">const</span> tx = t * x, ty = t * y;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(
      tx * x + c,
      tx * y - s * z,
      tx * z + s * y,
      <span class="hljs-number">0</span>,
      tx * y + s * z,
      ty * y + c,
      ty * z - s * x,
      <span class="hljs-number">0</span>,
      tx * z - s * y,
      ty * z + s * x,
      t * z * z + c,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>
    );
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">makeScale</span>(<span class="hljs-params">x, y, z</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(
      x,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      y,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      z,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>
    );
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">makeShear</span>(<span class="hljs-params">xy, xz, yx, yz, zx, zy</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(
      <span class="hljs-number">1</span>,
      yx,
      zx,
      <span class="hljs-number">0</span>,
      xy,
      <span class="hljs-number">1</span>,
      zy,
      <span class="hljs-number">0</span>,
      xz,
      yz,
      <span class="hljs-number">1</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">1</span>
    );
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">compose</span>(<span class="hljs-params">position, quaternion, scale</span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> x = quaternion.<span class="hljs-property">_x</span>, y = quaternion.<span class="hljs-property">_y</span>, z = quaternion.<span class="hljs-property">_z</span>, w = quaternion.<span class="hljs-property">_w</span>;
    <span class="hljs-keyword">const</span> x2 = x + x, y2 = y + y, z2 = z + z;
    <span class="hljs-keyword">const</span> xx = x * x2, xy = x * y2, xz = x * z2;
    <span class="hljs-keyword">const</span> yy = y * y2, yz = y * z2, zz = z * z2;
    <span class="hljs-keyword">const</span> wx = w * x2, wy = w * y2, wz = w * z2;
    <span class="hljs-keyword">const</span> sx = scale.<span class="hljs-property">x</span>, sy = scale.<span class="hljs-property">y</span>, sz = scale.<span class="hljs-property">z</span>;
    te[<span class="hljs-number">0</span>] = (<span class="hljs-number">1</span> - (yy + zz)) * sx;
    te[<span class="hljs-number">1</span>] = (xy + wz) * sx;
    te[<span class="hljs-number">2</span>] = (xz - wy) * sx;
    te[<span class="hljs-number">3</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">4</span>] = (xy - wz) * sy;
    te[<span class="hljs-number">5</span>] = (<span class="hljs-number">1</span> - (xx + zz)) * sy;
    te[<span class="hljs-number">6</span>] = (yz + wx) * sy;
    te[<span class="hljs-number">7</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">8</span>] = (xz + wy) * sz;
    te[<span class="hljs-number">9</span>] = (yz - wx) * sz;
    te[<span class="hljs-number">10</span>] = (<span class="hljs-number">1</span> - (xx + yy)) * sz;
    te[<span class="hljs-number">11</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">12</span>] = position.<span class="hljs-property">x</span>;
    te[<span class="hljs-number">13</span>] = position.<span class="hljs-property">y</span>;
    te[<span class="hljs-number">14</span>] = position.<span class="hljs-property">z</span>;
    te[<span class="hljs-number">15</span>] = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">decompose</span>(<span class="hljs-params">position, quaternion, scale</span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">let</span> sx = _v1.<span class="hljs-title function_">set</span>(te[<span class="hljs-number">0</span>], te[<span class="hljs-number">1</span>], te[<span class="hljs-number">2</span>]).<span class="hljs-title function_">length</span>();
    <span class="hljs-keyword">const</span> sy = _v1.<span class="hljs-title function_">set</span>(te[<span class="hljs-number">4</span>], te[<span class="hljs-number">5</span>], te[<span class="hljs-number">6</span>]).<span class="hljs-title function_">length</span>();
    <span class="hljs-keyword">const</span> sz = _v1.<span class="hljs-title function_">set</span>(te[<span class="hljs-number">8</span>], te[<span class="hljs-number">9</span>], te[<span class="hljs-number">10</span>]).<span class="hljs-title function_">length</span>();
    <span class="hljs-keyword">const</span> det = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">determinant</span>();
    <span class="hljs-keyword">if</span> (det &lt; <span class="hljs-number">0</span>) sx = -sx;
    position.<span class="hljs-property">x</span> = te[<span class="hljs-number">12</span>];
    position.<span class="hljs-property">y</span> = te[<span class="hljs-number">13</span>];
    position.<span class="hljs-property">z</span> = te[<span class="hljs-number">14</span>];
    _m1.<span class="hljs-title function_">copy</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-keyword">const</span> invSX = <span class="hljs-number">1</span> / sx;
    <span class="hljs-keyword">const</span> invSY = <span class="hljs-number">1</span> / sy;
    <span class="hljs-keyword">const</span> invSZ = <span class="hljs-number">1</span> / sz;
    _m1.<span class="hljs-property">elements</span>[<span class="hljs-number">0</span>] *= invSX;
    _m1.<span class="hljs-property">elements</span>[<span class="hljs-number">1</span>] *= invSX;
    _m1.<span class="hljs-property">elements</span>[<span class="hljs-number">2</span>] *= invSX;
    _m1.<span class="hljs-property">elements</span>[<span class="hljs-number">4</span>] *= invSY;
    _m1.<span class="hljs-property">elements</span>[<span class="hljs-number">5</span>] *= invSY;
    _m1.<span class="hljs-property">elements</span>[<span class="hljs-number">6</span>] *= invSY;
    _m1.<span class="hljs-property">elements</span>[<span class="hljs-number">8</span>] *= invSZ;
    _m1.<span class="hljs-property">elements</span>[<span class="hljs-number">9</span>] *= invSZ;
    _m1.<span class="hljs-property">elements</span>[<span class="hljs-number">10</span>] *= invSZ;
    quaternion.<span class="hljs-title function_">setFromRotationMatrix</span>(_m1);
    scale.<span class="hljs-property">x</span> = sx;
    scale.<span class="hljs-property">y</span> = sy;
    scale.<span class="hljs-property">z</span> = sz;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">makePerspective</span>(<span class="hljs-params">left, right, top, bottom, near, far, coordinateSystem = WebGLCoordinateSystem</span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> x = <span class="hljs-number">2</span> * near / (right - left);
    <span class="hljs-keyword">const</span> y = <span class="hljs-number">2</span> * near / (top - bottom);
    <span class="hljs-keyword">const</span> a = (right + left) / (right - left);
    <span class="hljs-keyword">const</span> b = (top + bottom) / (top - bottom);
    <span class="hljs-keyword">let</span> c, d;
    <span class="hljs-keyword">if</span> (coordinateSystem === <span class="hljs-title class_">WebGLCoordinateSystem</span>) {
      c = -(far + near) / (far - near);
      d = -<span class="hljs-number">2</span> * far * near / (far - near);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (coordinateSystem === <span class="hljs-title class_">WebGPUCoordinateSystem</span>) {
      c = -far / (far - near);
      d = -far * near / (far - near);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;THREE.Matrix4.makePerspective(): Invalid coordinate system: &quot;</span> + coordinateSystem);
    }
    te[<span class="hljs-number">0</span>] = x;
    te[<span class="hljs-number">4</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">8</span>] = a;
    te[<span class="hljs-number">12</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">5</span>] = y;
    te[<span class="hljs-number">9</span>] = b;
    te[<span class="hljs-number">13</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">2</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">6</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">10</span>] = c;
    te[<span class="hljs-number">14</span>] = d;
    te[<span class="hljs-number">3</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">7</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">11</span>] = -<span class="hljs-number">1</span>;
    te[<span class="hljs-number">15</span>] = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">makeOrthographic</span>(<span class="hljs-params">left, right, top, bottom, near, far, coordinateSystem = WebGLCoordinateSystem</span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> w = <span class="hljs-number">1</span> / (right - left);
    <span class="hljs-keyword">const</span> h = <span class="hljs-number">1</span> / (top - bottom);
    <span class="hljs-keyword">const</span> p = <span class="hljs-number">1</span> / (far - near);
    <span class="hljs-keyword">const</span> x = (right + left) * w;
    <span class="hljs-keyword">const</span> y = (top + bottom) * h;
    <span class="hljs-keyword">let</span> z, zInv;
    <span class="hljs-keyword">if</span> (coordinateSystem === <span class="hljs-title class_">WebGLCoordinateSystem</span>) {
      z = (far + near) * p;
      zInv = -<span class="hljs-number">2</span> * p;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (coordinateSystem === <span class="hljs-title class_">WebGPUCoordinateSystem</span>) {
      z = near * p;
      zInv = -<span class="hljs-number">1</span> * p;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;THREE.Matrix4.makeOrthographic(): Invalid coordinate system: &quot;</span> + coordinateSystem);
    }
    te[<span class="hljs-number">0</span>] = <span class="hljs-number">2</span> * w;
    te[<span class="hljs-number">4</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">8</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">12</span>] = -x;
    te[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">5</span>] = <span class="hljs-number">2</span> * h;
    te[<span class="hljs-number">9</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">13</span>] = -y;
    te[<span class="hljs-number">2</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">6</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">10</span>] = zInv;
    te[<span class="hljs-number">14</span>] = -z;
    te[<span class="hljs-number">3</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">7</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">11</span>] = <span class="hljs-number">0</span>;
    te[<span class="hljs-number">15</span>] = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">equals</span>(<span class="hljs-params">matrix</span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> me = matrix.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">16</span>; i++) {
      <span class="hljs-keyword">if</span> (te[i] !== me[i]) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-title function_">fromArray</span>(<span class="hljs-params">array, offset = <span class="hljs-number">0</span></span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">16</span>; i++) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>[i] = array[i + offset];
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">toArray</span>(<span class="hljs-params">array = [], offset = <span class="hljs-number">0</span></span>) {
    <span class="hljs-keyword">const</span> te = <span class="hljs-variable language_">this</span>.<span class="hljs-property">elements</span>;
    array[offset] = te[<span class="hljs-number">0</span>];
    array[offset + <span class="hljs-number">1</span>] = te[<span class="hljs-number">1</span>];
    array[offset + <span class="hljs-number">2</span>] = te[<span class="hljs-number">2</span>];
    array[offset + <span class="hljs-number">3</span>] = te[<span class="hljs-number">3</span>];
    array[offset + <span class="hljs-number">4</span>] = te[<span class="hljs-number">4</span>];
    array[offset + <span class="hljs-number">5</span>] = te[<span class="hljs-number">5</span>];
    array[offset + <span class="hljs-number">6</span>] = te[<span class="hljs-number">6</span>];
    array[offset + <span class="hljs-number">7</span>] = te[<span class="hljs-number">7</span>];
    array[offset + <span class="hljs-number">8</span>] = te[<span class="hljs-number">8</span>];
    array[offset + <span class="hljs-number">9</span>] = te[<span class="hljs-number">9</span>];
    array[offset + <span class="hljs-number">10</span>] = te[<span class="hljs-number">10</span>];
    array[offset + <span class="hljs-number">11</span>] = te[<span class="hljs-number">11</span>];
    array[offset + <span class="hljs-number">12</span>] = te[<span class="hljs-number">12</span>];
    array[offset + <span class="hljs-number">13</span>] = te[<span class="hljs-number">13</span>];
    array[offset + <span class="hljs-number">14</span>] = te[<span class="hljs-number">14</span>];
    array[offset + <span class="hljs-number">15</span>] = te[<span class="hljs-number">15</span>];
    <span class="hljs-keyword">return</span> array;
  }
};
<span class="hljs-keyword">var</span> _v1 = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>();
<span class="hljs-keyword">var</span> _m1 = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix4</span>();
<span class="hljs-keyword">var</span> _zero = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
<span class="hljs-keyword">var</span> _one = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
<span class="hljs-keyword">var</span> _x = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>();
<span class="hljs-keyword">var</span> _y = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>();
<span class="hljs-keyword">var</span> _z = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>();

<span class="hljs-comment">// lib/math/Euler.mjs</span>
<span class="hljs-keyword">var</span> _matrix = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix4</span>();
<span class="hljs-keyword">var</span> _quaternion = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Quaternion</span>();
<span class="hljs-keyword">var</span> <span class="hljs-title class_">Euler</span> = <span class="hljs-keyword">class</span> <span class="hljs-title class_">_Euler</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">x = <span class="hljs-number">0</span>, y = <span class="hljs-number">0</span>, z = <span class="hljs-number">0</span>, order = _Euler.DEFAULT_ORDER</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isEuler</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = x;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = y;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = z;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_order</span> = order;
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">x</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span>;
  }
  <span class="hljs-keyword">set</span> <span class="hljs-title function_">x</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = value;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">y</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span>;
  }
  <span class="hljs-keyword">set</span> <span class="hljs-title function_">y</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = value;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">z</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span>;
  }
  <span class="hljs-keyword">set</span> <span class="hljs-title function_">z</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = value;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">order</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_order</span>;
  }
  <span class="hljs-keyword">set</span> <span class="hljs-title function_">order</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_order</span> = value;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
  }
  <span class="hljs-title function_">set</span>(<span class="hljs-params">x, y, z, order = <span class="hljs-variable language_">this</span>._order</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = x;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = y;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = z;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_order</span> = order;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">clone</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-variable language_">this</span>._x, <span class="hljs-variable language_">this</span>._y, <span class="hljs-variable language_">this</span>._z, <span class="hljs-variable language_">this</span>._order</span>);
  }
  <span class="hljs-title function_">copy</span>(<span class="hljs-params">euler</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = euler.<span class="hljs-property">_x</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = euler.<span class="hljs-property">_y</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = euler.<span class="hljs-property">_z</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_order</span> = euler.<span class="hljs-property">_order</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">setFromRotationMatrix</span>(<span class="hljs-params">m, order = <span class="hljs-variable language_">this</span>._order, update = <span class="hljs-literal">true</span></span>) {
    <span class="hljs-keyword">const</span> te = m.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">const</span> m11 = te[<span class="hljs-number">0</span>], m12 = te[<span class="hljs-number">4</span>], m13 = te[<span class="hljs-number">8</span>];
    <span class="hljs-keyword">const</span> m21 = te[<span class="hljs-number">1</span>], m22 = te[<span class="hljs-number">5</span>], m23 = te[<span class="hljs-number">9</span>];
    <span class="hljs-keyword">const</span> m31 = te[<span class="hljs-number">2</span>], m32 = te[<span class="hljs-number">6</span>], m33 = te[<span class="hljs-number">10</span>];
    <span class="hljs-keyword">switch</span> (order) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;XYZ&quot;</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">asin</span>(<span class="hljs-title function_">clamp</span>(m13, -<span class="hljs-number">1</span>, <span class="hljs-number">1</span>));
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(m13) &lt; <span class="hljs-number">0.9999999</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(-m23, m33);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(-m12, m11);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(m32, m22);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;YXZ&quot;</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">asin</span>(-<span class="hljs-title function_">clamp</span>(m23, -<span class="hljs-number">1</span>, <span class="hljs-number">1</span>));
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(m23) &lt; <span class="hljs-number">0.9999999</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(m13, m33);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(m21, m22);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(-m31, m11);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;ZXY&quot;</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">asin</span>(<span class="hljs-title function_">clamp</span>(m32, -<span class="hljs-number">1</span>, <span class="hljs-number">1</span>));
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(m32) &lt; <span class="hljs-number">0.9999999</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(-m31, m33);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(-m12, m22);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = <span class="hljs-number">0</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(m21, m11);
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;ZYX&quot;</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">asin</span>(-<span class="hljs-title function_">clamp</span>(m31, -<span class="hljs-number">1</span>, <span class="hljs-number">1</span>));
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(m31) &lt; <span class="hljs-number">0.9999999</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(m32, m33);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(m21, m11);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = <span class="hljs-number">0</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(-m12, m22);
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;YZX&quot;</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">asin</span>(<span class="hljs-title function_">clamp</span>(m21, -<span class="hljs-number">1</span>, <span class="hljs-number">1</span>));
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(m21) &lt; <span class="hljs-number">0.9999999</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(-m23, m22);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(-m31, m11);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = <span class="hljs-number">0</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(m13, m33);
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;XZY&quot;</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">asin</span>(-<span class="hljs-title function_">clamp</span>(m12, -<span class="hljs-number">1</span>, <span class="hljs-number">1</span>));
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(m12) &lt; <span class="hljs-number">0.9999999</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(m32, m22);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(m13, m11);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(-m23, m33);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-attr">default</span>:
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&quot;THREE.Euler: .setFromRotationMatrix() encountered an unknown order: &quot;</span> + order);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_order</span> = order;
    <span class="hljs-keyword">if</span> (update === <span class="hljs-literal">true</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">setFromQuaternion</span>(<span class="hljs-params">q, order, update</span>) {
    _matrix.<span class="hljs-title function_">makeRotationFromQuaternion</span>(q);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setFromRotationMatrix</span>(_matrix, order, update);
  }
  <span class="hljs-title function_">setFromVector3</span>(<span class="hljs-params">v, order = <span class="hljs-variable language_">this</span>._order</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>(v.<span class="hljs-property">x</span>, v.<span class="hljs-property">y</span>, v.<span class="hljs-property">z</span>, order);
  }
  <span class="hljs-title function_">reorder</span>(<span class="hljs-params">newOrder</span>) {
    _quaternion.<span class="hljs-title function_">setFromEuler</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setFromQuaternion</span>(_quaternion, newOrder);
  }
  <span class="hljs-title function_">equals</span>(<span class="hljs-params">euler</span>) {
    <span class="hljs-keyword">return</span> euler.<span class="hljs-property">_x</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> &amp;&amp; euler.<span class="hljs-property">_y</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> &amp;&amp; euler.<span class="hljs-property">_z</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> &amp;&amp; euler.<span class="hljs-property">_order</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">_order</span>;
  }
  <span class="hljs-title function_">fromArray</span>(<span class="hljs-params">array</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span> = array[<span class="hljs-number">0</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span> = array[<span class="hljs-number">1</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span> = array[<span class="hljs-number">2</span>];
    <span class="hljs-keyword">if</span> (array[<span class="hljs-number">3</span>] !== <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">_order</span> = array[<span class="hljs-number">3</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_onChangeCallback</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">toArray</span>(<span class="hljs-params">array = [], offset = <span class="hljs-number">0</span></span>) {
    array[offset] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span>;
    array[offset + <span class="hljs-number">1</span>] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span>;
    array[offset + <span class="hljs-number">2</span>] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span>;
    array[offset + <span class="hljs-number">3</span>] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_order</span>;
    <span class="hljs-keyword">return</span> array;
  }
  <span class="hljs-title function_">_onChange</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_onChangeCallback</span> = callback;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  <span class="hljs-title function_">_onChangeCallback</span>(<span class="hljs-params"></span>) {
  }
  *[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]() {
    <span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_x</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_y</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_z</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_order</span>;
  }
};
<span class="hljs-title class_">Euler</span>.<span class="hljs-property">DEFAULT_ORDER</span> = <span class="hljs-string">&quot;XYZ&quot;</span>;

<span class="hljs-comment">// lib/cameras/Object3D.mjs</span>
<span class="hljs-keyword">var</span> _m12 = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix4</span>();
<span class="hljs-keyword">var</span> _target = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>();
<span class="hljs-keyword">var</span> _position = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>();
<span class="hljs-keyword">var</span> <span class="hljs-title class_">Object3D</span> = <span class="hljs-keyword">class</span> <span class="hljs-title class_">_Object3D</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">up</span> = _Object3D.<span class="hljs-property">DEFAULT_UP</span>.<span class="hljs-title function_">clone</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rotation</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Euler</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">quaternion</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Quaternion</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">scale</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onRotationChange</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">quaternion</span>.<span class="hljs-title function_">setFromEuler</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">rotation</span>, <span class="hljs-literal">false</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onQuaternionChange</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">rotation</span>.<span class="hljs-title function_">setFromQuaternion</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">quaternion</span>, <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>, <span class="hljs-literal">false</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rotation</span>.<span class="hljs-title function_">_onChange</span>(onRotationChange);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">quaternion</span>.<span class="hljs-title function_">_onChange</span>(onQuaternionChange);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix4</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixWorld</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix4</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixWorldNeedsUpdate</span> = <span class="hljs-literal">false</span>;
  }
  <span class="hljs-title function_">lookAt</span>(<span class="hljs-params">x, y, z</span>) {
    <span class="hljs-keyword">if</span> (x.<span class="hljs-property">isVector3</span>) {
      _target.<span class="hljs-title function_">copy</span>(x);
    } <span class="hljs-keyword">else</span> {
      _target.<span class="hljs-title function_">set</span>(x, y, z);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateWorldMatrix</span>(<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>);
    _position.<span class="hljs-title function_">setFromMatrixPosition</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixWorld</span>);
    _m12.<span class="hljs-title function_">lookAt</span>(_position, _target, <span class="hljs-variable language_">this</span>.<span class="hljs-property">up</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">quaternion</span>.<span class="hljs-title function_">setFromRotationMatrix</span>(_m12);
  }
  <span class="hljs-title function_">updateMatrix</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-title function_">compose</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">quaternion</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">scale</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixWorldNeedsUpdate</span> = <span class="hljs-literal">true</span>;
  }
  <span class="hljs-title function_">updateMatrixWorld</span>(<span class="hljs-params">force</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateMatrix</span>();
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixWorldNeedsUpdate</span> || force) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixWorld</span>.<span class="hljs-title function_">copy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixWorldNeedsUpdate</span> = <span class="hljs-literal">false</span>;
      force = <span class="hljs-literal">true</span>;
    }
  }
  <span class="hljs-title function_">updateWorldMatrix</span>(<span class="hljs-params">updateParents, updateChildren</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateMatrix</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixWorld</span>.<span class="hljs-title function_">copy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>);
  }
};
<span class="hljs-title class_">Object3D</span>.<span class="hljs-property">DEFAULT_UP</span> = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);

<span class="hljs-comment">// lib/cameras/Camera.mjs</span>
<span class="hljs-keyword">var</span> <span class="hljs-title class_">Camera</span> = <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> <span class="hljs-title class_">Object3D</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixWorldInverse</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix4</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">projectionMatrix</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix4</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">projectionMatrixInverse</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix4</span>();
  }
  <span class="hljs-title function_">updateMatrixWorld</span>(<span class="hljs-params">force</span>) {
    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">updateMatrixWorld</span>(force);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixWorldInverse</span>.<span class="hljs-title function_">copy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixWorld</span>).<span class="hljs-title function_">invert</span>();
  }
  <span class="hljs-title function_">updateWorldMatrix</span>(<span class="hljs-params">updateParents, updateChildren</span>) {
    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">updateWorldMatrix</span>(updateParents, updateChildren);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixWorldInverse</span>.<span class="hljs-title function_">copy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrixWorld</span>).<span class="hljs-title function_">invert</span>();
  }
};

<span class="hljs-comment">// lib/cameras/PerspectiveCamera.mjs</span>
<span class="hljs-keyword">var</span> <span class="hljs-title class_">DEG2RAD</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">180</span>;
<span class="hljs-keyword">var</span> <span class="hljs-title class_">PerspectiveCamera</span> = <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> <span class="hljs-title class_">Camera</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">fov = <span class="hljs-number">50</span>, aspect = <span class="hljs-number">1</span>, near = <span class="hljs-number">0.1</span>, far = <span class="hljs-number">2e3</span></span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isPerspectiveCamera</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fov</span> = fov;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">zoom</span> = <span class="hljs-number">1</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">near</span> = near;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">far</span> = far;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">focus</span> = <span class="hljs-number">10</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">aspect</span> = aspect;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">view</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">filmGauge</span> = <span class="hljs-number">35</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">filmOffset</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateProjectionMatrix</span>();
  }
  <span class="hljs-title function_">updateProjectionMatrix</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> near = <span class="hljs-variable language_">this</span>.<span class="hljs-property">near</span>;
    <span class="hljs-keyword">let</span> top = near * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">tan</span>(<span class="hljs-title class_">DEG2RAD</span> * <span class="hljs-number">0.5</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">fov</span>) / <span class="hljs-variable language_">this</span>.<span class="hljs-property">zoom</span>;
    <span class="hljs-keyword">let</span> height = <span class="hljs-number">2</span> * top;
    <span class="hljs-keyword">let</span> width = <span class="hljs-variable language_">this</span>.<span class="hljs-property">aspect</span> * height;
    <span class="hljs-keyword">let</span> left = -<span class="hljs-number">0.5</span> * width;
    <span class="hljs-keyword">const</span> skew = <span class="hljs-variable language_">this</span>.<span class="hljs-property">filmOffset</span>;
    <span class="hljs-keyword">if</span> (skew !== <span class="hljs-number">0</span>) left += near * skew / <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getFilmWidth</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">projectionMatrix</span>.<span class="hljs-title function_">makePerspective</span>(left, left + width, top, top - height, near, <span class="hljs-variable language_">this</span>.<span class="hljs-property">far</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">coordinateSystem</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">projectionMatrixInverse</span>.<span class="hljs-title function_">copy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">projectionMatrix</span>).<span class="hljs-title function_">invert</span>();
  }
};

<span class="hljs-comment">// lib/core/Renderer.mjs</span>
<span class="hljs-keyword">var</span> <span class="hljs-title function_">epsilon</span> = (<span class="hljs-params">value</span>) =&gt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(value) &lt; <span class="hljs-number">1e-10</span> ? <span class="hljs-number">0</span> : value;
<span class="hljs-keyword">var</span> <span class="hljs-title class_">CSS3DRenderer</span> = <span class="hljs-keyword">class</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">camera, viewElement = <span class="hljs-literal">null</span>, cameraElement = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span> = camera;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">widthHalf</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">heightHalf</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewElement</span> = viewElement || <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cameraElement</span> = cameraElement || <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cameraElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">transformStyle</span> = <span class="hljs-string">&quot;preserve-3d&quot;</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewElement</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cameraElement</span>);
  }
  <span class="hljs-title function_">getCameraCSSMatrix</span>(<span class="hljs-params">matrix</span>) {
    <span class="hljs-keyword">const</span> elements = matrix.<span class="hljs-property">elements</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;matrix3d(&quot;</span> + <span class="hljs-title function_">epsilon</span>(elements[<span class="hljs-number">0</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(-elements[<span class="hljs-number">1</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(elements[<span class="hljs-number">2</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(elements[<span class="hljs-number">3</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(elements[<span class="hljs-number">4</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(-elements[<span class="hljs-number">5</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(elements[<span class="hljs-number">6</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(elements[<span class="hljs-number">7</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(elements[<span class="hljs-number">8</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(-elements[<span class="hljs-number">9</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(elements[<span class="hljs-number">10</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(elements[<span class="hljs-number">11</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(elements[<span class="hljs-number">12</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(-elements[<span class="hljs-number">13</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(elements[<span class="hljs-number">14</span>]) + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-title function_">epsilon</span>(elements[<span class="hljs-number">15</span>]) + <span class="hljs-string">&quot;)&quot;</span>;
  }
  <span class="hljs-title function_">setSize</span>(<span class="hljs-params">width, height</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> = width;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> = height;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">widthHalf</span> = width / <span class="hljs-number">2</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">heightHalf</span> = height / <span class="hljs-number">2</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = width + <span class="hljs-string">&quot;px&quot;</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = height + <span class="hljs-string">&quot;px&quot;</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cameraElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = width + <span class="hljs-string">&quot;px&quot;</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cameraElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = height + <span class="hljs-string">&quot;px&quot;</span>;
  }
  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;render&quot;</span>);
    <span class="hljs-keyword">const</span> camera = <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>;
    <span class="hljs-keyword">const</span> cameraElement = <span class="hljs-variable language_">this</span>.<span class="hljs-property">cameraElement</span>;
    <span class="hljs-keyword">const</span> viewElement = <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewElement</span>;
    <span class="hljs-keyword">const</span> _widthHalf = <span class="hljs-variable language_">this</span>.<span class="hljs-property">widthHalf</span>;
    <span class="hljs-keyword">const</span> _heightHalf = <span class="hljs-variable language_">this</span>.<span class="hljs-property">heightHalf</span>;
    <span class="hljs-keyword">const</span> fov = camera.<span class="hljs-property">projectionMatrix</span>.<span class="hljs-property">elements</span>[<span class="hljs-number">5</span>] * _heightHalf;
    camera.<span class="hljs-title function_">updateMatrixWorld</span>();
    <span class="hljs-keyword">let</span> tx, ty;
    <span class="hljs-keyword">if</span> (camera.<span class="hljs-property">isOrthographicCamera</span>) {
      tx = -(camera.<span class="hljs-property">right</span> + camera.<span class="hljs-property">left</span>) / <span class="hljs-number">2</span>;
      ty = (camera.<span class="hljs-property">top</span> + camera.<span class="hljs-property">bottom</span>) / <span class="hljs-number">2</span>;
    }
    <span class="hljs-keyword">const</span> p = fov * <span class="hljs-number">40</span>;
    <span class="hljs-keyword">const</span> scaleByViewOffset = camera.<span class="hljs-property">view</span> &amp;&amp; camera.<span class="hljs-property">view</span>.<span class="hljs-property">enabled</span> ? camera.<span class="hljs-property">view</span>.<span class="hljs-property">height</span> / camera.<span class="hljs-property">view</span>.<span class="hljs-property">fullHeight</span> : <span class="hljs-number">1</span>;
    <span class="hljs-keyword">const</span> cameraCSSMatrix = camera.<span class="hljs-property">isOrthographicCamera</span> ? <span class="hljs-string">`scale( <span class="hljs-subst">${scaleByViewOffset}</span> )scale(`</span> + fov + <span class="hljs-string">&quot;)translate(&quot;</span> + <span class="hljs-title function_">epsilon</span>(tx) + <span class="hljs-string">&quot;px,&quot;</span> + <span class="hljs-title function_">epsilon</span>(ty) + <span class="hljs-string">&quot;px)&quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCameraCSSMatrix</span>(camera.<span class="hljs-property">matrixWorldInverse</span>) : <span class="hljs-string">`scale( <span class="hljs-subst">${scaleByViewOffset}</span> )translateZ(`</span> + fov + <span class="hljs-string">&quot;px)&quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCameraCSSMatrix</span>(camera.<span class="hljs-property">matrixWorldInverse</span>);
    <span class="hljs-keyword">const</span> perspective = camera.<span class="hljs-property">isPerspectiveCamera</span> ? <span class="hljs-string">&quot;perspective(&quot;</span> + p + <span class="hljs-string">&quot;px) &quot;</span> : <span class="hljs-string">&quot;&quot;</span>;
    <span class="hljs-keyword">const</span> style = perspective + cameraCSSMatrix + <span class="hljs-string">&quot;translate(&quot;</span> + _widthHalf + <span class="hljs-string">&quot;px,&quot;</span> + _heightHalf + <span class="hljs-string">&quot;px)&quot;</span>;
    cameraElement.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = style;
  }
};

<span class="hljs-comment">// lib/core/EventDispatcher.mjs</span>
<span class="hljs-keyword">var</span> <span class="hljs-title class_">EventDispatcher</span> = <span class="hljs-keyword">class</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span> = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }
  <span class="hljs-title function_">addEventListener</span>(<span class="hljs-params">type, callback</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(type)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">set</span>(type, []);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(type).<span class="hljs-title function_">push</span>(callback);
  }
  <span class="hljs-title function_">removeEventListener</span>(<span class="hljs-params">type, callback</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(type)) {
      <span class="hljs-keyword">const</span> callbacks = <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(type);
      <span class="hljs-keyword">const</span> index = callbacks.<span class="hljs-title function_">indexOf</span>(callback);
      <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) {
        callbacks.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
      }
    }
  }
  <span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(event.<span class="hljs-property">type</span>)) {
      <span class="hljs-keyword">const</span> callbacks = <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(event.<span class="hljs-property">type</span>);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> callback <span class="hljs-keyword">of</span> callbacks) {
        <span class="hljs-title function_">callback</span>(event);
      }
    }
  }
};

<span class="hljs-comment">// lib/controls/OrbitControls.mjs</span>
<span class="hljs-keyword">var</span> <span class="hljs-title class_">OrbitControls</span> = <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> <span class="hljs-title class_">EventDispatcher</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">camera, domElement</span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span> = camera;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">domElement</span> = domElement;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMouseDown</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMouseDown</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMouseMove</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMouseMove</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMouseUp</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMouseUp</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onWheel</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">onWheel</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rotation</span> = {
      <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>
    };
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mouse</span> = {
      <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>
    };
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">z</span> = camera.<span class="hljs-property">position</span>.<span class="hljs-property">z</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  <span class="hljs-title function_">init</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">domElement</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;mousedown&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMouseDown</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">domElement</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;mousemove&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMouseMove</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">domElement</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;mouseup&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMouseUp</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">domElement</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;wheel&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onWheel</span>);
  }
  <span class="hljs-title function_">dispose</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">domElement</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&quot;mousedown&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMouseDown</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">domElement</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&quot;mousemove&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMouseMove</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">domElement</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&quot;mouseup&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onMouseUp</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">domElement</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&quot;wheel&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onWheel</span>);
  }
  <span class="hljs-title function_">onMouseDown</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mouse</span>.<span class="hljs-property">x</span> = event.<span class="hljs-property">clientX</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mouse</span>.<span class="hljs-property">y</span> = event.<span class="hljs-property">clientY</span>;
  }
  <span class="hljs-title function_">onMouseMove</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isDragging</span>) {
      <span class="hljs-keyword">const</span> deltaX = event.<span class="hljs-property">clientX</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">mouse</span>.<span class="hljs-property">x</span>;
      <span class="hljs-keyword">const</span> deltaY = event.<span class="hljs-property">clientY</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">mouse</span>.<span class="hljs-property">y</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">mouse</span>.<span class="hljs-property">x</span> = event.<span class="hljs-property">clientX</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">mouse</span>.<span class="hljs-property">y</span> = event.<span class="hljs-property">clientY</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> -= deltaX * <span class="hljs-number">0.5</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> += deltaY * <span class="hljs-number">0.5</span>;
      <span class="hljs-keyword">const</span> radius = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> ** <span class="hljs-number">2</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> ** <span class="hljs-number">2</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> ** <span class="hljs-number">2</span>);
      <span class="hljs-keyword">const</span> theta = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">atan2</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-property">position</span>.<span class="hljs-property">x</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-property">position</span>.<span class="hljs-property">z</span>);
      <span class="hljs-keyword">const</span> phi = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">acos</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> / radius);
      <span class="hljs-keyword">const</span> deltaTheta = deltaX * -<span class="hljs-number">0.01</span>;
      <span class="hljs-keyword">const</span> deltaPhi = deltaY * <span class="hljs-number">0.01</span>;
      <span class="hljs-keyword">const</span> newTheta = theta + deltaTheta;
      <span class="hljs-keyword">const</span> newPhi = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(phi - deltaPhi, <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> - <span class="hljs-number">0.01</span>), <span class="hljs-number">0.01</span>);
      <span class="hljs-keyword">const</span> x = radius * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(newPhi) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(newTheta);
      <span class="hljs-keyword">const</span> y = radius * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(newPhi);
      <span class="hljs-keyword">const</span> z = radius * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(newPhi) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(newTheta);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(x, y, z);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-title function_">lookAt</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-title function_">updateProjectionMatrix</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">update</span>();
    }
  }
  <span class="hljs-title function_">onMouseUp</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDragging</span> = <span class="hljs-literal">false</span>;
  }
  <span class="hljs-title function_">onWheel</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">const</span> deltaZ = event.<span class="hljs-property">deltaY</span> * <span class="hljs-number">0.4</span>;
    <span class="hljs-keyword">const</span> direction = <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-property">position</span>.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">normalize</span>();
    <span class="hljs-keyword">const</span> newPosition = <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-property">position</span>.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">sub</span>(direction.<span class="hljs-title function_">multiplyScalar</span>(deltaZ));
    <span class="hljs-keyword">const</span> { x, y, z } = newPosition;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(x, y, z);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-title function_">lookAt</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">camera</span>.<span class="hljs-title function_">updateProjectionMatrix</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">update</span>();
    event.<span class="hljs-title function_">preventDefault</span>();
  }
  <span class="hljs-title function_">update</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">dispatchEvent</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;change&quot;</span> });
  }
};

<span class="hljs-comment">// lib/core/Scene.mjs</span>
<span class="hljs-keyword">var</span> C3Scene = <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> <span class="hljs-title class_">HTMLElement</span> {
  #camera;
  #renderer;
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleResize</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleResize</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">render</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">render</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-keyword">const</span> shadowRoot = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">attachShadow</span>({ <span class="hljs-attr">mode</span>: <span class="hljs-string">&quot;open&quot;</span> });
    shadowRoot.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
      &lt;style&gt;
        :host {
          display: block;
          min-height: 250px;
          display: flex;
          overflow: hidden;
          position: relative;
          perspective: 300px;
          -webkit-perspective: 300px;
          perspective-origin: center center;
          transform-style: preserve-3d;
          aspect-ratio: 16/9;
          padding: 0;
        }

        :host * {
          transform-style: preserve-3d;
          box-sizing: border-box;
        }

        :host .view {
          width: 100%;
          height: 100%;
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          transform-style: preserve-3d;
        }

        :host slot {
          display: block;
          transform-style: preserve-3d;
        }

      &lt;/style&gt;
      &lt;div class=&quot;view&quot;&gt;
        &lt;div class=&quot;camera&quot;&gt;
          &lt;slot&gt;&lt;/slot&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    `</span>;
    <span class="hljs-keyword">const</span> { width, height } = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getBoundingClientRect</span>();
    <span class="hljs-variable language_">this</span>.#camera = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">50</span>, width / height, <span class="hljs-number">0.1</span>, <span class="hljs-number">1e3</span>);
    <span class="hljs-variable language_">this</span>.#camera.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.#camera.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = <span class="hljs-number">100</span>;
    <span class="hljs-variable language_">this</span>.#camera.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = <span class="hljs-number">580</span>;
    <span class="hljs-keyword">const</span> viewElement = shadowRoot.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.view&quot;</span>);
    <span class="hljs-keyword">const</span> cameraElement = shadowRoot.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.camera&quot;</span>);
    <span class="hljs-variable language_">this</span>.#renderer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CSS3DRenderer</span>(<span class="hljs-variable language_">this</span>.#camera, viewElement, cameraElement);
    <span class="hljs-variable language_">this</span>.#renderer.<span class="hljs-title function_">setSize</span>(width, height);
    <span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(<span class="hljs-variable language_">this</span>.#camera, viewElement);
    controls.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;change&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">render</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
    <span class="hljs-variable language_">this</span>.#camera.<span class="hljs-title function_">lookAt</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">camera</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.#camera;
  }
  <span class="hljs-title function_">connectedCallback</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;resize&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleResize</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
  }
  <span class="hljs-title function_">handleResize</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> { width, height } = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getBoundingClientRect</span>();
    <span class="hljs-variable language_">this</span>.#camera.<span class="hljs-property">aspect</span> = width / height;
    <span class="hljs-variable language_">this</span>.#camera.<span class="hljs-title function_">updateProjectionMatrix</span>();
    <span class="hljs-variable language_">this</span>.#renderer.<span class="hljs-title function_">setSize</span>(width, height);
  }
  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.#renderer.<span class="hljs-title function_">render</span>();
  }
};
customElements.<span class="hljs-title function_">define</span>(<span class="hljs-string">&quot;c3-scene&quot;</span>, C3Scene);

<span class="hljs-comment">// lib/utils.mjs</span>
<span class="hljs-keyword">var</span> <span class="hljs-title function_">camelize</span> = (<span class="hljs-params">str</span>) =&gt; str.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/-./g</span>, <span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-title function_">charAt</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">toUpperCase</span>());
<span class="hljs-keyword">var</span> <span class="hljs-title function_">decamelize</span> = (<span class="hljs-params">str</span>) =&gt; str.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/([a-z])([A-Z])/g</span>, <span class="hljs-string">&quot;$1-$2&quot;</span>).<span class="hljs-title function_">toLowerCase</span>();

<span class="hljs-comment">// lib/mixins/CSSStyleMixin.mjs</span>
<span class="hljs-keyword">var</span> <span class="hljs-title function_">getStylesheet</span> = (<span class="hljs-params">shadowRoot</span>) =&gt; {
  <span class="hljs-keyword">let</span> style = shadowRoot.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;style[data-c3-style-handle]&quot;</span>);
  <span class="hljs-keyword">if</span> (!style) {
    style = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;style&quot;</span>);
    style.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;data-c3-style-handle&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);
    shadowRoot.<span class="hljs-title function_">appendChild</span>(style);
  }
  <span class="hljs-keyword">return</span> style.<span class="hljs-property">sheet</span>;
};
<span class="hljs-keyword">var</span> <span class="hljs-title function_">CSSStyleMixin</span> = (<span class="hljs-params">clazz, props, isVar = <span class="hljs-literal">false</span>, callback = (target, prop, newValue) =&gt; target.dispatchEvent(<span class="hljs-keyword">new</span> CustomEvent(<span class="hljs-string">&quot;change&quot;</span>, { bubbles: <span class="hljs-literal">false</span>, detail: { name: prop, value: newValue } }))</span>) =&gt; {
  props.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">prop</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> name = <span class="hljs-keyword">typeof</span> prop === <span class="hljs-string">&quot;string&quot;</span> ? prop : prop[<span class="hljs-number">1</span>];
    prop = <span class="hljs-keyword">typeof</span> prop === <span class="hljs-string">&quot;string&quot;</span> ? prop : prop[<span class="hljs-number">0</span>];
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;DEFINE: &quot;</span>, clazz.<span class="hljs-property">name</span>, prop, name, isVar ? <span class="hljs-string">&quot;VAR&quot;</span> : <span class="hljs-string">&quot;VALUE&quot;</span>);
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(clazz.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, prop, {
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;GET VALUE: &quot;</span>, clazz.<span class="hljs-property">name</span>, prop);
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getComputedStyle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-property">host</span>).<span class="hljs-title function_">getPropertyValue</span>(
          isVar ? <span class="hljs-string">`--<span class="hljs-subst">${name}</span>`</span> : name
        );
      },
      <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;SET VALUE: &quot;</span>, clazz.<span class="hljs-property">name</span>, prop, value);
        <span class="hljs-keyword">const</span> sheet = <span class="hljs-title function_">getStylesheet</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>);
        <span class="hljs-keyword">const</span> rule = [...sheet.<span class="hljs-property">cssRules</span>].<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">rule2</span>) =&gt;</span> rule2.<span class="hljs-property">selectorText</span> === <span class="hljs-string">&quot;:host&quot;</span>)[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">const</span> hyphenated = <span class="hljs-title function_">decamelize</span>(name);
        <span class="hljs-keyword">const</span> oldValue = <span class="hljs-variable language_">this</span>[prop];
        <span class="hljs-keyword">if</span> (rule) {
          rule.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(isVar ? <span class="hljs-string">`--<span class="hljs-subst">${name}</span>`</span> : hyphenated, value);
        } <span class="hljs-keyword">else</span> {
          sheet.<span class="hljs-title function_">insertRule</span>(<span class="hljs-string">`:host {
            <span class="hljs-subst">${isVar ? <span class="hljs-string">`--<span class="hljs-subst">${name}</span>`</span> : hyphenated}</span>: <span class="hljs-subst">${value}</span>;
          }`</span>, <span class="hljs-number">0</span>);
        }
        <span class="hljs-keyword">const</span> newValue = <span class="hljs-variable language_">this</span>[prop];
        <span class="hljs-keyword">if</span> (oldValue !== newValue &amp;&amp; callback) {
          <span class="hljs-title function_">callback</span>(<span class="hljs-variable language_">this</span>, prop, newValue, oldValue);
        }
      }
    });
  });
};

<span class="hljs-comment">// lib/core/3DObject.mjs</span>
<span class="hljs-keyword">var</span> C3Object = <span class="hljs-keyword">class</span> <span class="hljs-title class_">_C3Object</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">HTMLElement</span> {
  #style;
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">render</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">render</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">attachShadow</span>({ <span class="hljs-attr">mode</span>: <span class="hljs-string">&quot;open&quot;</span> });
    <span class="hljs-variable language_">this</span>.#style = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;style&quot;</span>);
    <span class="hljs-variable language_">this</span>.#style.<span class="hljs-property">textContent</span> = <span class="hljs-string">`
      :host {
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
        height: 0;
        display: block;
        pointer-events: auto;
        user-select: none;
        transform-style: preserve-3d;
      }

      :host * {
        transform-style: preserve-3d;
      }

      :host::before {
        content: &#x27;&#x27;;
        display: none;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        outline: 5px solid blue;
        transform-style: preserve-3d;
      }
    `</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.#style);
  }
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">observedAttributes</span>() {
    <span class="hljs-keyword">return</span> [
      <span class="hljs-string">&quot;position&quot;</span>,
      <span class="hljs-string">&quot;rotate&quot;</span>,
      <span class="hljs-string">&quot;scale&quot;</span>,
      <span class="hljs-string">&quot;animation&quot;</span>,
      <span class="hljs-string">&quot;background&quot;</span>,
      <span class="hljs-string">&quot;color&quot;</span>
    ];
  }
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getPosition</span>(<span class="hljs-params">target</span>) {
    <span class="hljs-keyword">const</span> position = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getComputedStyle</span>(target).<span class="hljs-title function_">getPropertyValue</span>(<span class="hljs-string">&quot;translate&quot;</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;position&quot;</span>, position);
    <span class="hljs-keyword">const</span> [x = <span class="hljs-number">0</span>, y = <span class="hljs-number">0</span>, z = <span class="hljs-number">0</span>] = position.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\s+/</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">n = <span class="hljs-string">&quot;&quot;</span></span>) =&gt;</span> <span class="hljs-title class_">Number</span>(n.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/px$/g</span>, <span class="hljs-string">&quot;&quot;</span>))).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> !<span class="hljs-built_in">isNaN</span>(n) ? n : <span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>(x, y, z);
  }
  <span class="hljs-title function_">connectedCallback</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>());
  }
  <span class="hljs-title function_">attributeChangedCallback</span>(<span class="hljs-params">name, oldValue, newValue</span>) {
    <span class="hljs-keyword">if</span> (oldValue === newValue) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">const</span> prop = <span class="hljs-title function_">camelize</span>(name);
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">has</span>(<span class="hljs-variable language_">this</span>, prop)) {
      <span class="hljs-variable language_">this</span>[prop] = newValue;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
    }
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">x</span>() {
    <span class="hljs-keyword">return</span> _C3Object.<span class="hljs-title function_">getPosition</span>(<span class="hljs-variable language_">this</span>).<span class="hljs-property">x</span>;
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">y</span>() {
    <span class="hljs-keyword">return</span> _C3Object.<span class="hljs-title function_">getPosition</span>(<span class="hljs-variable language_">this</span>).<span class="hljs-property">y</span>;
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">z</span>() {
    <span class="hljs-keyword">return</span> _C3Object.<span class="hljs-title function_">getPosition</span>(<span class="hljs-variable language_">this</span>).<span class="hljs-property">y</span>;
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">scene</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">closest</span>(<span class="hljs-string">&quot;c3-scene&quot;</span>);
  }
  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
  }
};
<span class="hljs-title class_">CSSStyleMixin</span>(C3Object, [
  [<span class="hljs-string">&quot;position&quot;</span>, <span class="hljs-string">&quot;translate&quot;</span>],
  <span class="hljs-string">&quot;rotate&quot;</span>,
  <span class="hljs-string">&quot;scale&quot;</span>,
  <span class="hljs-string">&quot;animation&quot;</span>
]);

<span class="hljs-comment">// lib/shapes/box.mjs</span>
<span class="hljs-keyword">var</span> box = <span class="hljs-string">`
  &lt;style scoped&gt;
    :host {
      --width: 200px;
      --height: 200px;
      --depth: 200px;
      --background: rgba(0, 255, 255, 0.6);
    }

    :host .cube {
      position: absolute;
      top: 0;
      left: 0;
      width: var(--width);
      height: var(--height);
      transform-style: preserve-3d;
      transform: translate3d(-50%, -50%, calc(var(--depth) / 2 - var(--width) / 2));
      
    }

    :host .face {
      width: var(--width);
      height: var(--height);
      display: block;
      position: absolute;
      background: var(--background, &#x27;gray&#x27;);
      /* backface-visibility: hidden; */
      transform-style: preserve-3d;
      /*border: 1px solid red;*/
    }

    /*
    .face {
      position: absolute;
      width: var(--width);
      height: var(--height);
      border: 2px solid black;
      background: var(--background, &#x27;gray&#x27;);
      backface-visibility: hidden;
      transform-style: preserve-3d;
    }*/
  
    :host .front {
      transform: rotateY( 0deg) translateZ(calc(var(--width) / 2));
      transform-origin: \xDF 0;
    }

    :host .back {
      transform: rotateX( 180deg) translateZ(calc( var(--depth) - var(--width) / 2 )) ;
    }

    :host .right {
      width: var(--depth);
      transform: rotateY( 90deg) translateX(calc(var(--depth) / 2 - var(--width) / 2)) translateZ(calc( var(--width) - var(--depth) / 2 )) scaleX(-1);
    }

    :host .left {
      width: var(--depth);
      transform: rotateY( -90deg) translateX(calc(var(--width) / 2 - var(--depth) / 2)) translateZ(calc(var(--depth) / 2 ))  scaleX(-1); 
    }

    :host .top {
      height: var(--depth);
      transform: rotateX( 90deg) translateY(calc(var(--width) / 2 - var(--depth) / 2)) translateX(0)  translateZ(calc(var(--depth) / 2)) scaleY(-1);
    }

    :host .bottom {
      height: var(--depth);
      transform: rotateX( -90deg) translateY(calc( var(--depth) / 2 - var(--width) / 2))  translateZ(calc(var(--height) - var(--depth) / 2))  scaleY(-1);
    }
   
    
    
  &lt;/style&gt;
  &lt;div class=&quot;cube&quot;&gt;
    &lt;div class=&quot;face front&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;face back&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;face right&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;face left&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;face top&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;face bottom&quot;&gt;&lt;/div&gt;
  &lt;/div&gt;
`</span>;

<span class="hljs-comment">// lib/elements/Box.mjs</span>
<span class="hljs-keyword">var</span> C3Box = <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> C3Object {
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">observedAttributes</span>() {
    <span class="hljs-keyword">return</span> [
      ...C3Object.<span class="hljs-property">observedAttributes</span>,
      <span class="hljs-string">&quot;background&quot;</span>,
      <span class="hljs-string">&quot;width&quot;</span>,
      <span class="hljs-string">&quot;height&quot;</span>,
      <span class="hljs-string">&quot;depth&quot;</span>
    ];
  }
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-keyword">const</span> shape = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
    shape.<span class="hljs-property">style</span>.<span class="hljs-property">transformStyle</span> = <span class="hljs-string">&quot;preserve-3d&quot;</span>;
    shape.<span class="hljs-property">innerHTML</span> = box;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-title function_">appendChild</span>(shape);
  }
};
<span class="hljs-title class_">CSSStyleMixin</span>(C3Box, [
  <span class="hljs-string">&quot;background&quot;</span>,
  <span class="hljs-string">&quot;width&quot;</span>,
  <span class="hljs-string">&quot;height&quot;</span>,
  <span class="hljs-string">&quot;depth&quot;</span>
], <span class="hljs-literal">true</span>);
customElements.<span class="hljs-title function_">define</span>(<span class="hljs-string">&quot;c3-box&quot;</span>, C3Box);

<span class="hljs-comment">// lib/elements/Grid.mjs</span>
<span class="hljs-keyword">var</span> C3Grid = <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> C3Object {
  #style;
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.#style = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;style&quot;</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.#style);
  }
  <span class="hljs-title function_">connectedCallback</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
  }
  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">render</span>();
    <span class="hljs-keyword">const</span> f = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">const</span> size = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;size&quot;</span>) || <span class="hljs-string">&quot;200px&quot;</span>);
    <span class="hljs-keyword">const</span> divisions = <span class="hljs-built_in">parseInt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&quot;divisions&quot;</span>) || <span class="hljs-string">&quot;10&quot;</span>);
    <span class="hljs-keyword">const</span> width = size * f;
    <span class="hljs-keyword">const</span> height = size * f;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-property">host</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">&quot;--color&quot;</span>, <span class="hljs-string">&quot;rgba(2555, 255, 255, 0.5)&quot;</span>);
    <span class="hljs-variable language_">this</span>.#style.<span class="hljs-property">textContent</span> = <span class="hljs-string">`
      :host {
        --size: <span class="hljs-subst">${size}</span>px;
        --divisions: <span class="hljs-subst">${divisions}</span>;
      }
      
      :host::after {
        --stroke: 2.5px;
        --tile: calc(var(--size) / var(--divisions));
        content: &#x27;&#x27;;
        position: absolute;
        top: 0;
        left: 0;
        width: calc(var(--size) + var(--stroke));
        height: calc(var(--size) + var(--stroke));
        background: repeating-linear-gradient(90deg, var(--color), var(--color) 1px, transparent 1px, transparent var(--tile)) 
            , repeating-linear-gradient(180deg, var(--color), var(--color) 1px, transparent 1px, transparent var(--tile));
        transform: rotateX(90deg)  translate(-50%, -50%);
        transform-style: preserve-3d;
        transform-origin: 0 0;
      }
    `</span>;
  }
};
customElements.<span class="hljs-title function_">define</span>(<span class="hljs-string">&quot;c3-grid&quot;</span>, C3Grid);

<span class="hljs-comment">// lib/elements/Group.mjs</span>
<span class="hljs-keyword">var</span> C3Group = <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> C3Object {
  #slot;
  <span class="hljs-comment">// #mutationObserver;</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">observedAttributes</span>() {
    <span class="hljs-keyword">return</span> [...C3Object.<span class="hljs-property">observedAttributes</span>];
  }
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSlotChange</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSlotChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-keyword">const</span> slot = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;slot&quot;</span>);
    slot.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&quot;block&quot;</span>;
    slot.<span class="hljs-property">style</span>.<span class="hljs-property">transformStyle</span> = <span class="hljs-string">&quot;preserve-3d&quot;</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-title function_">appendChild</span>(slot);
    slot.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;slotchange&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSlotChange</span>);
    <span class="hljs-variable language_">this</span>.#slot = slot;
  }
  <span class="hljs-title function_">disconnectedCallback</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.#slot.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&quot;slotchange&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSlotChange</span>);
  }
  <span class="hljs-comment">// handleChildrenChange() {</span>
  <span class="hljs-comment">//   console.log(&#x27;*********** children change...&#x27;);</span>
  <span class="hljs-comment">//   this.render();</span>
  <span class="hljs-comment">// }</span>
  <span class="hljs-title function_">handleSlotChange</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;****** slot change...&quot;</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
  }
};
customElements.<span class="hljs-title function_">define</span>(<span class="hljs-string">&quot;c3-group&quot;</span>, C3Group);

<span class="hljs-comment">// lib/shapes/polyhedron.mjs</span>
<span class="hljs-keyword">var</span> import_quickhull3d = <span class="hljs-title function_">__toESM</span>(require_dist(), <span class="hljs-number">1</span>);
<span class="hljs-keyword">var</span> qh = import_quickhull3d.<span class="hljs-property">default</span>[<span class="hljs-string">&quot;default&quot;</span>];
<span class="hljs-keyword">var</span> <span class="hljs-title function_">polyhedron</span> = (<span class="hljs-params">points</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;polyhedron...&quot;</span>, points);
  points = points.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">point</span>) =&gt;</span> [...point]);
  points = points.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">point, index</span>) =&gt;</span> points.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> p.<span class="hljs-title function_">join</span>() === point.<span class="hljs-title function_">join</span>()) === index);
  <span class="hljs-keyword">if</span> (points.<span class="hljs-property">length</span> &lt; <span class="hljs-number">4</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;points&quot;</span>, points);
  <span class="hljs-keyword">const</span> faces = <span class="hljs-title function_">qh</span>(points).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">face</span>) =&gt;</span> face.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">index</span>) =&gt;</span> points[index])).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">face</span>) =&gt;</span> face.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">point</span>) =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>(...point))).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">face, index</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> [a, b, c] = face;
    <span class="hljs-keyword">const</span> center = <span class="hljs-title function_">centroid</span>(a, b, c);
    <span class="hljs-keyword">const</span> normal = b.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">sub</span>(a).<span class="hljs-title function_">cross</span>(c.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">sub</span>(a)).<span class="hljs-title function_">normalize</span>();
    <span class="hljs-keyword">const</span> angle = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">acos</span>(normal.<span class="hljs-property">z</span>);
    <span class="hljs-keyword">const</span> axis = normal.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">cross</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>)).<span class="hljs-title function_">normalize</span>();
    <span class="hljs-keyword">const</span> points2d = face.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">point</span>) =&gt;</span> point.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">sub</span>(center).<span class="hljs-title function_">applyAxisAngle</span>(axis, -angle));
    <span class="hljs-keyword">const</span> minX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(...points2d.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">point</span>) =&gt;</span> point.<span class="hljs-property">x</span>));
    <span class="hljs-keyword">const</span> minY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(...points2d.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">point</span>) =&gt;</span> point.<span class="hljs-property">y</span>));
    <span class="hljs-keyword">const</span> maxX = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...points2d.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">point</span>) =&gt;</span> point.<span class="hljs-property">x</span>));
    <span class="hljs-keyword">const</span> maxY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...points2d.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">point</span>) =&gt;</span> point.<span class="hljs-property">y</span>));
    <span class="hljs-keyword">const</span> width = maxX - minX;
    <span class="hljs-keyword">const</span> height = maxY - minY;
    <span class="hljs-keyword">const</span> shiftX = minX + width / <span class="hljs-number">2</span>;
    <span class="hljs-keyword">const</span> shiftY = minY + height / <span class="hljs-number">2</span>;
    <span class="hljs-keyword">const</span> local2d = points2d.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">point</span>) =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector3</span>(point.<span class="hljs-property">x</span> - minX, point.<span class="hljs-property">y</span> - minY, <span class="hljs-number">0</span>));
    <span class="hljs-keyword">const</span> clipPath = <span class="hljs-string">`polygon(<span class="hljs-subst">${local2d.map((point) =&gt; <span class="hljs-string">`<span class="hljs-subst">${point.x}</span>px <span class="hljs-subst">${point.y}</span>px`</span>).join(<span class="hljs-string">&quot;, &quot;</span>)}</span>)`</span>;
    <span class="hljs-keyword">const</span> transform = <span class="hljs-string">`
        translate(-50%, -50%)
        translate3d(<span class="hljs-subst">${center.x}</span>px, <span class="hljs-subst">${center.y}</span>px, <span class="hljs-subst">${center.z}</span>px)
        rotate3d(<span class="hljs-subst">${axis.x}</span>, <span class="hljs-subst">${axis.y}</span>, <span class="hljs-subst">${axis.z}</span>, <span class="hljs-subst">${rad2deg(angle)}</span>deg)
        translate(<span class="hljs-subst">${shiftX}</span>px, <span class="hljs-subst">${shiftY}</span>px)
      `</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">`
        &lt;div
          class=&quot;face&quot;
          style=&quot;
            width: <span class="hljs-subst">${width}</span>px;
            height: <span class="hljs-subst">${height}</span>px;
            transform:  <span class="hljs-subst">${transform}</span>;
            clip-path: <span class="hljs-subst">${clipPath}</span>;
          &quot;
        &gt;
        &lt;/div&gt;
      `</span>;
  });
  <span class="hljs-keyword">return</span> <span class="hljs-string">`
    &lt;style scoped&gt;
      :host {
        --background: rgba(0, 255, 255, 0.5);
        cursor: pointer;
      }

      .face {
        position: absolute;
        left: 0;
        top: 0;
        transform-style: preserve-3d;
        transform-origin: center;
        background: var(--background);
        /*backface-visibility: hidden;*/
        
      }

    &lt;/style&gt;
    <span class="hljs-subst">${faces.join(<span class="hljs-string">&quot;&quot;</span>)}</span>
  `</span>;
};

<span class="hljs-comment">// lib/elements/Polyhedron.mjs</span>
<span class="hljs-keyword">var</span> C3Polyhedron = <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> C3Group {
  #shape;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">observedAttributes</span>() {
    <span class="hljs-keyword">return</span> [
      ...C3Object.<span class="hljs-property">observedAttributes</span>,
      <span class="hljs-string">&quot;background&quot;</span>
    ];
  }
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;C3Polyhedron constructor...&quot;</span>);
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSlotChange</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSlotChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-variable language_">this</span>.#shape = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
    <span class="hljs-variable language_">this</span>.#shape.<span class="hljs-property">style</span>.<span class="hljs-property">transformStyle</span> = <span class="hljs-string">&quot;preserve-3d&quot;</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.#shape);
  }
  <span class="hljs-keyword">get</span> <span class="hljs-title function_">vertices</span>() {
    <span class="hljs-keyword">return</span> [...<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;c3-vertex&quot;</span>)];
  }
  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;render polyhedron...&quot;</span>);
    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">render</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;this&quot;</span>, <span class="hljs-variable language_">this</span>);
    <span class="hljs-keyword">const</span> points = [...<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;c3-vertex&quot;</span>)].<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">vertex</span>) =&gt;</span> [...C3Object.<span class="hljs-title function_">getPosition</span>(vertex)]);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;points&quot;</span>, points);
    <span class="hljs-variable language_">this</span>.#shape.<span class="hljs-property">innerHTML</span> = <span class="hljs-title function_">polyhedron</span>(points);
  }
};
<span class="hljs-title class_">CSSStyleMixin</span>(C3Polyhedron, [
  <span class="hljs-string">&quot;background&quot;</span>
], <span class="hljs-literal">true</span>);
customElements.<span class="hljs-title function_">define</span>(<span class="hljs-string">&quot;c3-polyhedron&quot;</span>, C3Polyhedron);

<span class="hljs-comment">// lib/elements/Vertex.mjs</span>
<span class="hljs-keyword">var</span> C3Vertex = <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> C3Object {
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">observedAttributes</span>() {
    <span class="hljs-keyword">return</span> [
      ...C3Object.<span class="hljs-property">observedAttributes</span>
    ];
  }
};
customElements.<span class="hljs-title function_">define</span>(<span class="hljs-string">&quot;c3-vertex&quot;</span>, C3Vertex);

<span class="hljs-comment">// lib/shapes/cylinder.mjs</span>
<span class="hljs-keyword">var</span> <span class="hljs-variable constant_">FACETS</span> = <span class="hljs-number">16</span>;
<span class="hljs-keyword">var</span> cylinder = <span class="hljs-string">`
  &lt;style scoped&gt;
    :host {
      --radius: 100px;
      --topRadius: 100px;
      --bottomRadius: 100px;
      --height: 200px;
      --facets: <span class="hljs-subst">${FACETS}</span>;
      --background: rgba(0, 255, 255, 0.1);
    }

    /*
    :host::before,
    :host::after {
      --r: calc(max(var(--topRadius), var(--bottomRadius)));
      content: &#x27;&#x27;;
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: calc(var(--r) * 2);
      height: var(--height);
      transform: translateX(-50%) translateY(-50%) translateZ(calc(var(--r)));
      outline: 2px solid green;
    }

    :host::after {
      transform: translateX(-50%) translateY(-50%) translateZ(calc(-1 * var(--r)));
    }
    */

    .shape {
      --_topRadius: var(--topRadius, var(--radius));
      --_bottomRadius: var(--bottomRadius, var(--radius));
    }

    .shape {
      transform: translate3d(-50%, -50%, calc(var(--radiusTop) / 2));
      transform-style: preserve-3d;
    }

    .top, .bottom, .body {
      transform-style: preserve-3d;
    }

    

    .facet {
      --r: calc((var(--_bottomRadius) + var(--_topRadius)) / 2);
      --angle: calc(var(--facet) * 360deg / var(--facets));
      --x: calc(var(--r) * cos(var(--angle)) - 50%);
      --y: -50%;
      --z: calc(var(--r) * sin(var(--angle)));
      --w2: calc(var(--_topRadius) * 2 * tan(180deg / var(--facets)));
      --w1: calc(var(--_bottomRadius) * 2 * tan(180deg / var(--facets)));

      --w: max(var(--w1), var(--w2));
      --ax: calc(atan2(var(--_bottomRadius) - var(--_topRadius), var(--height)));
      --lx: calc(min(var(--w1), var(--w2)) / 2);
      --h: calc(var(--height) + var(--lx) * sin(ax));
      --s: calc(var(--height) / cos(var(--ax) * -1));
      --a: calc(atan2(var(--s), var(--w2) / 2 - var(--w1) / 2) - 45deg);

      transform-style: preserve-3d;
    }

    .body .facet {
      position: absolute;
      top: 0;
      left: 0;
      width: var(--w);
      height: var(--s);
      transform-origin: 50% 50%;
      transform: translate3d(var(--x), var(--y), var(--z)) rotateY(calc(-1 * var(--angle) + 90deg)) rotateX(calc(var(--ax) * -1));
      
      background: var(--background);
      background-position-x: calc(100% * var(--facet));
      /* background-size: calc(100% * var(--facets)) 100%; */

      --mc: orange;
      --mt: rgba(0, 255, 0, 0.5);
      --mt: transparent; 
     
      mask-image:
        conic-gradient(
          from 135deg at calc( 50% - var(--w1) / 2) 0,
          var(--mt) 45deg,
          var(--mc) 0,
          var(--mc) calc(90deg - var(--a)),
          var(--mt) calc(90deg - var(--a))
        ),

        conic-gradient(
          from 135deg at calc( 50% + var(--w1) / 2) 0,
            var(--mt) calc(var(--a)),
            var(--mc) calc(45deg - var(--a)),
            var(--mc) calc(45deg),
            var(--mt) calc(45deg)
        ),

        conic-gradient(
          from -45deg at calc( 50% - var(--w2) / 2) 100%,
            var(--mt) calc(90deg - var(--a)),
            var(--mc) calc(90deg - var(--a)),
            var(--mc) 45deg,
            var(--mt) 45deg
        ),
        
        conic-gradient(
          from -45deg at calc( 50% + var(--w2) / 2) 100%,
            var(--mt) 45deg,
            var(--mc) 45deg,
            var(--mc) calc(var(--a)),
            var(--mt) calc(var(--a))
        ),
        
        linear-gradient(90deg,
          var(--mt) calc(50% - var(--lx)),
          var(--mc) calc(50% - var(--lx)),
          var(--mc) calc(50% + var(--lx) + 0.5px),
          var(--mt) calc(50% + var(--lx) + 0.5px)
        );
    }

    .top .facet {
      --sx: var(--w2);
      --w: calc(var(--topRadius, var(--radius)) * 2);
      --h: calc(var(--topRadius, var(--radius)) * 2);
    }

    .bottom .facet {
      --sx: var(--w1);
      --w: calc(var(--bottomRadius, var(--radius)) * 2);
      --h: calc(var(--bottomRadius, var(--radius)) * 2);
    }

    .bottom {
      position: absolute;
      top: calc( -1 * var(--height));
    }

    .top .facet,
    .bottom .facet {
      --mc: orange;
      --mt: transparent;
      --r: calc((var(--_bottomRadius) + var(--_topRadius)) / 2);
      --a: calc(atan2(var(--h), var(--sx)));
      --b: calc(atan2(var(--h), var(--sx) * -1));
      --fy: calc(var(--facet) * 0px); 
    }

    .bottom .facet {
      /*transform: translate(-50%, calc(var(--height) / -2 - 50% + var(--fy) )) rotateX(90deg) rotateZ(calc(var(--angle)));*/
    }

    .top .facet::before,
    .bottom .facet::before {
      content: &#x27;&#x27;;
      display: block;
      position: absolute;
      top: 50%;
      left: 50%;
      width: calc(var(--_topRadius) * 2);
      height: calc(var(--_topRadius) * 2);
      background: var(--background);
     
      transform: translate(-50%, -50%) rotateZ(calc(-1 * var(--angle)));
      transform-origin: 50% 50%;
    }

    .bottom .facet::before {
      width: calc(var(--_bottomRadius) * 2);
      height: calc(var(--_bottomRadius) * 2);
      transform: translate(-50%, -50%) rotateZ(calc(-1 * var(--angle))) scaleX(-1);
    }

    .top .facet,
    .bottom .facet {
      background-size: auto 100%;
    }

    .top .facet,
    .bottom .facet {
      position: absolute;
      width: var(--w);
      height: var(--h);
      transform-origin: 50% 50%;
      transform: translate(-50%, calc(var(--height) / 2 - 50% + var(--fy) )) rotateX(90deg) rotateZ(calc(var(--angle)));
      mask-image: conic-gradient(from calc(0deg ) at 50% 50%, var(--mt) var(--a), var(--mc) var(--a), var(--mc) calc(var(--b)), var(--mt) calc(var(--b)));

      outline: 3px solid blue;
    }

    
  &lt;/style&gt;
  &lt;div class=&quot;shape cylinder&quot;&gt;
    &lt;div class=&quot;top&quot;&gt;
      <span class="hljs-subst">${<span class="hljs-built_in">Array</span>.<span class="hljs-keyword">from</span>({ length: FACETS }, (_, i) =&gt; <span class="hljs-string">`&lt;div class=&quot;facet&quot; style=&quot;--facet: <span class="hljs-subst">${i}</span>&quot;&gt;&lt;/div&gt;`</span>).join(<span class="hljs-string">&quot;\n&quot;</span>)}</span>
    &lt;/div&gt;
    &lt;div class=&quot;body&quot;&gt;
      <span class="hljs-subst">${<span class="hljs-built_in">Array</span>.<span class="hljs-keyword">from</span>({ length: FACETS }, (_, i) =&gt; <span class="hljs-string">`&lt;div class=&quot;facet&quot; style=&quot;--facet: <span class="hljs-subst">${i}</span>&quot;&gt;&lt;/div&gt;`</span>).join(<span class="hljs-string">&quot;\n&quot;</span>)}</span>
    &lt;/div&gt;
    &lt;div class=&quot;bottom&quot;&gt;
      <span class="hljs-subst">${<span class="hljs-built_in">Array</span>.<span class="hljs-keyword">from</span>({ length: FACETS }, (_, i) =&gt; <span class="hljs-string">`&lt;div class=&quot;facet&quot; style=&quot;--facet: <span class="hljs-subst">${i}</span>&quot;&gt;&lt;/div&gt;`</span>).join(<span class="hljs-string">&quot;\n&quot;</span>)}</span>
    &lt;/div&gt;
  &lt;/div&gt;
  
`</span>;

<span class="hljs-comment">// lib/elements/Cylinder.mjs</span>
<span class="hljs-keyword">var</span> C3Cylinder = <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> C3Object {
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">observedAttributes</span>() {
    <span class="hljs-keyword">return</span> [
      ...C3Object.<span class="hljs-property">observedAttributes</span>,
      <span class="hljs-string">&quot;background&quot;</span>,
      <span class="hljs-string">&quot;radius&quot;</span>,
      <span class="hljs-string">&quot;topRadius&quot;</span>,
      <span class="hljs-string">&quot;top-radius&quot;</span>,
      <span class="hljs-string">&quot;bottomRadius&quot;</span>,
      <span class="hljs-string">&quot;bottom-radius&quot;</span>,
      <span class="hljs-string">&quot;height&quot;</span>,
      <span class="hljs-string">&quot;facets&quot;</span>
    ];
  }
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-keyword">const</span> shape = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
    shape.<span class="hljs-property">style</span>.<span class="hljs-property">transformStyle</span> = <span class="hljs-string">&quot;preserve-3d&quot;</span>;
    shape.<span class="hljs-property">innerHTML</span> = cylinder;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-title function_">appendChild</span>(shape);
  }
};
<span class="hljs-title class_">CSSStyleMixin</span>(C3Cylinder, [
  <span class="hljs-string">&quot;background&quot;</span>,
  <span class="hljs-string">&quot;radius&quot;</span>,
  <span class="hljs-string">&quot;topRadius&quot;</span>,
  <span class="hljs-string">&quot;bottomRadius&quot;</span>,
  <span class="hljs-string">&quot;height&quot;</span>,
  <span class="hljs-string">&quot;facets&quot;</span>
], <span class="hljs-literal">true</span>);
customElements.<span class="hljs-title function_">define</span>(<span class="hljs-string">&quot;c3-cylinder&quot;</span>, C3Cylinder);

<span class="hljs-comment">// lib/shapes/sphere.mjs</span>
<span class="hljs-keyword">var</span> <span class="hljs-variable constant_">SLICES</span> = <span class="hljs-number">32</span>;
<span class="hljs-keyword">var</span> <span class="hljs-title class_">FACETS2</span> = <span class="hljs-number">16</span>;
<span class="hljs-keyword">var</span> sphere = <span class="hljs-string">`
  &lt;style scoped&gt;
    :host {
      --radius: 100px;
      --background: gray;
      display: grid;
    }

    .scene {
      width: calc(var(--radius) * 2);
      height: calc(var(--radius) * 2);
      /*transform: translateX(-50%) translateY(-50%) translateZ(calc(var(--radius) * -1));*/
      transform: translate(-50%, -50%);
    }

    :host * {
      transform-style: preserve-3d;
      backface-visibility: hidden;
    }

    .scene,
    .scene *,
    .scene *::before,
    .scene *::after {
      position: absolute;
    }

    .sphere, .slice {
      inset: 0;
    }

    .sphere {
      /* display: grid; */
      transform: scaleX(-1);
    }

    .slice {
      --ngon: 32;
      --angle: calc(360deg/var(--ngon));
      transform: rotateY(calc(var(--angle) * var(--sliceStep))) scaleX(calc(cos(var(--angle) / 2)));
      display: grid;
      place-items: center;
    }

    .facet {
      --facet-width: calc(var(--radius) * 2 * sin(var(--angle) / 2));
      width: var(--facet-width);
      aspect-ratio: 1;
      --ptAngle: calc( atan( (sin(var(--angle)*(var(--ptStep) + 1)) - sin(var(--angle)*var(--ptStep)))/2 ) );
      --peak: calc(-100% * sin(var(--angle)*(var(--facetStep) + 1))/(sin(var(--angle)*(var(--facetStep) + 1)) - sin(var(--angle)*var(--facetStep))) + 100%);
      --clr3: hsl(calc(360deg - 10deg/(var(--ngon)/2)*var(--facetStep)) 100% calc(50% + 38%/(var(--ngon)/2)*var(--facetStep)));  
      --clr4: hsl(calc(360deg - 10deg/(var(--ngon)/2)*(var(--facetStep) + 1)) 100% calc(50% + 38%/(var(--ngon)/2)*(var(--facetStep) + 1)));
      /*background-image: linear-gradient(var(--clr3), var(--clr4)), conic-gradient(from calc(90deg*(1 + var(--dir)) - 1*var(--ptAngle)) at 50% var(--peak), var(--clr1),var(--clr2) calc(2*var(--ptAngle)), transparent 0);*/
      background-blend-mode: difference;
      webkit-mask-image: conic-gradient(from calc(90deg*(1 + var(--dir)) - 1*var(--ptAngle)) at 50% var(--peak), black calc(2*var(--ptAngle)), transparent 0);
      mask-image: conic-gradient(from calc(90deg*(1 + var(--dir)) - 1*var(--ptAngle)) at 50% var(--peak), black calc(2*var(--ptAngle)), transparent 0);
      --pushZ: 52em;
      transform: rotate(calc(90deg + var(--angle)*(.5 + var(--facetStep)))) translateX(calc(var(--pushZ) * cos(var(--angle) / 2))) rotateY(calc(90deg));
      --dir: 1;
      padding-inline: 0;
      background: red;
      background: var(--background);
      background-position: calc(var(--sliceStep) / var(--ngon) * -100%) calc(var(--facetStep) / (var(--ngon) / 2) * 100%);
      background-size: 3200% 1600%;
      backface-visibility: hidden;
    }

    .facet:nth-child(n+9) {
      --dir: -1;
    }

    .slice:nth-child(n-17) .facet:nth-child(n+9),
    .slice:nth-child(n+17) .facet:nth-child(n-9) {
      --clr1: hsl(calc(60deg + 120deg/var(--ngon)*(var(--gradStep) + 1)) 100% calc(50% - 23%/var(--ngon)*(var(--gradStep) + 1)));  
      --clr2: hsl(calc(60deg + 120deg/var(--ngon)*var(--gradStep)) 100% calc(50% - 23%/var(--ngon)*var(--gradStep)));
    }

    :where(.facet),
    .slice:nth-child(n+17) .facet:nth-child(n+9) {
      --clr2: hsl(calc(60deg + 120deg/var(--ngon)*(var(--gradStep) + 1)) 100% calc(50% - 23%/var(--ngon)*(var(--gradStep) + 1)));  
      --clr1: hsl(calc(60deg + 120deg/var(--ngon)*var(--gradStep)) 100% calc(50% - 23%/var(--ngon)*var(--gradStep)));
    }


    .scene .facet {
      --pushZ: var(--radius);
    }

    .scene .facet {
      backface-visibility: hidden;
    }

    /* iterations */

    .slice:nth-child(1) {
      --sliceStep: 0;
    }

    .slice:nth-child(2) {
      --sliceStep: 1;
    }

    .slice:nth-child(3) {
      --sliceStep: 2;
    }

    .slice:nth-child(4) {
      --sliceStep: 3;
    }

    .slice:nth-child(5) {
      --sliceStep: 4;
    }

    .slice:nth-child(6) {
      --sliceStep: 5;
    }

    .slice:nth-child(7) {
      --sliceStep: 6;
    }

    .slice:nth-child(8) {
      --sliceStep: 7;
    }

    .slice:nth-child(9) {
      --sliceStep: 8;
    }

    .slice:nth-child(10) {
      --sliceStep: 9;
    }

    .slice:nth-child(11) {
      --sliceStep: 10;
    }

    .slice:nth-child(12) {
      --sliceStep: 11;
    }

    .slice:nth-child(13) {
      --sliceStep: 12;
    }

    .slice:nth-child(14) {
      --sliceStep: 13;
    }

    .slice:nth-child(15) {
      --sliceStep: 14;
    }

    .slice:nth-child(16) {
      --sliceStep: 15;
    }

    .slice:nth-child(17) {
      --sliceStep: 16;
    }

    .slice:nth-child(18) {
      --sliceStep: 17;
    }

    .slice:nth-child(19) {
      --sliceStep: 18;
    }

    .slice:nth-child(20) {
      --sliceStep: 19;
    }

    .slice:nth-child(21) {
      --sliceStep: 20;
    }

    .slice:nth-child(22) {
      --sliceStep: 21;
    }

    .slice:nth-child(23) {
      --sliceStep: 22;
    }

    .slice:nth-child(24) {
      --sliceStep: 23;
    }

    .slice:nth-child(25) {
      --sliceStep: 24;
    }

    .slice:nth-child(26) {
      --sliceStep: 25;
    }

    .slice:nth-child(27) {
      --sliceStep: 26;
    }

    .slice:nth-child(28) {
      --sliceStep: 27;
    }

    .slice:nth-child(29) {
      --sliceStep: 28;
    }

    .slice:nth-child(30) {
      --sliceStep: 29;
    }

    .slice:nth-child(31) {
      --sliceStep: 30;
    }

    .slice:nth-child(32) {
      --sliceStep: 31;
    }


    /* incrementing the facet&#x27;s step variable */

    .facet:nth-child(1) {
      --facetStep: 0;
    }

    .facet:nth-child(2) {
      --facetStep: 1;
    }

    .facet:nth-child(3) {
      --facetStep: 2;
    }

    .facet:nth-child(4) {
      --facetStep: 3;
    }

    .facet:nth-child(5) {
      --facetStep: 4;
    }

    .facet:nth-child(6) {
      --facetStep: 5;
    }

    .facet:nth-child(7) {
      --facetStep: 6;
    }

    .facet:nth-child(8) {
      --facetStep: 7;
    }

    .facet:nth-child(9) {
      --facetStep: 8;
    }

    .facet:nth-child(10) {
      --facetStep: 9;
    }

    .facet:nth-child(11) {
      --facetStep: 10;
    }

    .facet:nth-child(12) {
      --facetStep: 11;
    }

    .facet:nth-child(13) {
      --facetStep: 12;
    }

    .facet:nth-child(14) {
      --facetStep: 13;
    }

    .facet:nth-child(15) {
      --facetStep: 14;
    }

    .facet:nth-child(16) {
      --facetStep: 15;
    }

    /* this switches the incrementation and goes backwards at the midpoint */

    .facet:nth-child(1), .facet:nth-last-child(1) {
      --ptStep: 0;
    }

    .facet:nth-child(2), .facet:nth-last-child(2) {
      --ptStep: 1;
    }

    .facet:nth-child(3), .facet:nth-last-child(3) {
      --ptStep: 2;
    }

    .facet:nth-child(4), .facet:nth-last-child(4) {
      --ptStep: 3;
    }

    .facet:nth-child(5), .facet:nth-last-child(5) {
      --ptStep: 4;
    }

    .facet:nth-child(6), .facet:nth-last-child(6) {
      --ptStep: 5;
    }

    .facet:nth-child(7), .facet:nth-last-child(7) {
      --ptStep: 6;
    }

    .facet:nth-child(8), .facet:nth-last-child(8) {
      --ptStep: 7;
    }
  &lt;/style&gt;
  &lt;div class=&quot;scene&quot;&gt;
    &lt;div class=&quot;sphere&quot;&gt;
      <span class="hljs-subst">${[...<span class="hljs-built_in">Array</span>(SLICES)].map((_, i) =&gt; <span class="hljs-string">`
        &lt;div class=&quot;slice&quot; style=&quot;--sliceStep: <span class="hljs-subst">${i}</span>&quot;&gt;
          <span class="hljs-subst">${[...<span class="hljs-built_in">Array</span>(FACETS2)].map((_2, j) =&gt; <span class="hljs-string">`
            &lt;div class=&quot;facet&quot; style=&quot;--facetStep: <span class="hljs-subst">${j}</span>&quot;&gt;&lt;/div&gt;
          `</span>).join(<span class="hljs-string">&quot;&quot;</span>)}</span>
        &lt;/div&gt;
      `</span>).join(<span class="hljs-string">&quot;&quot;</span>)}</span>
    &lt;/div&gt;
  &lt;/div&gt;
  `</span>;

<span class="hljs-comment">// lib/elements/Sphere.mjs</span>
<span class="hljs-keyword">var</span> C3Sphere = <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> C3Object {
  #style;
  #radius;
  #background;
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-keyword">const</span> shape = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
    shape.<span class="hljs-property">style</span>.<span class="hljs-property">transformStyle</span> = <span class="hljs-string">&quot;preserve-3d&quot;</span>;
    shape.<span class="hljs-property">innerHTML</span> = sphere;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">shadowRoot</span>.<span class="hljs-title function_">appendChild</span>(shape);
  }
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">observedAttributes</span>() {
    <span class="hljs-keyword">return</span> [
      ...C3Object.<span class="hljs-property">observedAttributes</span>,
      <span class="hljs-string">&quot;background&quot;</span>,
      <span class="hljs-string">&quot;radius&quot;</span>
    ];
  }
};
<span class="hljs-title class_">CSSStyleMixin</span>(C3Sphere, [
  <span class="hljs-string">&quot;background&quot;</span>,
  <span class="hljs-string">&quot;radius&quot;</span>
], <span class="hljs-literal">true</span>);
customElements.<span class="hljs-title function_">define</span>(<span class="hljs-string">&quot;c3-sphere&quot;</span>, C3Sphere);
<span class="hljs-keyword">export</span> {
  C3Box,
  C3Cylinder,
  C3Grid,
  C3Group,
  C3Polyhedron,
  C3Scene,
  C3Sphere,
  C3Vertex
};
</code></pre>
    </div>
  </div>
</main>

    <div class="footer">
      <div class="center">
        Powered by <a target="_blank" href="https://benignware.com">Benignware</a>
      </div>
    </div>
  </body>
</html>